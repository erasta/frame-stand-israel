(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const c of h)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(h){const c={};return h.integrity&&(c.integrity=h.integrity),h.referrerPolicy&&(c.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?c.credentials="include":h.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(h){if(h.ep)return;h.ep=!0;const c=s(h);fetch(h.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var o=e.default;if(typeof o=="function"){var s=function a(){return this instanceof a?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};s.prototype=o.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var h=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,h.get?h:{enumerable:!0,get:function(){return e[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,o,s){this.props=e,this.context=o,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,o){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,o,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,o,s){this.props=e,this.context=o,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,o,s){var a,h={},c=null,d=null;if(o!=null)for(a in o.ref!==void 0&&(d=o.ref),o.key!==void 0&&(c=""+o.key),o)J.call(o,a)&&!L$1.hasOwnProperty(a)&&(h[a]=o[a]);var g=arguments.length-2;if(g===1)h.children=s;else if(1<g){for(var b=Array(g),_=0;_<g;_++)b[_]=arguments[_+2];h.children=b}if(e&&e.defaultProps)for(a in g=e.defaultProps,g)h[a]===void 0&&(h[a]=g[a]);return{$$typeof:l$1,type:e,key:c,ref:d,props:h,_owner:K$1.current}}function N$1(e,o){return{$$typeof:l$1,type:e.type,key:o,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var o={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return o[s]})}var P$1=/\/+/g;function Q$1(e,o){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):o.toString(36)}function R$1(e,o,s,a,h){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,h=h(d),e=a===""?"."+Q$1(d,0):a,I$1(h)?(s="",e!=null&&(s=e.replace(P$1,"$&/")+"/"),R$1(h,o,s,"",function(_){return _})):h!=null&&(O$1(h)&&(h=N$1(h,s+(!h.key||d&&d.key===h.key?"":(""+h.key).replace(P$1,"$&/")+"/")+e)),o.push(h)),1;if(d=0,a=a===""?".":a+":",I$1(e))for(var g=0;g<e.length;g++){c=e[g];var b=a+Q$1(c,g);d+=R$1(c,o,s,b,h)}else if(b=A$1(e),typeof b=="function")for(e=b.call(e),g=0;!(c=e.next()).done;)c=c.value,b=a+Q$1(c,g++),d+=R$1(c,o,s,b,h);else if(c==="object")throw o=String(e),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,o,s){if(e==null)return e;var a=[],h=0;return R$1(e,a,"","",function(c){return o.call(s,c,h++)}),a}function T$1(e){if(e._status===-1){var o=e._result;o=o(),o.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=o)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(e,o,s){S$1(e,function(){o.apply(this,arguments)},s)},count:function(e){var o=0;return S$1(e,function(){o++}),o},toArray:function(e){return S$1(e,function(o){return o})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(e,o,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),h=e.key,c=e.ref,d=e._owner;if(o!=null){if(o.ref!==void 0&&(c=o.ref,d=K$1.current),o.key!==void 0&&(h=""+o.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(b in o)J.call(o,b)&&!L$1.hasOwnProperty(b)&&(a[b]=o[b]===void 0&&g!==void 0?g[b]:o[b])}var b=arguments.length-2;if(b===1)a.children=s;else if(1<b){g=Array(b);for(var _=0;_<b;_++)g[_]=arguments[_+2];a.children=g}return{$$typeof:l$1,type:e.type,key:h,ref:c,props:a,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var o=M$1.bind(null,e);return o.type=e,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,o){return{$$typeof:x,type:e,compare:o===void 0?null:o}};react_production_min.startTransition=function(e){var o=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(e,o){return U$1.current.useCallback(e,o)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,o){return U$1.current.useEffect(e,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,o,s){return U$1.current.useImperativeHandle(e,o,s)};react_production_min.useInsertionEffect=function(e,o){return U$1.current.useInsertionEffect(e,o)};react_production_min.useLayoutEffect=function(e,o){return U$1.current.useLayoutEffect(e,o)};react_production_min.useMemo=function(e,o){return U$1.current.useMemo(e,o)};react_production_min.useReducer=function(e,o,s){return U$1.current.useReducer(e,o,s)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,o,s){return U$1.current.useSyncExternalStore(e,o,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,o,s){var a,h={},c=null,d=null;s!==void 0&&(c=""+s),o.key!==void 0&&(c=""+o.key),o.ref!==void 0&&(d=o.ref);for(a in o)m$1.call(o,a)&&!p$1.hasOwnProperty(a)&&(h[a]=o[a]);if(e&&e.defaultProps)for(a in o=e.defaultProps,o)h[a]===void 0&&(h[a]=o[a]);return{$$typeof:k,type:e,key:c,ref:d,props:h,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function o(vt,St){var kt=vt.length;vt.push(St);e:for(;0<kt;){var $t=kt-1>>>1,Pt=vt[$t];if(0<h(Pt,St))vt[$t]=St,vt[kt]=Pt,kt=$t;else break e}}function s(vt){return vt.length===0?null:vt[0]}function a(vt){if(vt.length===0)return null;var St=vt[0],kt=vt.pop();if(kt!==St){vt[0]=kt;e:for(var $t=0,Pt=vt.length,It=Pt>>>1;$t<It;){var Dt=2*($t+1)-1,At=vt[Dt],Rt=Dt+1,Ot=vt[Rt];if(0>h(At,kt))Rt<Pt&&0>h(Ot,At)?(vt[$t]=Ot,vt[Rt]=kt,$t=Rt):(vt[$t]=At,vt[Dt]=kt,$t=Dt);else if(Rt<Pt&&0>h(Ot,kt))vt[$t]=Ot,vt[Rt]=kt,$t=Rt;else break e}}return St}function h(vt,St){var kt=vt.sortIndex-St.sortIndex;return kt!==0?kt:vt.id-St.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();e.unstable_now=function(){return d.now()-g}}var b=[],_=[],$=1,j=null,_e=3,et=!1,nt=!1,it=!1,lt=typeof setTimeout=="function"?setTimeout:null,tt=typeof clearTimeout=="function"?clearTimeout:null,st=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function rt(vt){for(var St=s(_);St!==null;){if(St.callback===null)a(_);else if(St.startTime<=vt)a(_),St.sortIndex=St.expirationTime,o(b,St);else break;St=s(_)}}function ot(vt){if(it=!1,rt(vt),!nt)if(s(b)!==null)nt=!0,Bt(ut);else{var St=s(_);St!==null&&Nt(ot,St.startTime-vt)}}function ut(vt,St){nt=!1,it&&(it=!1,tt(ht),ht=-1),et=!0;var kt=_e;try{for(rt(St),j=s(b);j!==null&&(!(j.expirationTime>St)||vt&&!ft());){var $t=j.callback;if(typeof $t=="function"){j.callback=null,_e=j.priorityLevel;var Pt=$t(j.expirationTime<=St);St=e.unstable_now(),typeof Pt=="function"?j.callback=Pt:j===s(b)&&a(b),rt(St)}else a(b);j=s(b)}if(j!==null)var It=!0;else{var Dt=s(_);Dt!==null&&Nt(ot,Dt.startTime-St),It=!1}return It}finally{j=null,_e=kt,et=!1}}var gt=!1,pt=null,ht=-1,ct=5,at=-1;function ft(){return!(e.unstable_now()-at<ct)}function mt(){if(pt!==null){var vt=e.unstable_now();at=vt;var St=!0;try{St=pt(!0,vt)}finally{St?xt():(gt=!1,pt=null)}}else gt=!1}var xt;if(typeof st=="function")xt=function(){st(mt)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Et=bt.port2;bt.port1.onmessage=mt,xt=function(){Et.postMessage(null)}}else xt=function(){lt(mt,0)};function Bt(vt){pt=vt,gt||(gt=!0,xt())}function Nt(vt,St){ht=lt(function(){vt(e.unstable_now())},St)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(vt){vt.callback=null},e.unstable_continueExecution=function(){nt||et||(nt=!0,Bt(ut))},e.unstable_forceFrameRate=function(vt){0>vt||125<vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<vt?Math.floor(1e3/vt):5},e.unstable_getCurrentPriorityLevel=function(){return _e},e.unstable_getFirstCallbackNode=function(){return s(b)},e.unstable_next=function(vt){switch(_e){case 1:case 2:case 3:var St=3;break;default:St=_e}var kt=_e;_e=St;try{return vt()}finally{_e=kt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(vt,St){switch(vt){case 1:case 2:case 3:case 4:case 5:break;default:vt=3}var kt=_e;_e=vt;try{return St()}finally{_e=kt}},e.unstable_scheduleCallback=function(vt,St,kt){var $t=e.unstable_now();switch(typeof kt=="object"&&kt!==null?(kt=kt.delay,kt=typeof kt=="number"&&0<kt?$t+kt:$t):kt=$t,vt){case 1:var Pt=-1;break;case 2:Pt=250;break;case 5:Pt=1073741823;break;case 4:Pt=1e4;break;default:Pt=5e3}return Pt=kt+Pt,vt={id:$++,callback:St,priorityLevel:vt,startTime:kt,expirationTime:Pt,sortIndex:-1},kt>$t?(vt.sortIndex=kt,o(_,vt),s(b)===null&&vt===s(_)&&(it?(tt(ht),ht=-1):it=!0,Nt(ot,kt-$t))):(vt.sortIndex=Pt,o(b,vt),nt||et||(nt=!0,Bt(ut))),vt},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(vt){var St=_e;return function(){var kt=_e;_e=St;try{return vt.apply(this,arguments)}finally{_e=kt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,o){ha(e,o),ha(e+"Capture",o)}function ha(e,o){for(ea[e]=o,e=0;e<o.length;e++)da.add(o[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,o,s,a){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,o,s,a){if(o===null||typeof o>"u"||pa(e,o,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v(e,o,s,a,h,c,d){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=a,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=e,this.type=o,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var o=e[0];z[o]=new v(o,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var o=e.replace(ra,sa);z[o]=new v(o,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var o=e.replace(ra,sa);z[o]=new v(o,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var o=e.replace(ra,sa);z[o]=new v(o,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,o,s,a){var h=z.hasOwnProperty(o)?z[o]:null;(h!==null?h.type!==0:a||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,s,h,a)&&(s=null),a||h===null?oa(o)&&(s===null?e.removeAttribute(o):e.setAttribute(o,""+s)):h.mustUseProperty?e[h.propertyName]=s===null?h.type===3?!1:"":s:(o=h.attributeName,a=h.attributeNamespace,s===null?e.removeAttribute(o):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,a?e.setAttributeNS(a,o,s):e.setAttribute(o,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+e}var Na=!1;function Oa(e,o){if(!e||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_){var a=_}Reflect.construct(e,[],o)}else{try{o.call()}catch(_){a=_}e.call(o.prototype)}else{try{throw Error()}catch(_){a=_}e()}}catch(_){if(_&&a&&typeof _.stack=="string"){for(var h=_.stack.split(`
`),c=a.stack.split(`
`),d=h.length-1,g=c.length-1;1<=d&&0<=g&&h[d]!==c[g];)g--;for(;1<=d&&0<=g;d--,g--)if(h[d]!==c[g]){if(d!==1||g!==1)do if(d--,g--,0>g||h[d]!==c[g]){var b=`
`+h[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=g);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var o=e.render;return e=e.displayName,e||(e=o.displayName||o.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return o=e.displayName||null,o!==null?o:Qa(e.type)||"Memo";case Ha:o=e._payload,e=e._init;try{return Qa(e(o))}catch{}}return null}function Ra(e){var o=e.type;switch(e.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=o.render,e=e.displayName||e.name||"",o.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var o=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(e){var o=Ta(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,o),a=""+e[o];if(!e.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,c=s.set;return Object.defineProperty(e,o,{configurable:!0,get:function(){return h.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(e,o,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[o]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var o=e._valueTracker;if(!o)return!0;var s=o.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==s?(o.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,o){var s=o.checked;return A({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Za(e,o){var s=o.defaultValue==null?"":o.defaultValue,a=o.checked!=null?o.checked:o.defaultChecked;s=Sa(o.value!=null?o.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(e,o){o=o.checked,o!=null&&ta(e,"checked",o,!1)}function bb(e,o){ab(e,o);var s=Sa(o.value),a=o.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}o.hasOwnProperty("value")?cb(e,o.type,s):o.hasOwnProperty("defaultValue")&&cb(e,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(e.defaultChecked=!!o.defaultChecked)}function db(e,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var a=o.type;if(!(a!=="submit"&&a!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+e._wrapperState.initialValue,s||o===e.value||(e.value=o),e.defaultValue=o}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function cb(e,o,s){(o!=="number"||Xa(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var eb=Array.isArray;function fb(e,o,s,a){if(e=e.options,o){o={};for(var h=0;h<s.length;h++)o["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=o.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Sa(s),o=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,a&&(e[h].defaultSelected=!0);return}o!==null||e[h].disabled||(o=e[h])}o!==null&&(o.selected=!0)}}function gb(e,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},o,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}o=s}o==null&&(o=""),s=o}e._wrapperState={initialValue:Sa(s)}}function ib(e,o){var s=Sa(o.value),a=Sa(o.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),o.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function jb(e){var o=e.textContent;o===e._wrapperState.initialValue&&o!==""&&o!==null&&(e.value=o)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,o){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(o):e==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,a,h){MSApp.execUnsafeLocalFunction(function(){return e(o,s,a,h)})}:e}(function(e,o){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;o.firstChild;)e.appendChild(o.firstChild)}});function ob(e,o){if(o){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=o;return}}e.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(o){o=o+e.charAt(0).toUpperCase()+e.substring(1),pb[o]=pb[e]})});function rb(e,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||pb.hasOwnProperty(e)&&pb[e]?(""+o).trim():o+"px"}function sb(e,o){e=e.style;for(var s in o)if(o.hasOwnProperty(s)){var a=s.indexOf("--")===0,h=rb(s,o[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,h):e[s]=h}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,o){if(o){if(tb[e]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p(62))}}function vb(e,o){if(e.indexOf("-")===-1)return typeof o.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var o=e.stateNode;o&&(o=Db(o),yb(e.stateNode,e.type,o))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,o=Ab;if(Ab=zb=null,Bb(e),o)for(e=0;e<o.length;e++)Bb(o[e])}}function Gb(e,o){return e(o)}function Hb(){}var Ib=!1;function Jb(e,o,s){if(Ib)return e(o,s);Ib=!0;try{return Gb(e,o,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,o){var s=e.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(p(231,o,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,o,s,a,h,c,d,g,b){var _=Array.prototype.slice.call(arguments,3);try{o.apply(s,_)}catch($){this.onError($)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,o,s,a,h,c,d,g,b){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,o,s,a,h,c,d,g,b){if(Tb.apply(this,arguments),Ob){if(Ob){var _=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=_)}}function Vb(e){var o=e,s=e;if(e.alternate)for(;o.return;)o=o.return;else{e=o;do o=e,o.flags&4098&&(s=o.return),e=o.return;while(e)}return o.tag===3?s:null}function Wb(e){if(e.tag===13){var o=e.memoizedState;if(o===null&&(e=e.alternate,e!==null&&(o=e.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var o=e.alternate;if(!o){if(o=Vb(e),o===null)throw Error(p(188));return o!==e?null:e}for(var s=e,a=o;;){var h=s.return;if(h===null)break;var c=h.alternate;if(c===null){if(a=h.return,a!==null){s=a;continue}break}if(h.child===c.child){for(c=h.child;c;){if(c===s)return Xb(h),e;if(c===a)return Xb(h),o;c=c.sibling}throw Error(p(188))}if(s.return!==a.return)s=h,a=c;else{for(var d=!1,g=h.child;g;){if(g===s){d=!0,s=h,a=c;break}if(g===a){d=!0,a=h,s=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===s){d=!0,s=c,a=h;break}if(g===a){d=!0,a=c,s=h;break}g=g.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?e:o}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var o=$b(e);if(o!==null)return o;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,o){var s=e.pendingLanes;if(s===0)return 0;var a=0,h=e.suspendedLanes,c=e.pingedLanes,d=s&268435455;if(d!==0){var g=d&~h;g!==0?a=tc(g):(c&=d,c!==0&&(a=tc(c)))}else d=s&~h,d!==0?a=tc(d):c!==0&&(a=tc(c));if(a===0)return 0;if(o!==0&&o!==a&&!(o&h)&&(h=a&-a,c=o&-o,h>=c||h===16&&(c&4194240)!==0))return o;if(a&4&&(a|=s&16),o=e.entangledLanes,o!==0)for(e=e.entanglements,o&=a;0<o;)s=31-oc(o),h=1<<s,a|=e[s],o&=~h;return a}function vc(e,o){switch(e){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,o){for(var s=e.suspendedLanes,a=e.pingedLanes,h=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc(c),g=1<<d,b=h[d];b===-1?(!(g&s)||g&a)&&(h[d]=vc(g,o)):b<=o&&(e.expiredLanes|=g),c&=~g}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var o=[],s=0;31>s;s++)o.push(e);return o}function Ac(e,o,s){e.pendingLanes|=o,o!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,o=31-oc(o),e[o]=s}function Bc(e,o){var s=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var h=31-oc(s),c=1<<h;o[h]=0,a[h]=-1,e[h]=-1,s&=~c}}function Cc(e,o){var s=e.entangledLanes|=o;for(e=e.entanglements;s;){var a=31-oc(s),h=1<<a;h&o|e[a]&o&&(e[a]|=o),s&=~h}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,o){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(e,o,s,a,h,c){return e===null||e.nativeEvent!==c?(e={blockedOn:o,domEventName:s,eventSystemFlags:a,nativeEvent:c,targetContainers:[h]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),e):(e.eventSystemFlags|=a,o=e.targetContainers,h!==null&&o.indexOf(h)===-1&&o.push(h),e)}function Uc(e,o,s,a,h){switch(o){case"focusin":return Lc=Tc(Lc,e,o,s,a,h),!0;case"dragenter":return Mc=Tc(Mc,e,o,s,a,h),!0;case"mouseover":return Nc=Tc(Nc,e,o,s,a,h),!0;case"pointerover":var c=h.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,o,s,a,h)),!0;case"gotpointercapture":return c=h.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,o,s,a,h)),!0}return!1}function Vc(e){var o=Wc(e.target);if(o!==null){var s=Vb(o);if(s!==null){if(o=s.tag,o===13){if(o=Wb(s),o!==null){e.blockedOn=o,Ic(e.priority,function(){Gc(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var o=e.targetContainers;0<o.length;){var s=Yc(e.domEventName,e.eventSystemFlags,o[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return o=Cb(s),o!==null&&Fc(o),e.blockedOn=s,!1;o.shift()}return!0}function Zc(e,o,s){Xc(e)&&s.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,o){e.blockedOn===o&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function o(h){return ad(h,e)}if(0<Kc.length){ad(Kc[0],e);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(o),Pc.forEach(o),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,o,s,a){var h=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,o,s,a)}finally{C=h,cd.transition=c}}function gd(e,o,s,a){var h=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,o,s,a)}finally{C=h,cd.transition=c}}function fd(e,o,s,a){if(dd){var h=Yc(e,o,s,a);if(h===null)hd(e,o,a,id,s),Sc(e,a);else if(Uc(h,e,o,s,a))a.stopPropagation();else if(Sc(e,a),o&4&&-1<Rc.indexOf(e)){for(;h!==null;){var c=Cb(h);if(c!==null&&Ec(c),c=Yc(e,o,s,a),c===null&&hd(e,o,a,id,s),c===h)break;h=c}h!==null&&a.stopPropagation()}else hd(e,o,a,null,s)}}var id=null;function Yc(e,o,s,a){if(id=null,e=xb(a),e=Wc(e),e!==null)if(o=Vb(e),o===null)e=null;else if(s=o.tag,s===13){if(e=Wb(o),e!==null)return e;e=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;e=null}else o!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,o=ld,s=o.length,a,h="value"in kd?kd.value:kd.textContent,c=h.length;for(e=0;e<s&&o[e]===h[e];e++);var d=s-e;for(a=1;a<=d&&o[s-a]===h[c-a];a++);return md=h.slice(e,1<a?1-a:void 0)}function od(e){var o=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&o===13&&(e=13)):e=o,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function o(s,a,h,c,d){this._reactName=s,this._targetInst=h,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(s=e[g],this[g]=s?s(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(e):(e=Od[e])?!!o[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var o=Md[e.key]||e.key;if(o!=="Unidentified")return o}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(e,o){switch(e){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,o){switch(e){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return e=o.data,e===ee&&fe?null:e;default:return null}}function ke(e,o){if(ie)return e==="compositionend"||!ae&&ge(e,o)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o==="input"?!!le[e.type]:o==="textarea"}function ne(e,o,s,a){Eb(a),o=oe(o,"onChange"),0<o.length&&(s=new td("onChange","change",null,s,a),e.push({event:s,listeners:o}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var o=ue(e);if(Wa(o))return e}function ve(e,o){if(e==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,e,xb(e)),Jb(re,o)}}function Ce(e,o,s){e==="focusin"?(Ae(),pe=o,qe=s,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,o){if(e==="click")return te(o)}function Fe(e,o){if(e==="input"||e==="change")return te(o)}function Ge(e,o){return e===o&&(e!==0||1/e===1/o)||e!==e&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,o){if(He(e,o))return!0;if(typeof e!="object"||e===null||typeof o!="object"||o===null)return!1;var s=Object.keys(e),a=Object.keys(o);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var h=s[a];if(!ja.call(o,h)||!He(e[h],o[h]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,o){var s=Je(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=o&&a>=o)return{node:s,offset:o-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(e,o){return e&&o?e===o?!0:e&&e.nodeType===3?!1:o&&o.nodeType===3?Le(e,o.parentNode):"contains"in e?e.contains(o):e.compareDocumentPosition?!!(e.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var e=window,o=Xa();o instanceof e.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)e=o.contentWindow;else break;o=Xa(e.document)}return o}function Ne(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o&&(o==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||o==="textarea"||e.contentEditable==="true")}function Oe(e){var o=Me(),s=e.focusedElem,a=e.selectionRange;if(o!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(o=a.start,e=a.end,e===void 0&&(e=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(e,s.value.length);else if(e=(o=s.ownerDocument||document)&&o.defaultView||window,e.getSelection){e=e.getSelection();var h=s.textContent.length,c=Math.min(a.start,h);a=a.end===void 0?c:Math.min(a.end,h),!e.extend&&c>a&&(h=a,a=c,c=h),h=Ke(s,c);var d=Ke(s,a);h&&d&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(o=o.createRange(),o.setStart(h.node,h.offset),e.removeAllRanges(),c>a?(e.addRange(o),e.extend(d.node,d.offset)):(o.setEnd(d.node,d.offset),e.addRange(o)))}}for(o=[],e=s;e=e.parentNode;)e.nodeType===1&&o.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)e=o[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,o,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(o=new td("onSelect","select",null,o,s),e.push({event:o,listeners:a}),o.target=Qe)))}function Ve(e,o){var s={};return s[e.toLowerCase()]=o.toLowerCase(),s["Webkit"+e]="webkit"+o,s["Moz"+e]="moz"+o,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var o=We[e],s;for(s in o)if(o.hasOwnProperty(s)&&s in Ye)return Xe[e]=o[s];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,o){df.set(e,o),fa(o,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,o,s){var a=e.type||"unknown-event";e.currentTarget=s,Ub(a,o,void 0,e),e.currentTarget=null}function se(e,o){o=(o&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],h=a.event;a=a.listeners;e:{var c=void 0;if(o)for(var d=a.length-1;0<=d;d--){var g=a[d],b=g.instance,_=g.currentTarget;if(g=g.listener,b!==c&&h.isPropagationStopped())break e;nf(h,g,_),c=b}else for(d=0;d<a.length;d++){if(g=a[d],b=g.instance,_=g.currentTarget,g=g.listener,b!==c&&h.isPropagationStopped())break e;nf(h,g,_),c=b}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,o){var s=o[of];s===void 0&&(s=o[of]=new Set);var a=e+"__bubble";s.has(a)||(pf(o,e,2,!1),s.add(a))}function qf(e,o,s){var a=0;o&&(a|=4),pf(s,e,a,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,e),qf(s,!0,e))});var o=e.nodeType===9?e:e.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(e,o,s,a){switch(jd(o)){case 1:var h=ed;break;case 4:h=gd;break;default:h=fd}s=h.bind(null,o,s,e),h=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(h=!0),a?h!==void 0?e.addEventListener(o,s,{capture:!0,passive:h}):e.addEventListener(o,s,!0):h!==void 0?e.addEventListener(o,s,{passive:h}):e.addEventListener(o,s,!1)}function hd(e,o,s,a,h){var c=a;if(!(o&1)&&!(o&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var g=a.stateNode.containerInfo;if(g===h||g.nodeType===8&&g.parentNode===h)break;if(d===4)for(d=a.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===h||b.nodeType===8&&b.parentNode===h))return;d=d.return}for(;g!==null;){if(d=Wc(g),d===null)return;if(b=d.tag,b===5||b===6){a=c=d;continue e}g=g.parentNode}}a=a.return}Jb(function(){var _=c,$=xb(s),j=[];e:{var _e=df.get(e);if(_e!==void 0){var et=td,nt=e;switch(e){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":et=Rd;break;case"focusin":nt="focus",et=Fd;break;case"focusout":nt="blur",et=Fd;break;case"beforeblur":case"afterblur":et=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Vd;break;case $e:case af:case bf:et=Hd;break;case cf:et=Xd;break;case"scroll":et=vd;break;case"wheel":et=Zd;break;case"copy":case"cut":case"paste":et=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Td}var it=(o&4)!==0,lt=!it&&e==="scroll",tt=it?_e!==null?_e+"Capture":null:_e;it=[];for(var st=_,rt;st!==null;){rt=st;var ot=rt.stateNode;if(rt.tag===5&&ot!==null&&(rt=ot,tt!==null&&(ot=Kb(st,tt),ot!=null&&it.push(tf(st,ot,rt)))),lt)break;st=st.return}0<it.length&&(_e=new et(_e,nt,null,s,$),j.push({event:_e,listeners:it}))}}if(!(o&7)){e:{if(_e=e==="mouseover"||e==="pointerover",et=e==="mouseout"||e==="pointerout",_e&&s!==wb&&(nt=s.relatedTarget||s.fromElement)&&(Wc(nt)||nt[uf]))break e;if((et||_e)&&(_e=$.window===$?$:(_e=$.ownerDocument)?_e.defaultView||_e.parentWindow:window,et?(nt=s.relatedTarget||s.toElement,et=_,nt=nt?Wc(nt):null,nt!==null&&(lt=Vb(nt),nt!==lt||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(et=null,nt=_),et!==nt)){if(it=Bd,ot="onMouseLeave",tt="onMouseEnter",st="mouse",(e==="pointerout"||e==="pointerover")&&(it=Td,ot="onPointerLeave",tt="onPointerEnter",st="pointer"),lt=et==null?_e:ue(et),rt=nt==null?_e:ue(nt),_e=new it(ot,st+"leave",et,s,$),_e.target=lt,_e.relatedTarget=rt,ot=null,Wc($)===_&&(it=new it(tt,st+"enter",nt,s,$),it.target=rt,it.relatedTarget=lt,ot=it),lt=ot,et&&nt)t:{for(it=et,tt=nt,st=0,rt=it;rt;rt=vf(rt))st++;for(rt=0,ot=tt;ot;ot=vf(ot))rt++;for(;0<st-rt;)it=vf(it),st--;for(;0<rt-st;)tt=vf(tt),rt--;for(;st--;){if(it===tt||tt!==null&&it===tt.alternate)break t;it=vf(it),tt=vf(tt)}it=null}else it=null;et!==null&&wf(j,_e,et,it,!1),nt!==null&&lt!==null&&wf(j,lt,nt,it,!0)}}e:{if(_e=_?ue(_):window,et=_e.nodeName&&_e.nodeName.toLowerCase(),et==="select"||et==="input"&&_e.type==="file")var ut=ve;else if(me(_e))if(we)ut=Fe;else{ut=De;var gt=Ce}else(et=_e.nodeName)&&et.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(ut=Ee);if(ut&&(ut=ut(e,_))){ne(j,ut,s,$);break e}gt&&gt(e,_e,_),e==="focusout"&&(gt=_e._wrapperState)&&gt.controlled&&_e.type==="number"&&cb(_e,"number",_e.value)}switch(gt=_?ue(_):window,e){case"focusin":(me(gt)||gt.contentEditable==="true")&&(Qe=gt,Re=_,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,s,$);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(j,s,$)}var pt;if(ae)e:{switch(e){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else ie?ge(e,s)&&(ht="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ht="onCompositionStart");ht&&(de&&s.locale!=="ko"&&(ie||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&ie&&(pt=nd()):(kd=$,ld="value"in kd?kd.value:kd.textContent,ie=!0)),gt=oe(_,ht),0<gt.length&&(ht=new Ld(ht,e,null,s,$),j.push({event:ht,listeners:gt}),pt?ht.data=pt:(pt=he(s),pt!==null&&(ht.data=pt)))),(pt=ce?je(e,s):ke(e,s))&&(_=oe(_,"onBeforeInput"),0<_.length&&($=new Ld("onBeforeInput","beforeinput",null,s,$),j.push({event:$,listeners:_}),$.data=pt))}se(j,o)})}function tf(e,o,s){return{instance:e,listener:o,currentTarget:s}}function oe(e,o){for(var s=o+"Capture",a=[];e!==null;){var h=e,c=h.stateNode;h.tag===5&&c!==null&&(h=c,c=Kb(e,s),c!=null&&a.unshift(tf(e,c,h)),c=Kb(e,o),c!=null&&a.push(tf(e,c,h))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,o,s,a,h){for(var c=o._reactName,d=[];s!==null&&s!==a;){var g=s,b=g.alternate,_=g.stateNode;if(b!==null&&b===a)break;g.tag===5&&_!==null&&(g=_,h?(b=Kb(s,c),b!=null&&d.unshift(tf(s,b,g))):h||(b=Kb(s,c),b!=null&&d.push(tf(s,b,g)))),s=s.return}d.length!==0&&e.push({event:o,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,o,s){if(o=zf(o),zf(e)!==o&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,o){return e==="textarea"||e==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,o){var s=o,a=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(a===0){e.removeChild(h),bd(o);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=h}while(s);bd(o)}function Lf(e){for(;e!=null;e=e.nextSibling){var o=e.nodeType;if(o===1||o===3)break;if(o===8){if(o=e.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var o=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return e;o--}else s==="/$"&&o++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var o=e[Of];if(o)return o;for(var s=e.parentNode;s;){if(o=s[uf]||s[Of]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(e=Mf(e);e!==null;){if(s=e[Of])return s;e=Mf(e)}return o}e=s,s=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,o){Tf++,Sf[Tf]=e.current,e.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,o){var s=e.type.contextTypes;if(!s)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===o)return a.__reactInternalMemoizedMaskedChildContext;var h={},c;for(c in s)h[c]=o[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=h),h}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,o,s){if(H.current!==Vf)throw Error(p(168));G(H,o),G(Wf,s)}function bg(e,o,s){var a=e.stateNode;if(o=o.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var h in a)if(!(h in o))throw Error(p(108,Ra(e)||"Unknown",h));return A({},s,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,o,s){var a=e.stateNode;if(!a)throw Error(p(169));s?(e=bg(e,o,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,o=C;try{var s=eg;for(C=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(h){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),h}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,o){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=o}function ug(e,o,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var h=32-oc(a)-1;a&=~(1<<h),s+=1;var c=32-oc(o)+h;if(30<c){var d=h-h%5;c=(a&(1<<d)-1).toString(32),a>>=d,h-=d,rg=1<<32-oc(o)+h|s<<h|a,sg=c+e}else rg=1<<c|s<<h|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,o){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=e,o=e.deletions,o===null?(e.deletions=[s],e.flags|=16):o.push(s)}function Cg(e,o){switch(e.tag){case 5:var s=e.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(e.stateNode=o,xg=e,yg=Lf(o.firstChild),!0):!1;case 6:return o=e.pendingProps===""||o.nodeType!==3?null:o,o!==null?(e.stateNode=o,xg=e,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=o,s.return=e,e.child=s,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var o=yg;if(o){var s=o;if(!Cg(e,o)){if(Dg(e))throw Error(p(418));o=Lf(s.nextSibling);var a=xg;o&&Cg(e,o)?Ag(a,s):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var o;if((o=e.tag!==3)&&!(o=e.tag!==5)&&(o=e.type,o=o!=="head"&&o!=="body"&&!Ef(e.type,e.memoizedProps)),o&&(o=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;o;)Ag(e,o),o=Lf(o.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,o=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(o===0){yg=Lf(e.nextSibling);break e}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,o){if(e&&e.defaultProps){o=A({},o),e=e.defaultProps;for(var s in e)o[s]===void 0&&(o[s]=e[s]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(e){var o=Mg.current;E(Mg),e._currentValue=o}function Sg(e,o,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&o)!==o?(e.childLanes|=o,a!==null&&(a.childLanes|=o)):a!==null&&(a.childLanes&o)!==o&&(a.childLanes|=o),e===s)break;e=e.return}}function Tg(e,o){Ng=e,Pg=Og=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&o&&(Ug=!0),e.firstContext=null)}function Vg(e){var o=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=e,Ng.dependencies={lanes:0,firstContext:e}}else Og=Og.next=e;return o}var Wg=null;function Xg(e){Wg===null?Wg=[e]:Wg.push(e)}function Yg(e,o,s,a){var h=o.interleaved;return h===null?(s.next=s,Xg(o)):(s.next=h.next,h.next=s),o.interleaved=s,Zg(e,a)}function Zg(e,o){e.lanes|=o;var s=e.alternate;for(s!==null&&(s.lanes|=o),s=e,e=e.return;e!==null;)e.childLanes|=o,s=e.alternate,s!==null&&(s.childLanes|=o),s=e,e=e.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(e,o){e=e.updateQueue,o.updateQueue===e&&(o.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch(e,o){return{eventTime:e,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(e,o,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var h=a.pending;return h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o,Zg(e,s)}return h=a.interleaved,h===null?(o.next=o,Xg(a)):(o.next=h.next,h.next=o),a.interleaved=o,Zg(e,s)}function eh(e,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var a=o.lanes;a&=e.pendingLanes,s|=a,o.lanes=s,Cc(e,s)}}function fh(e,o){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var h=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?h=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?h=c=o:c=c.next=o}else h=c=o;s={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=o:e.next=o,s.lastBaseUpdate=o}function gh(e,o,s,a){var h=e.updateQueue;$g=!1;var c=h.firstBaseUpdate,d=h.lastBaseUpdate,g=h.shared.pending;if(g!==null){h.shared.pending=null;var b=g,_=b.next;b.next=null,d===null?c=_:d.next=_,d=b;var $=e.alternate;$!==null&&($=$.updateQueue,g=$.lastBaseUpdate,g!==d&&(g===null?$.firstBaseUpdate=_:g.next=_,$.lastBaseUpdate=b))}if(c!==null){var j=h.baseState;d=0,$=_=b=null,g=c;do{var _e=g.lane,et=g.eventTime;if((a&_e)===_e){$!==null&&($=$.next={eventTime:et,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var nt=e,it=g;switch(_e=o,et=s,it.tag){case 1:if(nt=it.payload,typeof nt=="function"){j=nt.call(et,j,_e);break e}j=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=it.payload,_e=typeof nt=="function"?nt.call(et,j,_e):nt,_e==null)break e;j=A({},j,_e);break e;case 2:$g=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,_e=h.effects,_e===null?h.effects=[g]:_e.push(g))}else et={eventTime:et,lane:_e,tag:g.tag,payload:g.payload,callback:g.callback,next:null},$===null?(_=$=et,b=j):$=$.next=et,d|=_e;if(g=g.next,g===null){if(g=h.shared.pending,g===null)break;_e=g,g=_e.next,_e.next=null,h.lastBaseUpdate=_e,h.shared.pending=null}}while(1);if($===null&&(b=j),h.baseState=b,h.firstBaseUpdate=_,h.lastBaseUpdate=$,o=h.shared.interleaved,o!==null){h=o;do d|=h.lane,h=h.next;while(h!==o)}else c===null&&(h.shared.lanes=0);hh|=d,e.lanes=d,e.memoizedState=j}}function ih(e,o,s){if(e=o.effects,o.effects=null,e!==null)for(o=0;o<e.length;o++){var a=e[o],h=a.callback;if(h!==null){if(a.callback=null,a=s,typeof h!="function")throw Error(p(191,h));h.call(a)}}}var jh=new aa.Component().refs;function kh(e,o,s,a){o=e.memoizedState,s=s(a,o),s=s==null?o:A({},o,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var nh={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,o,s){e=e._reactInternals;var a=L(),h=lh(e),c=ch(a,h);c.payload=o,s!=null&&(c.callback=s),o=dh(e,c,h),o!==null&&(mh(o,e,h,a),eh(o,e,h))},enqueueReplaceState:function(e,o,s){e=e._reactInternals;var a=L(),h=lh(e),c=ch(a,h);c.tag=1,c.payload=o,s!=null&&(c.callback=s),o=dh(e,c,h),o!==null&&(mh(o,e,h,a),eh(o,e,h))},enqueueForceUpdate:function(e,o){e=e._reactInternals;var s=L(),a=lh(e),h=ch(s,a);h.tag=2,o!=null&&(h.callback=o),o=dh(e,h,a),o!==null&&(mh(o,e,a,s),eh(o,e,a))}};function oh(e,o,s,a,h,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,d):o.prototype&&o.prototype.isPureReactComponent?!Ie(s,a)||!Ie(h,c):!0}function ph(e,o,s){var a=!1,h=Vf,c=o.contextType;return typeof c=="object"&&c!==null?c=Vg(c):(h=Zf(o)?Xf:H.current,a=o.contextTypes,c=(a=a!=null)?Yf(e,h):Vf),o=new o(s,c),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,e.stateNode=o,o._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=c),o}function qh(e,o,s,a){e=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,a),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,a),o.state!==e&&nh.enqueueReplaceState(o,o.state,null)}function rh(e,o,s,a){var h=e.stateNode;h.props=s,h.state=e.memoizedState,h.refs=jh,ah(e);var c=o.contextType;typeof c=="object"&&c!==null?h.context=Vg(c):(c=Zf(o)?Xf:H.current,h.context=Yf(e,c)),h.state=e.memoizedState,c=o.getDerivedStateFromProps,typeof c=="function"&&(kh(e,o,c,s),h.state=e.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(o=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),o!==h.state&&nh.enqueueReplaceState(h,h.state,null),gh(e,s,h,a),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function sh(e,o,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,e));var h=a,c=""+e;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===c?o.ref:(o=function(d){var g=h.refs;g===jh&&(g=h.refs={}),d===null?delete g[c]:g[c]=d},o._stringRef=c,o)}if(typeof e!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,e))}return e}function th(e,o){throw e=Object.prototype.toString.call(o),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e))}function uh(e){var o=e._init;return o(e._payload)}function vh(e){function o(tt,st){if(e){var rt=tt.deletions;rt===null?(tt.deletions=[st],tt.flags|=16):rt.push(st)}}function s(tt,st){if(!e)return null;for(;st!==null;)o(tt,st),st=st.sibling;return null}function a(tt,st){for(tt=new Map;st!==null;)st.key!==null?tt.set(st.key,st):tt.set(st.index,st),st=st.sibling;return tt}function h(tt,st){return tt=wh(tt,st),tt.index=0,tt.sibling=null,tt}function c(tt,st,rt){return tt.index=rt,e?(rt=tt.alternate,rt!==null?(rt=rt.index,rt<st?(tt.flags|=2,st):rt):(tt.flags|=2,st)):(tt.flags|=1048576,st)}function d(tt){return e&&tt.alternate===null&&(tt.flags|=2),tt}function g(tt,st,rt,ot){return st===null||st.tag!==6?(st=xh(rt,tt.mode,ot),st.return=tt,st):(st=h(st,rt),st.return=tt,st)}function b(tt,st,rt,ot){var ut=rt.type;return ut===ya?$(tt,st,rt.props.children,ot,rt.key):st!==null&&(st.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&uh(ut)===st.type)?(ot=h(st,rt.props),ot.ref=sh(tt,st,rt),ot.return=tt,ot):(ot=yh(rt.type,rt.key,rt.props,null,tt.mode,ot),ot.ref=sh(tt,st,rt),ot.return=tt,ot)}function _(tt,st,rt,ot){return st===null||st.tag!==4||st.stateNode.containerInfo!==rt.containerInfo||st.stateNode.implementation!==rt.implementation?(st=zh(rt,tt.mode,ot),st.return=tt,st):(st=h(st,rt.children||[]),st.return=tt,st)}function $(tt,st,rt,ot,ut){return st===null||st.tag!==7?(st=Ah(rt,tt.mode,ot,ut),st.return=tt,st):(st=h(st,rt),st.return=tt,st)}function j(tt,st,rt){if(typeof st=="string"&&st!==""||typeof st=="number")return st=xh(""+st,tt.mode,rt),st.return=tt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return rt=yh(st.type,st.key,st.props,null,tt.mode,rt),rt.ref=sh(tt,null,st),rt.return=tt,rt;case wa:return st=zh(st,tt.mode,rt),st.return=tt,st;case Ha:var ot=st._init;return j(tt,ot(st._payload),rt)}if(eb(st)||Ka(st))return st=Ah(st,tt.mode,rt,null),st.return=tt,st;th(tt,st)}return null}function _e(tt,st,rt,ot){var ut=st!==null?st.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return ut!==null?null:g(tt,st,""+rt,ot);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case va:return rt.key===ut?b(tt,st,rt,ot):null;case wa:return rt.key===ut?_(tt,st,rt,ot):null;case Ha:return ut=rt._init,_e(tt,st,ut(rt._payload),ot)}if(eb(rt)||Ka(rt))return ut!==null?null:$(tt,st,rt,ot,null);th(tt,rt)}return null}function et(tt,st,rt,ot,ut){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return tt=tt.get(rt)||null,g(st,tt,""+ot,ut);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case va:return tt=tt.get(ot.key===null?rt:ot.key)||null,b(st,tt,ot,ut);case wa:return tt=tt.get(ot.key===null?rt:ot.key)||null,_(st,tt,ot,ut);case Ha:var gt=ot._init;return et(tt,st,rt,gt(ot._payload),ut)}if(eb(ot)||Ka(ot))return tt=tt.get(rt)||null,$(st,tt,ot,ut,null);th(st,ot)}return null}function nt(tt,st,rt,ot){for(var ut=null,gt=null,pt=st,ht=st=0,ct=null;pt!==null&&ht<rt.length;ht++){pt.index>ht?(ct=pt,pt=null):ct=pt.sibling;var at=_e(tt,pt,rt[ht],ot);if(at===null){pt===null&&(pt=ct);break}e&&pt&&at.alternate===null&&o(tt,pt),st=c(at,st,ht),gt===null?ut=at:gt.sibling=at,gt=at,pt=ct}if(ht===rt.length)return s(tt,pt),I&&tg(tt,ht),ut;if(pt===null){for(;ht<rt.length;ht++)pt=j(tt,rt[ht],ot),pt!==null&&(st=c(pt,st,ht),gt===null?ut=pt:gt.sibling=pt,gt=pt);return I&&tg(tt,ht),ut}for(pt=a(tt,pt);ht<rt.length;ht++)ct=et(pt,tt,ht,rt[ht],ot),ct!==null&&(e&&ct.alternate!==null&&pt.delete(ct.key===null?ht:ct.key),st=c(ct,st,ht),gt===null?ut=ct:gt.sibling=ct,gt=ct);return e&&pt.forEach(function(ft){return o(tt,ft)}),I&&tg(tt,ht),ut}function it(tt,st,rt,ot){var ut=Ka(rt);if(typeof ut!="function")throw Error(p(150));if(rt=ut.call(rt),rt==null)throw Error(p(151));for(var gt=ut=null,pt=st,ht=st=0,ct=null,at=rt.next();pt!==null&&!at.done;ht++,at=rt.next()){pt.index>ht?(ct=pt,pt=null):ct=pt.sibling;var ft=_e(tt,pt,at.value,ot);if(ft===null){pt===null&&(pt=ct);break}e&&pt&&ft.alternate===null&&o(tt,pt),st=c(ft,st,ht),gt===null?ut=ft:gt.sibling=ft,gt=ft,pt=ct}if(at.done)return s(tt,pt),I&&tg(tt,ht),ut;if(pt===null){for(;!at.done;ht++,at=rt.next())at=j(tt,at.value,ot),at!==null&&(st=c(at,st,ht),gt===null?ut=at:gt.sibling=at,gt=at);return I&&tg(tt,ht),ut}for(pt=a(tt,pt);!at.done;ht++,at=rt.next())at=et(pt,tt,ht,at.value,ot),at!==null&&(e&&at.alternate!==null&&pt.delete(at.key===null?ht:at.key),st=c(at,st,ht),gt===null?ut=at:gt.sibling=at,gt=at);return e&&pt.forEach(function(mt){return o(tt,mt)}),I&&tg(tt,ht),ut}function lt(tt,st,rt,ot){if(typeof rt=="object"&&rt!==null&&rt.type===ya&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case va:e:{for(var ut=rt.key,gt=st;gt!==null;){if(gt.key===ut){if(ut=rt.type,ut===ya){if(gt.tag===7){s(tt,gt.sibling),st=h(gt,rt.props.children),st.return=tt,tt=st;break e}}else if(gt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&uh(ut)===gt.type){s(tt,gt.sibling),st=h(gt,rt.props),st.ref=sh(tt,gt,rt),st.return=tt,tt=st;break e}s(tt,gt);break}else o(tt,gt);gt=gt.sibling}rt.type===ya?(st=Ah(rt.props.children,tt.mode,ot,rt.key),st.return=tt,tt=st):(ot=yh(rt.type,rt.key,rt.props,null,tt.mode,ot),ot.ref=sh(tt,st,rt),ot.return=tt,tt=ot)}return d(tt);case wa:e:{for(gt=rt.key;st!==null;){if(st.key===gt)if(st.tag===4&&st.stateNode.containerInfo===rt.containerInfo&&st.stateNode.implementation===rt.implementation){s(tt,st.sibling),st=h(st,rt.children||[]),st.return=tt,tt=st;break e}else{s(tt,st);break}else o(tt,st);st=st.sibling}st=zh(rt,tt.mode,ot),st.return=tt,tt=st}return d(tt);case Ha:return gt=rt._init,lt(tt,st,gt(rt._payload),ot)}if(eb(rt))return nt(tt,st,rt,ot);if(Ka(rt))return it(tt,st,rt,ot);th(tt,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,st!==null&&st.tag===6?(s(tt,st.sibling),st=h(st,rt),st.return=tt,tt=st):(s(tt,st),st=xh(rt,tt.mode,ot),st.return=tt,tt=st),d(tt)):s(tt,st)}return lt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(e){if(e===Dh)throw Error(p(174));return e}function Ih(e,o){switch(G(Gh,o),G(Fh,e),G(Eh,Dh),e=o.nodeType,e){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:e=e===8?o.parentNode:o,o=e.namespaceURI||null,e=e.tagName,o=lb(o,e)}E(Eh),G(Eh,o)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(e){Hh(Gh.current);var o=Hh(Eh.current),s=lb(o,e.type);o!==s&&(G(Fh,e),G(Eh,s))}function Lh(e){Fh.current===e&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(e){for(var o=e;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var e=0;e<Nh.length;e++)Nh[e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(e,o){if(o===null)return!1;for(var s=0;s<o.length&&s<e.length;s++)if(!He(e[s],o[s]))return!1;return!0}function Xh(e,o,s,a,h,c){if(Rh=c,N=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=e===null||e.memoizedState===null?Yh:Zh,e=s(a,h),Th){c=0;do{if(Th=!1,Uh=0,25<=c)throw Error(p(301));c+=1,P=O=null,o.updateQueue=null,Ph.current=$h,e=s(a,h)}while(Th)}if(Ph.current=ai,o=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,o)throw Error(p(300));return e}function bi(){var e=Uh!==0;return Uh=0,e}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=e:P=P.next=e,P}function di(){if(O===null){var e=N.alternate;e=e!==null?e.memoizedState:null}else e=O.next;var o=P===null?N.memoizedState:P.next;if(o!==null)P=o,O=e;else{if(e===null)throw Error(p(310));O=e,e={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=e:P=P.next=e}return P}function ei(e,o){return typeof o=="function"?o(e):o}function fi(e){var o=di(),s=o.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=O,h=a.baseQueue,c=s.pending;if(c!==null){if(h!==null){var d=h.next;h.next=c.next,c.next=d}a.baseQueue=h=c,s.pending=null}if(h!==null){c=h.next,a=a.baseState;var g=d=null,b=null,_=c;do{var $=_.lane;if((Rh&$)===$)b!==null&&(b=b.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),a=_.hasEagerState?_.eagerState:e(a,_.action);else{var j={lane:$,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};b===null?(g=b=j,d=a):b=b.next=j,N.lanes|=$,hh|=$}_=_.next}while(_!==null&&_!==c);b===null?d=a:b.next=g,He(a,o.memoizedState)||(Ug=!0),o.memoizedState=a,o.baseState=d,o.baseQueue=b,s.lastRenderedState=a}if(e=s.interleaved,e!==null){h=e;do c=h.lane,N.lanes|=c,hh|=c,h=h.next;while(h!==e)}else h===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function gi(e){var o=di(),s=o.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=s.dispatch,h=s.pending,c=o.memoizedState;if(h!==null){s.pending=null;var d=h=h.next;do c=e(c,d.action),d=d.next;while(d!==h);He(c,o.memoizedState)||(Ug=!0),o.memoizedState=c,o.baseQueue===null&&(o.baseState=c),s.lastRenderedState=c}return[c,a]}function hi(){}function ii(e,o){var s=N,a=di(),h=o(),c=!He(a.memoizedState,h);if(c&&(a.memoizedState=h,Ug=!0),a=a.queue,ji(ki.bind(null,s,a,e),[e]),a.getSnapshot!==o||c||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li$1(9,mi.bind(null,s,a,h,o),void 0,null),R===null)throw Error(p(349));Rh&30||ni(s,o,h)}return h}function ni(e,o,s){e.flags|=16384,e={getSnapshot:o,value:s},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.stores=[e]):(s=o.stores,s===null?o.stores=[e]:s.push(e))}function mi(e,o,s,a){o.value=s,o.getSnapshot=a,oi(o)&&pi(e)}function ki(e,o,s){return s(function(){oi(o)&&pi(e)})}function oi(e){var o=e.getSnapshot;e=e.value;try{var s=o();return!He(e,s)}catch{return!0}}function pi(e){var o=Zg(e,1);o!==null&&mh(o,e,1,-1)}function qi(e){var o=ci();return typeof e=="function"&&(e=e()),o.memoizedState=o.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:e},o.queue=e,e=e.dispatch=ri.bind(null,N,e),[o.memoizedState,e]}function li$1(e,o,s,a){return e={tag:e,create:o,destroy:s,deps:a,next:null},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.lastEffect=e.next=e):(s=o.lastEffect,s===null?o.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,o.lastEffect=e)),e}function si(){return di().memoizedState}function ti(e,o,s,a){var h=ci();N.flags|=e,h.memoizedState=li$1(1|o,s,void 0,a===void 0?null:a)}function ui(e,o,s,a){var h=di();a=a===void 0?null:a;var c=void 0;if(O!==null){var d=O.memoizedState;if(c=d.destroy,a!==null&&Wh(a,d.deps)){h.memoizedState=li$1(o,s,c,a);return}}N.flags|=e,h.memoizedState=li$1(1|o,s,c,a)}function vi(e,o){return ti(8390656,8,e,o)}function ji(e,o){return ui(2048,8,e,o)}function wi(e,o){return ui(4,2,e,o)}function xi(e,o){return ui(4,4,e,o)}function yi(e,o){if(typeof o=="function")return e=e(),o(e),function(){o(null)};if(o!=null)return e=e(),o.current=e,function(){o.current=null}}function zi(e,o,s){return s=s!=null?s.concat([e]):null,ui(4,4,yi.bind(null,o,e),s)}function Ai(){}function Bi(e,o){var s=di();o=o===void 0?null:o;var a=s.memoizedState;return a!==null&&o!==null&&Wh(o,a[1])?a[0]:(s.memoizedState=[e,o],e)}function Ci(e,o){var s=di();o=o===void 0?null:o;var a=s.memoizedState;return a!==null&&o!==null&&Wh(o,a[1])?a[0]:(e=e(),s.memoizedState=[e,o],e)}function Di(e,o,s){return Rh&21?(He(s,o)||(s=yc(),N.lanes|=s,hh|=s,e.baseState=!0),o):(e.baseState&&(e.baseState=!1,Ug=!0),e.memoizedState=s)}function Ei(e,o){var s=C;C=s!==0&&4>s?s:4,e(!0);var a=Qh.transition;Qh.transition={};try{e(!1),o()}finally{C=s,Qh.transition=a}}function Fi(){return di().memoizedState}function Gi(e,o,s){var a=lh(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(e))Ii(o,s);else if(s=Yg(e,o,s,a),s!==null){var h=L();mh(s,e,a,h),Ji(s,o,a)}}function ri(e,o,s){var a=lh(e),h={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(e))Ii(o,h);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=o.lastRenderedReducer,c!==null))try{var d=o.lastRenderedState,g=c(d,s);if(h.hasEagerState=!0,h.eagerState=g,He(g,d)){var b=o.interleaved;b===null?(h.next=h,Xg(o)):(h.next=b.next,b.next=h),o.interleaved=h;return}}catch{}finally{}s=Yg(e,o,h,a),s!==null&&(h=L(),mh(s,e,a,h),Ji(s,o,a))}}function Hi(e){var o=e.alternate;return e===N||o!==null&&o===N}function Ii(e,o){Th=Sh=!0;var s=e.pending;s===null?o.next=o:(o.next=s.next,s.next=o),e.pending=o}function Ji(e,o,s){if(s&4194240){var a=o.lanes;a&=e.pendingLanes,s|=a,o.lanes=s,Cc(e,s)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(e,o){return ci().memoizedState=[e,o===void 0?null:o],e},useContext:Vg,useEffect:vi,useImperativeHandle:function(e,o,s){return s=s!=null?s.concat([e]):null,ti(4194308,4,yi.bind(null,o,e),s)},useLayoutEffect:function(e,o){return ti(4194308,4,e,o)},useInsertionEffect:function(e,o){return ti(4,2,e,o)},useMemo:function(e,o){var s=ci();return o=o===void 0?null:o,e=e(),s.memoizedState=[e,o],e},useReducer:function(e,o,s){var a=ci();return o=s!==void 0?s(o):o,a.memoizedState=a.baseState=o,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},a.queue=e,e=e.dispatch=Gi.bind(null,N,e),[a.memoizedState,e]},useRef:function(e){var o=ci();return e={current:e},o.memoizedState=e},useState:qi,useDebugValue:Ai,useDeferredValue:function(e){return ci().memoizedState=e},useTransition:function(){var e=qi(!1),o=e[0];return e=Ei.bind(null,e[1]),ci().memoizedState=e,[o,e]},useMutableSource:function(){},useSyncExternalStore:function(e,o,s){var a=N,h=ci();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=o(),R===null)throw Error(p(349));Rh&30||ni(a,o,s)}h.memoizedState=s;var c={value:s,getSnapshot:o};return h.queue=c,vi(ki.bind(null,a,c,e),[e]),a.flags|=2048,li$1(9,mi.bind(null,a,c,s,o),void 0,null),s},useId:function(){var e=ci(),o=R.identifierPrefix;if(I){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,o=":"+o+"R"+s,s=Uh++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=Vh++,o=":"+o+"r"+s.toString(32)+":";return e.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var o=di();return Di(o,O.memoizedState,e)},useTransition:function(){var e=fi(ei)[0],o=di().memoizedState;return[e,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(e){var o=di();return O===null?o.memoizedState=e:Di(o,O.memoizedState,e)},useTransition:function(){var e=gi(ei)[0],o=di().memoizedState;return[e,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(e,o){try{var s="",a=o;do s+=Pa(a),a=a.return;while(a);var h=s}catch(c){h=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:o,stack:h,digest:null}}function Li(e,o,s){return{value:e,source:null,stack:s??null,digest:o??null}}function Mi(e,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(e,o,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var a=o.value;return s.callback=function(){Pi||(Pi=!0,Qi=a),Mi(e,o)},s}function Ri(e,o,s){s=ch(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var h=o.value;s.payload=function(){return a(h)},s.callback=function(){Mi(e,o)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Mi(e,o),typeof a!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var d=o.stack;this.componentDidCatch(o.value,{componentStack:d!==null?d:""})}),s}function Ti(e,o,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Ni;var h=new Set;a.set(o,h)}else h=a.get(o),h===void 0&&(h=new Set,a.set(o,h));h.has(s)||(h.add(s),e=Ui.bind(null,e,o,s),o.then(e,e))}function Vi(e){do{var o;if((o=e.tag===13)&&(o=e.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return e;e=e.return}while(e!==null);return null}function Wi(e,o,s,a,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===o?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=ch(-1,1),o.tag=2,dh(s,o,1))),s.lanes|=1),e)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(e,o,s,a){o.child=e===null?Ch(o,null,s,a):Bh(o,e.child,s,a)}function Zi(e,o,s,a,h){s=s.render;var c=o.ref;return Tg(o,h),a=Xh(e,o,s,a,c,h),s=bi(),e!==null&&!Ug?(o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~h,$i(e,o,h)):(I&&s&&vg(o),o.flags|=1,Yi(e,o,a,h),o.child)}function aj(e,o,s,a,h){if(e===null){var c=s.type;return typeof c=="function"&&!bj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=c,cj(e,o,c,a,h)):(e=yh(s.type,null,a,o,o.mode,h),e.ref=o.ref,e.return=o,o.child=e)}if(c=e.child,!(e.lanes&h)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(d,a)&&e.ref===o.ref)return $i(e,o,h)}return o.flags|=1,e=wh(c,a),e.ref=o.ref,e.return=o,o.child=e}function cj(e,o,s,a,h){if(e!==null){var c=e.memoizedProps;if(Ie(c,a)&&e.ref===o.ref)if(Ug=!1,o.pendingProps=a=c,(e.lanes&h)!==0)e.flags&131072&&(Ug=!0);else return o.lanes=e.lanes,$i(e,o,h)}return dj(e,o,s,a,h)}function ej(e,o,s){var a=o.pendingProps,h=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=s;else{if(!(s&1073741824))return e=c!==null?c.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:e,cachePool:null,transitions:null},o.updateQueue=null,G(fj,gj),gj|=e,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:s,G(fj,gj),gj|=a}else c!==null?(a=c.baseLanes|s,o.memoizedState=null):a=s,G(fj,gj),gj|=a;return Yi(e,o,h,s),o.child}function hj(e,o){var s=o.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function dj(e,o,s,a,h){var c=Zf(s)?Xf:H.current;return c=Yf(o,c),Tg(o,h),s=Xh(e,o,s,a,c,h),a=bi(),e!==null&&!Ug?(o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~h,$i(e,o,h)):(I&&a&&vg(o),o.flags|=1,Yi(e,o,s,h),o.child)}function ij(e,o,s,a,h){if(Zf(s)){var c=!0;cg(o)}else c=!1;if(Tg(o,h),o.stateNode===null)jj(e,o),ph(o,s,a),rh(o,s,a,h),a=!0;else if(e===null){var d=o.stateNode,g=o.memoizedProps;d.props=g;var b=d.context,_=s.contextType;typeof _=="object"&&_!==null?_=Vg(_):(_=Zf(s)?Xf:H.current,_=Yf(o,_));var $=s.getDerivedStateFromProps,j=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function";j||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==a||b!==_)&&qh(o,d,a,_),$g=!1;var _e=o.memoizedState;d.state=_e,gh(o,a,d,h),b=o.memoizedState,g!==a||_e!==b||Wf.current||$g?(typeof $=="function"&&(kh(o,s,$,a),b=o.memoizedState),(g=$g||oh(o,s,g,a,_e,b,_))?(j||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(o.flags|=4194308)):(typeof d.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=a,o.memoizedState=b),d.props=a,d.state=b,d.context=_,a=g):(typeof d.componentDidMount=="function"&&(o.flags|=4194308),a=!1)}else{d=o.stateNode,bh(e,o),g=o.memoizedProps,_=o.type===o.elementType?g:Lg(o.type,g),d.props=_,j=o.pendingProps,_e=d.context,b=s.contextType,typeof b=="object"&&b!==null?b=Vg(b):(b=Zf(s)?Xf:H.current,b=Yf(o,b));var et=s.getDerivedStateFromProps;($=typeof et=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==j||_e!==b)&&qh(o,d,a,b),$g=!1,_e=o.memoizedState,d.state=_e,gh(o,a,d,h);var nt=o.memoizedState;g!==j||_e!==nt||Wf.current||$g?(typeof et=="function"&&(kh(o,s,et,a),nt=o.memoizedState),(_=$g||oh(o,s,_,a,_e,nt,b)||!1)?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,nt,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,nt,b)),typeof d.componentDidUpdate=="function"&&(o.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&_e===e.memoizedState||(o.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&_e===e.memoizedState||(o.flags|=1024),o.memoizedProps=a,o.memoizedState=nt),d.props=a,d.state=nt,d.context=b,a=_):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&_e===e.memoizedState||(o.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&_e===e.memoizedState||(o.flags|=1024),a=!1)}return kj(e,o,s,a,c,h)}function kj(e,o,s,a,h,c){hj(e,o);var d=(o.flags&128)!==0;if(!a&&!d)return h&&dg(o,s,!1),$i(e,o,c);a=o.stateNode,Xi.current=o;var g=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return o.flags|=1,e!==null&&d?(o.child=Bh(o,e.child,null,c),o.child=Bh(o,null,g,c)):Yi(e,o,g,c),o.memoizedState=a.state,h&&dg(o,s,!0),o.child}function lj(e){var o=e.stateNode;o.pendingContext?ag(e,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(e,o.context,!1),Ih(e,o.containerInfo)}function mj(e,o,s,a,h){return Ig(),Jg(h),o.flags|=256,Yi(e,o,s,a),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj(e,o,s){var a=o.pendingProps,h=M.current,c=!1,d=(o.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(h&2)!==0),g?(c=!0,o.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),G(M,h&1),e===null)return Eg(o),e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(o.mode&1?e.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(d=a.children,e=a.fallback,c?(a=o.mode,c=o.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=qj(d,a,0,null),e=Ah(e,a,s,null),c.return=o,e.return=o,c.sibling=e,o.child=c,o.child.memoizedState=oj(s),o.memoizedState=nj,e):rj(o,d));if(h=e.memoizedState,h!==null&&(g=h.dehydrated,g!==null))return sj(e,o,d,a,g,h,s);if(c){c=a.fallback,d=o.mode,h=e.child,g=h.sibling;var b={mode:"hidden",children:a.children};return!(d&1)&&o.child!==h?(a=o.child,a.childLanes=0,a.pendingProps=b,o.deletions=null):(a=wh(h,b),a.subtreeFlags=h.subtreeFlags&14680064),g!==null?c=wh(g,c):(c=Ah(c,d,s,null),c.flags|=2),c.return=o,a.return=o,a.sibling=c,o.child=a,a=c,c=o.child,d=e.child.memoizedState,d=d===null?oj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~s,o.memoizedState=nj,a}return c=e.child,e=c.sibling,a=wh(c,{mode:"visible",children:a.children}),!(o.mode&1)&&(a.lanes=s),a.return=o,a.sibling=null,e!==null&&(s=o.deletions,s===null?(o.deletions=[e],o.flags|=16):s.push(e)),o.child=a,o.memoizedState=null,a}function rj(e,o){return o=qj({mode:"visible",children:o},e.mode,0,null),o.return=e,e.child=o}function tj(e,o,s,a){return a!==null&&Jg(a),Bh(o,e.child,null,s),e=rj(o,o.pendingProps.children),e.flags|=2,o.memoizedState=null,e}function sj(e,o,s,a,h,c,d){if(s)return o.flags&256?(o.flags&=-257,a=Li(Error(p(422))),tj(e,o,d,a)):o.memoizedState!==null?(o.child=e.child,o.flags|=128,null):(c=a.fallback,h=o.mode,a=qj({mode:"visible",children:a.children},h,0,null),c=Ah(c,h,d,null),c.flags|=2,a.return=o,c.return=o,a.sibling=c,o.child=a,o.mode&1&&Bh(o,e.child,null,d),o.child.memoizedState=oj(d),o.memoizedState=nj,c);if(!(o.mode&1))return tj(e,o,d,null);if(h.data==="$!"){if(a=h.nextSibling&&h.nextSibling.dataset,a)var g=a.dgst;return a=g,c=Error(p(419)),a=Li(c,a,void 0),tj(e,o,d,a)}if(g=(d&e.childLanes)!==0,Ug||g){if(a=R,a!==null){switch(d&-d){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(a.suspendedLanes|d)?0:h,h!==0&&h!==c.retryLane&&(c.retryLane=h,Zg(e,h),mh(a,e,h,-1))}return uj(),a=Li(Error(p(421))),tj(e,o,d,a)}return h.data==="$?"?(o.flags|=128,o.child=e.child,o=vj.bind(null,e),h._reactRetry=o,null):(e=c.treeContext,yg=Lf(h.nextSibling),xg=o,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=o),o=rj(o,a.children),o.flags|=4096,o)}function wj(e,o,s){e.lanes|=o;var a=e.alternate;a!==null&&(a.lanes|=o),Sg(e.return,o,s)}function xj(e,o,s,a,h){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:h}:(c.isBackwards=o,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=s,c.tailMode=h)}function yj(e,o,s){var a=o.pendingProps,h=a.revealOrder,c=a.tail;if(Yi(e,o,a.children,s),a=M.current,a&2)a=a&1|2,o.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=o.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj(e,s,o);else if(e.tag===19)wj(e,s,o);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break e;for(;e.sibling===null;){if(e.return===null||e.return===o)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(M,a),!(o.mode&1))o.memoizedState=null;else switch(h){case"forwards":for(s=o.child,h=null;s!==null;)e=s.alternate,e!==null&&Mh(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=o.child,o.child=null):(h=s.sibling,s.sibling=null),xj(o,!1,h,s,c);break;case"backwards":for(s=null,h=o.child,o.child=null;h!==null;){if(e=h.alternate,e!==null&&Mh(e)===null){o.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}xj(o,!0,s,null,c);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(e,o){!(o.mode&1)&&e!==null&&(e.alternate=null,o.alternate=null,o.flags|=2)}function $i(e,o,s){if(e!==null&&(o.dependencies=e.dependencies),hh|=o.lanes,!(s&o.childLanes))return null;if(e!==null&&o.child!==e.child)throw Error(p(153));if(o.child!==null){for(e=o.child,s=wh(e,e.pendingProps),o.child=s,s.return=o;e.sibling!==null;)e=e.sibling,s=s.sibling=wh(e,e.pendingProps),s.return=o;s.sibling=null}return o.child}function zj(e,o,s){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var a=o.type._context,h=o.memoizedProps.value;G(Mg,a._currentValue),a._currentValue=h;break;case 13:if(a=o.memoizedState,a!==null)return a.dehydrated!==null?(G(M,M.current&1),o.flags|=128,null):s&o.child.childLanes?pj(e,o,s):(G(M,M.current&1),e=$i(e,o,s),e!==null?e.sibling:null);G(M,M.current&1);break;case 19:if(a=(s&o.childLanes)!==0,e.flags&128){if(a)return yj(e,o,s);o.flags|=128}if(h=o.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(M,M.current),a)break;return null;case 22:case 23:return o.lanes=0,ej(e,o,s)}return $i(e,o,s)}var Aj,Bj,Cj,Dj;Aj=function(e,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(e,o,s,a){var h=e.memoizedProps;if(h!==a){e=o.stateNode,Hh(Eh.current);var c=null;switch(s){case"input":h=Ya(e,h),a=Ya(e,a),c=[];break;case"select":h=A({},h,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":h=gb(e,h),a=gb(e,a),c=[];break;default:typeof h.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(s,a);var d;s=null;for(_ in h)if(!a.hasOwnProperty(_)&&h.hasOwnProperty(_)&&h[_]!=null)if(_==="style"){var g=h[_];for(d in g)g.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in a){var b=a[_];if(g=h!=null?h[_]:void 0,a.hasOwnProperty(_)&&b!==g&&(b!=null||g!=null))if(_==="style")if(g){for(d in g)!g.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in b)b.hasOwnProperty(d)&&g[d]!==b[d]&&(s||(s={}),s[d]=b[d])}else s||(c||(c=[]),c.push(_,s)),s=b;else _==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,g=g?g.__html:void 0,b!=null&&g!==b&&(c=c||[]).push(_,b)):_==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(_,""+b):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_)?(b!=null&&_==="onScroll"&&D("scroll",e),c||g===b||(c=[])):(c=c||[]).push(_,b))}s&&(c=c||[]).push("style",s);var _=c;(o.updateQueue=_)&&(o.flags|=4)}};Dj=function(e,o,s,a){s!==a&&(o.flags|=4)};function Ej(e,o){if(!I)switch(e.tailMode){case"hidden":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?o||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var o=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(o)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,a|=h.subtreeFlags&14680064,a|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=a,e.childLanes=s,o}function Fj(e,o,s){var a=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return a=o.stateNode,Jh(),E(Wf),E(H),Oh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(o)?o.flags|=4:e===null||e.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(e,o),S(o),null;case 5:Lh(o);var h=Hh(Gh.current);if(s=o.type,e!==null&&o.stateNode!=null)Cj(e,o,s,a,h),e.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!a){if(o.stateNode===null)throw Error(p(166));return S(o),null}if(e=Hh(Eh.current),Gg(o)){a=o.stateNode,s=o.type;var c=o.memoizedProps;switch(a[Of]=o,a[Pf]=c,e=(o.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(h=0;h<lf.length;h++)D(lf[h],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(s,c),h=null;for(var d in c)if(c.hasOwnProperty(d)){var g=c[d];d==="children"?typeof g=="string"?a.textContent!==g&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,g,e),h=["children",g]):typeof g=="number"&&a.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,g,e),h=["children",""+g]):ea.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&D("scroll",a)}switch(s){case"input":Va(a),db(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=h,o.updateQueue=a,a!==null&&(o.flags|=4)}else{d=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(s,{is:a.is}):(e=d.createElement(s),s==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,s),e[Of]=o,e[Pf]=a,Aj(e,o,!1,!1),o.stateNode=e;e:{switch(d=vb(s,a),s){case"dialog":D("cancel",e),D("close",e),h=a;break;case"iframe":case"object":case"embed":D("load",e),h=a;break;case"video":case"audio":for(h=0;h<lf.length;h++)D(lf[h],e);h=a;break;case"source":D("error",e),h=a;break;case"img":case"image":case"link":D("error",e),D("load",e),h=a;break;case"details":D("toggle",e),h=a;break;case"input":Za(e,a),h=Ya(e,a),D("invalid",e);break;case"option":h=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},h=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,a),h=gb(e,a),D("invalid",e);break;default:h=a}ub(s,h),g=h;for(c in g)if(g.hasOwnProperty(c)){var b=g[c];c==="style"?sb(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nb(e,b)):c==="children"?typeof b=="string"?(s!=="textarea"||b!=="")&&ob(e,b):typeof b=="number"&&ob(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?b!=null&&c==="onScroll"&&D("scroll",e):b!=null&&ta(e,c,b,d))}switch(s){case"input":Va(e),db(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?fb(e,!!a.multiple,c,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(e&&o.stateNode!=null)Dj(e,o,e.memoizedProps,a);else{if(typeof a!="string"&&o.stateNode===null)throw Error(p(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(a=o.stateNode,s=o.memoizedProps,a[Of]=o,(c=a.nodeValue!==s)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(e.mode&1)!==0)}c&&(o.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=o,o.stateNode=a}return S(o),null;case 13:if(E(M),a=o.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,c=!1;else if(c=Gg(o),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=o.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),c=!1}else zg!==null&&(Gj(zg),zg=null),c=!0;if(!c)return o.flags&65536?o:null}return o.flags&128?(o.lanes=s,o):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(o.child.flags|=8192,o.mode&1&&(e===null||M.current&1?T===0&&(T=3):uj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return Jh(),Bj(e,o),e===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return Rg(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E(M),c=o.memoizedState,c===null)return S(o),null;if(a=(o.flags&128)!==0,d=c.rendering,d===null)if(a)Ej(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=o.child;e!==null;){if(d=Mh(e),d!==null){for(o.flags|=128,Ej(c,!1),a=d.updateQueue,a!==null&&(o.updateQueue=a,o.flags|=4),o.subtreeFlags=0,a=s,s=o.child;s!==null;)c=s,e=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return G(M,M.current&1|2),o.child}e=e.sibling}c.tail!==null&&B()>Hj&&(o.flags|=128,a=!0,Ej(c,!1),o.lanes=4194304)}else{if(!a)if(e=Mh(d),e!==null){if(o.flags|=128,a=!0,s=e.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),Ej(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(o),null}else 2*B()-c.renderingStartTime>Hj&&s!==1073741824&&(o.flags|=128,a=!0,Ej(c,!1),o.lanes=4194304);c.isBackwards?(d.sibling=o.child,o.child=d):(s=c.last,s!==null?s.sibling=d:o.child=d,c.last=d)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.renderingStartTime=B(),o.sibling=null,s=M.current,G(M,a?s&1|2:s&1),o):(S(o),null);case 22:case 23:return Ij(),a=o.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(o.flags|=8192),a&&o.mode&1?gj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p(156,o.tag))}function Jj(e,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 3:return Jh(),E(Wf),E(H),Oh(),e=o.flags,e&65536&&!(e&128)?(o.flags=e&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E(M),e=o.memoizedState,e!==null&&e.dehydrated!==null){if(o.alternate===null)throw Error(p(340));Ig()}return e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(e,o){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(e,o,a)}else s.current=null}function Nj(e,o,s){try{s()}catch(a){W(e,o,a)}}var Oj=!1;function Pj(e,o){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var h=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,g=-1,b=-1,_=0,$=0,j=e,_e=null;t:for(;;){for(var et;j!==s||h!==0&&j.nodeType!==3||(g=d+h),j!==c||a!==0&&j.nodeType!==3||(b=d+a),j.nodeType===3&&(d+=j.nodeValue.length),(et=j.firstChild)!==null;)_e=j,j=et;for(;;){if(j===e)break t;if(_e===s&&++_===h&&(g=d),_e===c&&++$===a&&(b=d),(et=j.nextSibling)!==null)break;j=_e,_e=j.parentNode}j=et}s=g===-1||b===-1?null:{start:g,end:b}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:e,selectionRange:s},dd=!1,V=o;V!==null;)if(o=V,e=o.child,(o.subtreeFlags&1028)!==0&&e!==null)e.return=o,V=e;else for(;V!==null;){o=V;try{var nt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var it=nt.memoizedProps,lt=nt.memoizedState,tt=o.stateNode,st=tt.getSnapshotBeforeUpdate(o.elementType===o.type?it:Lg(o.type,it),lt);tt.__reactInternalSnapshotBeforeUpdate=st}break;case 3:var rt=o.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ot){W(o,o.return,ot)}if(e=o.sibling,e!==null){e.return=o.return,V=e;break}V=o.return}return nt=Oj,Oj=!1,nt}function Qj(e,o,s){var a=o.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&e)===e){var c=h.destroy;h.destroy=void 0,c!==void 0&&Nj(o,s,c)}h=h.next}while(h!==a)}}function Rj(e,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==o)}}function Sj(e){var o=e.ref;if(o!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof o=="function"?o(e):o.current=e}}function Tj(e){var o=e.alternate;o!==null&&(e.alternate=null,Tj(o)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(o=e.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj(e){return e.tag===5||e.tag===3||e.tag===4}function Vj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj(e,o,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(e,o):s.insertBefore(e,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(e,s)):(o=s,o.appendChild(e)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Wj(e,o,s),e=e.sibling;e!==null;)Wj(e,o,s),e=e.sibling}function Xj(e,o,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,o?s.insertBefore(e,o):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Xj(e,o,s),e=e.sibling;e!==null;)Xj(e,o,s),e=e.sibling}var X=null,Yj=!1;function Zj(e,o,s){for(s=s.child;s!==null;)ak(e,o,s),s=s.sibling}function ak(e,o,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Mj(s,o);case 6:var a=X,h=Yj;X=null,Zj(e,o,s),X=a,Yj=h,X!==null&&(Yj?(e=X,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Yj?(e=X,s=s.stateNode,e.nodeType===8?Kf(e.parentNode,s):e.nodeType===1&&Kf(e,s),bd(e)):Kf(X,s.stateNode));break;case 4:a=X,h=Yj,X=s.stateNode.containerInfo,Yj=!0,Zj(e,o,s),X=a,Yj=h;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){h=a=a.next;do{var c=h,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Nj(s,o,d),h=h.next}while(h!==a)}Zj(e,o,s);break;case 1:if(!U&&(Mj(s,o),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(g){W(s,o,g)}Zj(e,o,s);break;case 21:Zj(e,o,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Zj(e,o,s),U=a):Zj(e,o,s);break;default:Zj(e,o,s)}}function bk(e){var o=e.updateQueue;if(o!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Lj),o.forEach(function(a){var h=ck.bind(null,e,a);s.has(a)||(s.add(a),a.then(h,h))})}}function dk(e,o){var s=o.deletions;if(s!==null)for(var a=0;a<s.length;a++){var h=s[a];try{var c=e,d=o,g=d;e:for(;g!==null;){switch(g.tag){case 5:X=g.stateNode,Yj=!1;break e;case 3:X=g.stateNode.containerInfo,Yj=!0;break e;case 4:X=g.stateNode.containerInfo,Yj=!0;break e}g=g.return}if(X===null)throw Error(p(160));ak(c,d,h),X=null,Yj=!1;var b=h.alternate;b!==null&&(b.return=null),h.return=null}catch(_){W(h,o,_)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,e),o=o.sibling}function ek(e,o){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk(o,e),fk(e),a&4){try{Qj(3,e,e.return),Rj(3,e)}catch(it){W(e,e.return,it)}try{Qj(5,e,e.return)}catch(it){W(e,e.return,it)}}break;case 1:dk(o,e),fk(e),a&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(o,e),fk(e),a&512&&s!==null&&Mj(s,s.return),e.flags&32){var h=e.stateNode;try{ob(h,"")}catch(it){W(e,e.return,it)}}if(a&4&&(h=e.stateNode,h!=null)){var c=e.memoizedProps,d=s!==null?s.memoizedProps:c,g=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&ab(h,c),vb(g,d);var _=vb(g,c);for(d=0;d<b.length;d+=2){var $=b[d],j=b[d+1];$==="style"?sb(h,j):$==="dangerouslySetInnerHTML"?nb(h,j):$==="children"?ob(h,j):ta(h,$,j,_)}switch(g){case"input":bb(h,c);break;case"textarea":ib(h,c);break;case"select":var _e=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!c.multiple;var et=c.value;et!=null?fb(h,!!c.multiple,et,!1):_e!==!!c.multiple&&(c.defaultValue!=null?fb(h,!!c.multiple,c.defaultValue,!0):fb(h,!!c.multiple,c.multiple?[]:"",!1))}h[Pf]=c}catch(it){W(e,e.return,it)}}break;case 6:if(dk(o,e),fk(e),a&4){if(e.stateNode===null)throw Error(p(162));h=e.stateNode,c=e.memoizedProps;try{h.nodeValue=c}catch(it){W(e,e.return,it)}}break;case 3:if(dk(o,e),fk(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(it){W(e,e.return,it)}break;case 4:dk(o,e),fk(e);break;case 13:dk(o,e),fk(e),h=e.child,h.flags&8192&&(c=h.memoizedState!==null,h.stateNode.isHidden=c,!c||h.alternate!==null&&h.alternate.memoizedState!==null||(gk=B())),a&4&&bk(e);break;case 22:if($=s!==null&&s.memoizedState!==null,e.mode&1?(U=(_=U)||$,dk(o,e),U=_):dk(o,e),fk(e),a&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!$&&e.mode&1)for(V=e,$=e.child;$!==null;){for(j=V=$;V!==null;){switch(_e=V,et=_e.child,_e.tag){case 0:case 11:case 14:case 15:Qj(4,_e,_e.return);break;case 1:Mj(_e,_e.return);var nt=_e.stateNode;if(typeof nt.componentWillUnmount=="function"){a=_e,s=_e.return;try{o=a,nt.props=o.memoizedProps,nt.state=o.memoizedState,nt.componentWillUnmount()}catch(it){W(a,s,it)}}break;case 5:Mj(_e,_e.return);break;case 22:if(_e.memoizedState!==null){hk(j);continue}}et!==null?(et.return=_e,V=et):hk(j)}$=$.sibling}e:for($=null,j=e;;){if(j.tag===5){if($===null){$=j;try{h=j.stateNode,_?(c=h.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=j.stateNode,b=j.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,g.style.display=rb("display",d))}catch(it){W(e,e.return,it)}}}else if(j.tag===6){if($===null)try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(it){W(e,e.return,it)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;$===j&&($=null),j=j.return}$===j&&($=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:dk(o,e),fk(e),a&4&&bk(e);break;case 21:break;default:dk(o,e),fk(e)}}function fk(e){var o=e.flags;if(o&2){try{e:{for(var s=e.return;s!==null;){if(Uj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var h=a.stateNode;a.flags&32&&(ob(h,""),a.flags&=-33);var c=Vj(e);Xj(e,c,h);break;case 3:case 4:var d=a.stateNode.containerInfo,g=Vj(e);Wj(e,g,d);break;default:throw Error(p(161))}}catch(b){W(e,e.return,b)}e.flags&=-3}o&4096&&(e.flags&=-4097)}function ik(e,o,s){V=e,jk(e)}function jk(e,o,s){for(var a=(e.mode&1)!==0;V!==null;){var h=V,c=h.child;if(h.tag===22&&a){var d=h.memoizedState!==null||Kj;if(!d){var g=h.alternate,b=g!==null&&g.memoizedState!==null||U;g=Kj;var _=U;if(Kj=d,(U=b)&&!_)for(V=h;V!==null;)d=V,b=d.child,d.tag===22&&d.memoizedState!==null?kk(h):b!==null?(b.return=d,V=b):kk(h);for(;c!==null;)V=c,jk(c),c=c.sibling;V=h,Kj=g,U=_}lk(e)}else h.subtreeFlags&8772&&c!==null?(c.return=h,V=c):lk(e)}}function lk(e){for(;V!==null;){var o=V;if(o.flags&8772){var s=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var a=o.stateNode;if(o.flags&4&&!U)if(s===null)a.componentDidMount();else{var h=o.elementType===o.type?s.memoizedProps:Lg(o.type,s.memoizedProps);a.componentDidUpdate(h,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=o.updateQueue;c!==null&&ih(o,c,a);break;case 3:var d=o.updateQueue;if(d!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}ih(o,d,s)}break;case 5:var g=o.stateNode;if(s===null&&o.flags&4){s=g;var b=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&s.focus();break;case"img":b.src&&(s.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _=o.alternate;if(_!==null){var $=_.memoizedState;if($!==null){var j=$.dehydrated;j!==null&&bd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||o.flags&512&&Sj(o)}catch(_e){W(o,o.return,_e)}}if(o===e){V=null;break}if(s=o.sibling,s!==null){s.return=o.return,V=s;break}V=o.return}}function hk(e){for(;V!==null;){var o=V;if(o===e){V=null;break}var s=o.sibling;if(s!==null){s.return=o.return,V=s;break}V=o.return}}function kk(e){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Rj(4,o)}catch(b){W(o,s,b)}break;case 1:var a=o.stateNode;if(typeof a.componentDidMount=="function"){var h=o.return;try{a.componentDidMount()}catch(b){W(o,h,b)}}var c=o.return;try{Sj(o)}catch(b){W(o,c,b)}break;case 5:var d=o.return;try{Sj(o)}catch(b){W(o,d,b)}}}catch(b){W(o,o.return,b)}if(o===e){V=null;break}var g=o.sibling;if(g!==null){g.return=o.return,V=g;break}V=o.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function mh(e,o,s,a){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(e,s,a),(!(K&2)||e!==R)&&(e===R&&(!(K&2)&&(rk|=s),T===4&&Dk(e,Z)),Ek(e,a),s===1&&K===0&&!(o.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(e,o){var s=e.callbackNode;wc(e,o);var a=uc(e,e===R?Z:0);if(a===0)s!==null&&bc(s),e.callbackNode=null,e.callbackPriority=0;else if(o=a&-a,e.callbackPriority!==o){if(s!=null&&bc(s),o===1)e.tag===0?ig(Fk.bind(null,e)):hg(Fk.bind(null,e)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Gk(s,Hk.bind(null,e))}e.callbackPriority=o,e.callbackNode=s}}function Hk(e,o){if(Bk=-1,Ck=0,K&6)throw Error(p(327));var s=e.callbackNode;if(Ik()&&e.callbackNode!==s)return null;var a=uc(e,e===R?Z:0);if(a===0)return null;if(a&30||a&e.expiredLanes||o)o=Jk(e,a);else{o=a;var h=K;K|=2;var c=Kk();(R!==e||Z!==o)&&(vk=null,Hj=B()+500,Lk(e,o));do try{Mk();break}catch(g){Nk(e,g)}while(1);Qg(),nk.current=c,K=h,Y!==null?o=0:(R=null,Z=0,o=T)}if(o!==0){if(o===2&&(h=xc(e),h!==0&&(a=h,o=Ok(e,h))),o===1)throw s=qk,Lk(e,0),Dk(e,a),Ek(e,B()),s;if(o===6)Dk(e,a);else{if(h=e.current.alternate,!(a&30)&&!Pk(h)&&(o=Jk(e,a),o===2&&(c=xc(e),c!==0&&(a=c,o=Ok(e,c))),o===1))throw s=qk,Lk(e,0),Dk(e,a),Ek(e,B()),s;switch(e.finishedWork=h,e.finishedLanes=a,o){case 0:case 1:throw Error(p(345));case 2:Qk(e,uk,vk);break;case 3:if(Dk(e,a),(a&130023424)===a&&(o=gk+500-B(),10<o)){if(uc(e,0)!==0)break;if(h=e.suspendedLanes,(h&a)!==a){L(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),o);break}Qk(e,uk,vk);break;case 4:if(Dk(e,a),(a&4194240)===a)break;for(o=e.eventTimes,h=-1;0<a;){var d=31-oc(a);c=1<<d,d=o[d],d>h&&(h=d),a&=~c}if(a=h,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*mk(a/1960))-a,10<a){e.timeoutHandle=Ff(Qk.bind(null,e,uk,vk),a);break}Qk(e,uk,vk);break;case 5:Qk(e,uk,vk);break;default:throw Error(p(329))}}}return Ek(e,B()),e.callbackNode===s?Hk.bind(null,e):null}function Ok(e,o){var s=tk;return e.current.memoizedState.isDehydrated&&(Lk(e,o).flags|=256),e=Jk(e,o),e!==2&&(o=uk,uk=s,o!==null&&Gj(o)),e}function Gj(e){uk===null?uk=e:uk.push.apply(uk,e)}function Pk(e){for(var o=e;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var h=s[a],c=h.getSnapshot;h=h.value;try{if(!He(c(),h))return!1}catch{return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(e,o){for(o&=~sk,o&=~rk,e.suspendedLanes|=o,e.pingedLanes&=~o,e=e.expirationTimes;0<o;){var s=31-oc(o),a=1<<s;e[s]=-1,o&=~a}}function Fk(e){if(K&6)throw Error(p(327));Ik();var o=uc(e,0);if(!(o&1))return Ek(e,B()),null;var s=Jk(e,o);if(e.tag!==0&&s===2){var a=xc(e);a!==0&&(o=a,s=Ok(e,a))}if(s===1)throw s=qk,Lk(e,0),Dk(e,o),Ek(e,B()),s;if(s===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=o,Qk(e,uk,vk),Ek(e,B()),null}function Rk(e,o){var s=K;K|=1;try{return e(o)}finally{K=s,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(e){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var o=K;K|=1;var s=pk.transition,a=C;try{if(pk.transition=null,C=1,e)return e()}finally{C=a,pk.transition=s,K=o,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(e,o){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(a);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(a.type._context);break;case 22:case 23:Ij()}s=s.return}if(R=e,Y=e=wh(e.current,null),Z=gj=o,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(s=Wg[o],a=s.interleaved,a!==null){s.interleaved=null;var h=a.next,c=s.pending;if(c!==null){var d=c.next;c.next=h,a.next=d}s.pending=a}Wg=null}return e}function Nk(e,o){do{var s=Y;try{if(Qg(),Ph.current=ai,Sh){for(var a=N.memoizedState;a!==null;){var h=a.queue;h!==null&&(h.pending=null),a=a.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T=1,qk=o,Y=null;break}e:{var c=e,d=s.return,g=s,b=o;if(o=Z,g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var _=b,$=g,j=$.tag;if(!($.mode&1)&&(j===0||j===11||j===15)){var _e=$.alternate;_e?($.updateQueue=_e.updateQueue,$.memoizedState=_e.memoizedState,$.lanes=_e.lanes):($.updateQueue=null,$.memoizedState=null)}var et=Vi(d);if(et!==null){et.flags&=-257,Wi(et,d,g,c,o),et.mode&1&&Ti(c,_,o),o=et,b=_;var nt=o.updateQueue;if(nt===null){var it=new Set;it.add(b),o.updateQueue=it}else nt.add(b);break e}else{if(!(o&1)){Ti(c,_,o),uj();break e}b=Error(p(426))}}else if(I&&g.mode&1){var lt=Vi(d);if(lt!==null){!(lt.flags&65536)&&(lt.flags|=256),Wi(lt,d,g,c,o),Jg(Ki(b,g));break e}}c=b=Ki(b,g),T!==4&&(T=2),tk===null?tk=[c]:tk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,o&=-o,c.lanes|=o;var tt=Oi(c,b,o);fh(c,tt);break e;case 1:g=b;var st=c.type,rt=c.stateNode;if(!(c.flags&128)&&(typeof st.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(Si===null||!Si.has(rt)))){c.flags|=65536,o&=-o,c.lanes|=o;var ot=Ri(c,g,o);fh(c,ot);break e}}c=c.return}while(c!==null)}Tk(s)}catch(ut){o=ut,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(1)}function Kk(){var e=nk.current;return nk.current=ai,e===null?ai:e}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(e,o){var s=K;K|=2;var a=Kk();(R!==e||Z!==o)&&(vk=null,Lk(e,o));do try{Uk();break}catch(h){Nk(e,h)}while(1);if(Qg(),K=s,nk.current=a,Y!==null)throw Error(p(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(e){var o=Wk(e.alternate,e,gj);e.memoizedProps=e.pendingProps,o===null?Tk(e):Y=o,ok.current=null}function Tk(e){var o=e;do{var s=o.alternate;if(e=o.return,o.flags&32768){if(s=Jj(s,o),s!==null){s.flags&=32767,Y=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(s=Fj(s,o,gj),s!==null){Y=s;return}if(o=o.sibling,o!==null){Y=o;return}Y=o=e}while(o!==null);T===0&&(T=5)}function Qk(e,o,s){var a=C,h=pk.transition;try{pk.transition=null,C=1,Xk(e,o,s,a)}finally{pk.transition=h,C=a}return null}function Xk(e,o,s,a){do Ik();while(xk!==null);if(K&6)throw Error(p(327));s=e.finishedWork;var h=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc(e,c),e===R&&(Y=R=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=pk.transition,pk.transition=null;var d=C;C=1;var g=K;K|=4,ok.current=null,Pj(e,s),ek(s,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=s,ik(s),dc(),K=g,C=d,pk.transition=c}else e.current=s;if(wk&&(wk=!1,xk=e,yk=h),c=e.pendingLanes,c===0&&(Si=null),mc(s.stateNode),Ek(e,B()),o!==null)for(a=e.onRecoverableError,s=0;s<o.length;s++)h=o[s],a(h.value,{componentStack:h.stack,digest:h.digest});if(Pi)throw Pi=!1,e=Qi,Qi=null,e;return yk&1&&e.tag!==0&&Ik(),c=e.pendingLanes,c&1?e===Ak?zk++:(zk=0,Ak=e):zk=0,jg(),null}function Ik(){if(xk!==null){var e=Dc(yk),o=pk.transition,s=C;try{if(pk.transition=null,C=16>e?16:e,xk===null)var a=!1;else{if(e=xk,xk=null,yk=0,K&6)throw Error(p(331));var h=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var g=c.deletions;if(g!==null){for(var b=0;b<g.length;b++){var _=g[b];for(V=_;V!==null;){var $=V;switch($.tag){case 0:case 11:case 15:Qj(8,$,c)}var j=$.child;if(j!==null)j.return=$,V=j;else for(;V!==null;){$=V;var _e=$.sibling,et=$.return;if(Tj($),$===_){V=null;break}if(_e!==null){_e.return=et,V=_e;break}V=et}}}var nt=c.alternate;if(nt!==null){var it=nt.child;if(it!==null){nt.child=null;do{var lt=it.sibling;it.sibling=null,it=lt}while(it!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj(9,c,c.return)}var tt=c.sibling;if(tt!==null){tt.return=c.return,V=tt;break e}V=c.return}}var st=e.current;for(V=st;V!==null;){d=V;var rt=d.child;if(d.subtreeFlags&2064&&rt!==null)rt.return=d,V=rt;else e:for(d=st;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Rj(9,g)}}catch(ut){W(g,g.return,ut)}if(g===d){V=null;break e}var ot=g.sibling;if(ot!==null){ot.return=g.return,V=ot;break e}V=g.return}}if(K=h,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C=s,pk.transition=o}}return!1}function Yk(e,o,s){o=Ki(s,o),o=Oi(e,o,1),e=dh(e,o,1),o=L(),e!==null&&(Ac(e,1,o),Ek(e,o))}function W(e,o,s){if(e.tag===3)Yk(e,e,s);else for(;o!==null;){if(o.tag===3){Yk(o,e,s);break}else if(o.tag===1){var a=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Si===null||!Si.has(a))){e=Ki(s,e),e=Ri(o,e,1),o=dh(o,e,1),e=L(),o!==null&&(Ac(o,1,e),Ek(o,e));break}}o=o.return}}function Ui(e,o,s){var a=e.pingCache;a!==null&&a.delete(o),o=L(),e.pingedLanes|=e.suspendedLanes&s,R===e&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(e,0):sk|=s),Ek(e,o)}function Zk(e,o){o===0&&(e.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var s=L();e=Zg(e,o),e!==null&&(Ac(e,o,s),Ek(e,s))}function vj(e){var o=e.memoizedState,s=0;o!==null&&(s=o.retryLane),Zk(e,s)}function ck(e,o){var s=0;switch(e.tag){case 13:var a=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(o),Zk(e,s)}var Wk;Wk=function(e,o,s){if(e!==null)if(e.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(e.lanes&s)&&!(o.flags&128))return Ug=!1,zj(e,o,s);Ug=!!(e.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var a=o.type;jj(e,o),e=o.pendingProps;var h=Yf(o,H.current);Tg(o,s),h=Xh(null,o,a,e,h,s);var c=bi();return o.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(a)?(c=!0,cg(o)):c=!1,o.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,ah(o),h.updater=nh,o.stateNode=h,h._reactInternals=o,rh(o,a,e,s),o=kj(null,o,a,!0,c,s)):(o.tag=0,I&&c&&vg(o),Yi(null,o,h,s),o=o.child),o;case 16:a=o.elementType;e:{switch(jj(e,o),e=o.pendingProps,h=a._init,a=h(a._payload),o.type=a,h=o.tag=$k(a),e=Lg(a,e),h){case 0:o=dj(null,o,a,e,s);break e;case 1:o=ij(null,o,a,e,s);break e;case 11:o=Zi(null,o,a,e,s);break e;case 14:o=aj(null,o,a,Lg(a.type,e),s);break e}throw Error(p(306,a,""))}return o;case 0:return a=o.type,h=o.pendingProps,h=o.elementType===a?h:Lg(a,h),dj(e,o,a,h,s);case 1:return a=o.type,h=o.pendingProps,h=o.elementType===a?h:Lg(a,h),ij(e,o,a,h,s);case 3:e:{if(lj(o),e===null)throw Error(p(387));a=o.pendingProps,c=o.memoizedState,h=c.element,bh(e,o),gh(o,a,null,s);var d=o.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},o.updateQueue.baseState=c,o.memoizedState=c,o.flags&256){h=Ki(Error(p(423)),o),o=mj(e,o,a,s,h);break e}else if(a!==h){h=Ki(Error(p(424)),o),o=mj(e,o,a,s,h);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,s=Ch(o,null,a,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===h){o=$i(e,o,s);break e}Yi(e,o,a,s)}o=o.child}return o;case 5:return Kh(o),e===null&&Eg(o),a=o.type,h=o.pendingProps,c=e!==null?e.memoizedProps:null,d=h.children,Ef(a,h)?d=null:c!==null&&Ef(a,c)&&(o.flags|=32),hj(e,o),Yi(e,o,d,s),o.child;case 6:return e===null&&Eg(o),null;case 13:return pj(e,o,s);case 4:return Ih(o,o.stateNode.containerInfo),a=o.pendingProps,e===null?o.child=Bh(o,null,a,s):Yi(e,o,a,s),o.child;case 11:return a=o.type,h=o.pendingProps,h=o.elementType===a?h:Lg(a,h),Zi(e,o,a,h,s);case 7:return Yi(e,o,o.pendingProps,s),o.child;case 8:return Yi(e,o,o.pendingProps.children,s),o.child;case 12:return Yi(e,o,o.pendingProps.children,s),o.child;case 10:e:{if(a=o.type._context,h=o.pendingProps,c=o.memoizedProps,d=h.value,G(Mg,a._currentValue),a._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===h.children&&!Wf.current){o=$i(e,o,s);break e}}else for(c=o.child,c!==null&&(c.return=o);c!==null;){var g=c.dependencies;if(g!==null){d=c.child;for(var b=g.firstContext;b!==null;){if(b.context===a){if(c.tag===1){b=ch(-1,s&-s),b.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var $=_.pending;$===null?b.next=b:(b.next=$.next,$.next=b),_.pending=b}}c.lanes|=s,b=c.alternate,b!==null&&(b.lanes|=s),Sg(c.return,s,o),g.lanes|=s;break}b=b.next}}else if(c.tag===10)d=c.type===o.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,g=d.alternate,g!==null&&(g.lanes|=s),Sg(d,s,o),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===o){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Yi(e,o,h.children,s),o=o.child}return o;case 9:return h=o.type,a=o.pendingProps.children,Tg(o,s),h=Vg(h),a=a(h),o.flags|=1,Yi(e,o,a,s),o.child;case 14:return a=o.type,h=Lg(a,o.pendingProps),h=Lg(a.type,h),aj(e,o,a,h,s);case 15:return cj(e,o,o.type,o.pendingProps,s);case 17:return a=o.type,h=o.pendingProps,h=o.elementType===a?h:Lg(a,h),jj(e,o),o.tag=1,Zf(a)?(e=!0,cg(o)):e=!1,Tg(o,s),ph(o,a,h),rh(o,a,h,s),kj(null,o,a,!0,e,s);case 19:return yj(e,o,s);case 22:return ej(e,o,s)}throw Error(p(156,o.tag))};function Gk(e,o){return ac(e,o)}function al(e,o,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,o,s,a){return new al(e,o,s,a)}function bj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k(e){if(typeof e=="function")return bj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function wh(e,o){var s=e.alternate;return s===null?(s=Bg(e.tag,o,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=o,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,o=e.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function yh(e,o,s,a,h,c){var d=2;if(a=e,typeof e=="function")bj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya:return Ah(s.children,h,c,o);case za:d=8,h|=8;break;case Aa:return e=Bg(12,s,o,h|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,s,o,h),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,s,o,h),e.elementType=Fa,e.lanes=c,e;case Ia:return qj(s,h,c,o);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return o=Bg(d,s,o,h),o.elementType=e,o.type=a,o.lanes=c,o}function Ah(e,o,s,a){return e=Bg(7,e,a,o),e.lanes=s,e}function qj(e,o,s,a){return e=Bg(22,e,a,o),e.elementType=Ia,e.lanes=s,e.stateNode={isHidden:!1},e}function xh(e,o,s){return e=Bg(6,e,null,o),e.lanes=s,e}function zh(e,o,s){return o=Bg(4,e.children!==null?e.children:[],e.key,o),o.lanes=s,o.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},o}function bl(e,o,s,a,h){this.tag=o,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function cl(e,o,s,a,h,c,d,g,b){return e=new bl(e,o,s,g,b),o===1?(o=1,c===!0&&(o|=8)):o=0,c=Bg(3,null,null,o),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(c),e}function dl(e,o,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:o,implementation:s}}function el(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var o=e;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p(171))}if(e.tag===1){var s=e.type;if(Zf(s))return bg(e,s,o)}return o}function fl(e,o,s,a,h,c,d,g,b){return e=cl(s,a,!0,e,h,c,d,g,b),e.context=el(null),s=e.current,a=L(),h=lh(s),c=ch(a,h),c.callback=o??null,dh(s,c,h),e.current.lanes=h,Ac(e,h,a),Ek(e,a),e}function gl(e,o,s,a){var h=o.current,c=L(),d=lh(h);return s=el(s),o.context===null?o.context=s:o.pendingContext=s,o=ch(c,d),o.payload={element:e},a=a===void 0?null:a,a!==null&&(o.callback=a),e=dh(h,o,d),e!==null&&(mh(e,h,d,c),eh(e,h,d)),d}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il(e,o){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<o?s:o}}function jl(e,o){il(e,o),(e=e.alternate)&&il(e,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml(e){this._internalRoot=e}nl.prototype.render=ml.prototype.render=function(e){var o=this._internalRoot;if(o===null)throw Error(p(409));gl(e,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var o=e.containerInfo;Sk(function(){gl(null,e,null,null)}),o[uf]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var o=Hc();e={blockedOn:null,target:e,priority:o};for(var s=0;s<Qc.length&&o!==0&&o<Qc[s].priority;s++);Qc.splice(s,0,e),s===0&&Vc(e)}};function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(e,o,s,a,h){if(h){if(typeof a=="function"){var c=a;a=function(){var _=hl(d);c.call(_)}}var d=fl(o,a,e,0,null,!1,!1,"",ql);return e._reactRootContainer=d,e[uf]=d.current,sf(e.nodeType===8?e.parentNode:e),Sk(),d}for(;h=e.lastChild;)e.removeChild(h);if(typeof a=="function"){var g=a;a=function(){var _=hl(b);g.call(_)}}var b=cl(e,0,!1,null,null,!1,!1,"",ql);return e._reactRootContainer=b,e[uf]=b.current,sf(e.nodeType===8?e.parentNode:e),Sk(function(){gl(o,b,s,a)}),b}function sl(e,o,s,a,h){var c=s._reactRootContainer;if(c){var d=c;if(typeof h=="function"){var g=h;h=function(){var b=hl(d);g.call(b)}}gl(o,d,e,h)}else d=rl(s,o,e,h,a);return hl(d)}Ec=function(e){switch(e.tag){case 3:var o=e.stateNode;if(o.current.memoizedState.isDehydrated){var s=tc(o.pendingLanes);s!==0&&(Cc(o,s|1),Ek(o,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var a=Zg(e,1);if(a!==null){var h=L();mh(a,e,1,h)}}),jl(e,1)}};Fc=function(e){if(e.tag===13){var o=Zg(e,134217728);if(o!==null){var s=L();mh(o,e,134217728,s)}jl(e,134217728)}};Gc=function(e){if(e.tag===13){var o=lh(e),s=Zg(e,o);if(s!==null){var a=L();mh(s,e,o,a)}jl(e,o)}};Hc=function(){return C};Ic=function(e,o){var s=C;try{return C=e,o()}finally{C=s}};yb=function(e,o,s){switch(o){case"input":if(bb(e,s),o=s.name,s.type==="radio"&&o!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var a=s[o];if(a!==e&&a.form===e.form){var h=Db(a);if(!h)throw Error(p(90));Wa(a),bb(a,h)}}}break;case"textarea":ib(e,s);break;case"select":o=s.value,o!=null&&fb(e,!!s.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(e,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p(200));return dl(e,o,null,s)};reactDom_production_min.createRoot=function(e,o){if(!ol(e))throw Error(p(299));var s=!1,a="",h=ll;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(a=o.identifierPrefix),o.onRecoverableError!==void 0&&(h=o.onRecoverableError)),o=cl(e,1,!1,null,null,s,!1,a,h),e[uf]=o.current,sf(e.nodeType===8?e.parentNode:e),new ml(o)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var o=e._reactInternals;if(o===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(o),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk(e)};reactDom_production_min.hydrate=function(e,o,s){if(!pl(o))throw Error(p(200));return sl(null,e,o,!0,s)};reactDom_production_min.hydrateRoot=function(e,o,s){if(!ol(e))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,h=!1,c="",d=ll;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),o=fl(o,null,e,1,s??null,h,!1,c,d),e[uf]=o.current,sf(e),a)for(e=0;e<a.length;e++)s=a[e],h=s._getVersion,h=h(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,h]:o.mutableSourceEagerHydrationData.push(s,h);return new nl(o)};reactDom_production_min.render=function(e,o,s){if(!pl(o))throw Error(p(200));return sl(null,e,o,!1,s)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl(e))throw Error(p(40));return e._reactRootContainer?(Sk(function(){sl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,o,s,a){if(!pl(s))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return sl(e,o,s,!1,a)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const App$1="",image1="/frame-stand-israel/assets/frame_support-israel-752cc415.png",image2="/frame-stand-israel/assets/frame_pray-5cc6a57d.png",image3="/frame-stand-israel/assets/stand_frame-5ca83fc1.png",image_init="/frame-stand-israel/assets/homer-c06f6cb5.png",bitMethods={getBit(e){return this.data[getSlot(e)]&1<<getShift(e)?1:0},setBit(e){this.data[getSlot(e)]|=1<<getShift(e)},clearBit(e){this.data[getSlot(e)]&=~(1<<getShift(e))},toggleBit(e){this.data[getSlot(e)]^=1<<getShift(e)},getBitXY(e,o){return e>=this.width||o>=this.height?0:this.getBit(o*this.width+e)},setBitXY(e,o){this.setBit(o*this.width+e)},clearBitXY(e,o){this.clearBit(o*this.width+e)},toggleBitXY(e,o){this.toggleBit(o*this.width+e)}};function getSlot(e){return e>>3}function getShift(e){return 7-(e&7)}function setBitMethods(e){for(const o in bitMethods)e.prototype[o]=bitMethods[o]}function checkProcessable(e,o={}){let{bitDepth:s,alpha:a,colorModel:h,components:c,channels:d}=o;if(typeof e!="string"||e.length===0)throw new TypeError("processName must be a string");if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.bitDepth)))throw new TypeError(`The process: ${e} can only be applied if bit depth is in: ${s}`);if(a&&(Array.isArray(a)||(a=[a]),!a.includes(this.alpha)))throw new TypeError(`The process: ${e} can only be applied if alpha is in: ${a}`);if(h&&(Array.isArray(h)||(h=[h]),!h.includes(this.colorModel)))throw new TypeError(`The process: ${e} can only be applied if color model is in: ${h}`);if(c&&(Array.isArray(c)||(c=[c]),!c.includes(this.components))){let g=`The process: ${e} can only be applied if the number of components is in: ${c}`;throw c.length===1&&c[0]===1?new TypeError(`${g}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(g)}if(d&&(Array.isArray(d)||(d=[d]),!d.includes(this.channels)))throw new TypeError(`The process: ${e} can only be applied if the number of channels is in: ${d}`)}function createBlob(e,o){e=e||[],o=o||{},typeof o=="string"&&(o={type:o});try{return new Blob(e,o)}catch(c){if(c.name!=="TypeError")throw c;for(var s=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,a=new s,h=0;h<e.length;h+=1)a.append(e[h]);return a.getBlob(o.type)}}function dataURLToBlob(e){var o=e.match(/data:([^;]+)/)[1],s=e.replace(/^[^,]+,/,""),a=binaryStringToArrayBuffer(atob(s));return createBlob([a],{type:o})}function canvasToBlob(e,o,s){return typeof e.toBlob=="function"?new Promise(function(a){e.toBlob(a,o,s)}):Promise.resolve(dataURLToBlob(e.toDataURL(o,s)))}function binaryStringToArrayBuffer(e){for(var o=e.length,s=new ArrayBuffer(o),a=new Uint8Array(s),h=-1;++h<o;)a[h]=e.charCodeAt(h);return s}(function(e){if(e.TextEncoder&&e.TextDecoder)return!1;function o(a="utf-8"){if(a!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${a}') is invalid.`)}Object.defineProperty(o.prototype,"encoding",{value:"utf-8"}),o.prototype.encode=function(a,h={stream:!1}){if(h.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let c=0;const d=a.length;let g=0,b=Math.max(32,d+(d>>1)+7),_=new Uint8Array(b>>3<<3);for(;c<d;){let $=a.charCodeAt(c++);if($>=55296&&$<=56319){if(c<d){const j=a.charCodeAt(c);(j&64512)===56320&&(++c,$=(($&1023)<<10)+(j&1023)+65536)}if($>=55296&&$<=56319)continue}if(g+4>_.length){b+=8,b*=1+c/a.length*2,b=b>>3<<3;const j=new Uint8Array(b);j.set(_),_=j}if($&4294967168)if(!($&4294965248))_[g++]=$>>6&31|192;else if(!($&4294901760))_[g++]=$>>12&15|224,_[g++]=$>>6&63|128;else if(!($&4292870144))_[g++]=$>>18&7|240,_[g++]=$>>12&63|128,_[g++]=$>>6&63|128;else continue;else{_[g++]=$;continue}_[g++]=$&63|128}return _.slice(0,g)};function s(a="utf-8",h={fatal:!1}){if(a!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${a}') is invalid.`);if(h.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(s.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(s.prototype,"fatal",{value:!1}),Object.defineProperty(s.prototype,"ignoreBOM",{value:!1}),s.prototype.decode=function(a,h={stream:!1}){if(h.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const c=new Uint8Array(a);let d=0;const g=c.length,b=[];for(;d<g;){const _=c[d++];if(_===0)break;if(!(_&128))b.push(_);else if((_&224)===192){const $=c[d++]&63;b.push((_&31)<<6|$)}else if((_&240)===224){const $=c[d++]&63,j=c[d++]&63;b.push((_&31)<<12|$<<6|j)}else if((_&248)===240){const $=c[d++]&63,j=c[d++]&63,_e=c[d++]&63;let et=(_&7)<<18|$<<12|j<<6|_e;et>65535&&(et-=65536,b.push(et>>>10&1023|55296),et=56320|et&1023),b.push(et)}}return String.fromCharCode.apply(null,b)},e.TextEncoder=o,e.TextDecoder=s})(typeof window<"u"?window:typeof self<"u"?self:globalThis);function decode$5(e,o="utf8"){return new TextDecoder(o).decode(e)}const encoder$1=new TextEncoder;function encode$3(e){return encoder$1.encode(e)}const defaultByteLength$1=1024*8,hostBigEndian=(()=>{const e=new Uint8Array(4),o=new Uint32Array(e.buffer);return!((o[0]=1)&e[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};let IOBuffer$4=class zn{constructor(o=defaultByteLength$1,s={}){let a=!1;typeof o=="number"?o=new ArrayBuffer(o):(a=!0,this.lastWrittenByte=o.byteLength);const h=s.offset?s.offset>>>0:0,c=o.byteLength-h;let d=h;(ArrayBuffer.isView(o)||o instanceof zn)&&(o.byteLength!==o.buffer.byteLength&&(d=o.byteOffset+h),o=o.buffer),a?this.lastWrittenByte=c:this.lastWrittenByte=0,this.buffer=o,this.length=c,this.byteLength=c,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,c),this._mark=0,this._marks=[]}available(o=1){return this.offset+o<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(o=1){return this.offset+=o,this}back(o=1){return this.offset-=o,this}seek(o){return this.offset=o,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const o=this._marks.pop();if(o===void 0)throw new Error("Mark stack empty");return this.seek(o),this}rewind(){return this.offset=0,this}ensureAvailable(o=1){if(!this.available(o)){const a=(this.offset+o)*2,h=new Uint8Array(a);h.set(new Uint8Array(this.buffer)),this.buffer=h.buffer,this.length=this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(o=1){return this.readArray(o,"uint8")}readArray(o,s){const a=typedArrays[s].BYTES_PER_ELEMENT*o,h=this.byteOffset+this.offset,c=this.buffer.slice(h,h+a);if(this.littleEndian===hostBigEndian&&s!=="uint8"&&s!=="int8"){const g=new Uint8Array(this.buffer.slice(h,h+a));g.reverse();const b=new typedArrays[s](g.buffer);return this.offset+=a,b.reverse(),b}const d=new typedArrays[s](c);return this.offset+=a,d}readInt16(){const o=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,o}readUint16(){const o=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,o}readInt32(){const o=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,o}readUint32(){const o=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat32(){const o=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat64(){const o=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,o}readBigInt64(){const o=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,o}readBigUint64(){const o=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,o}readChar(){return String.fromCharCode(this.readInt8())}readChars(o=1){let s="";for(let a=0;a<o;a++)s+=this.readChar();return s}readUtf8(o=1){return decode$5(this.readBytes(o))}decodeText(o=1,s="utf-8"){return decode$5(this.readBytes(o),s)}writeBoolean(o){return this.writeUint8(o?255:0),this}writeInt8(o){return this.ensureAvailable(1),this._data.setInt8(this.offset++,o),this._updateLastWrittenByte(),this}writeUint8(o){return this.ensureAvailable(1),this._data.setUint8(this.offset++,o),this._updateLastWrittenByte(),this}writeByte(o){return this.writeUint8(o)}writeBytes(o){this.ensureAvailable(o.length);for(let s=0;s<o.length;s++)this._data.setUint8(this.offset++,o[s]);return this._updateLastWrittenByte(),this}writeInt16(o){return this.ensureAvailable(2),this._data.setInt16(this.offset,o,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(o){return this.ensureAvailable(2),this._data.setUint16(this.offset,o,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(o){return this.ensureAvailable(4),this._data.setInt32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(o){return this.ensureAvailable(4),this._data.setUint32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(o){return this.ensureAvailable(4),this._data.setFloat32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(o){return this.ensureAvailable(8),this._data.setFloat64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(o){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(o){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(o){return this.writeUint8(o.charCodeAt(0))}writeChars(o){for(let s=0;s<o.length;s++)this.writeUint8(o.charCodeAt(s));return this}writeUtf8(o){return this.writeBytes(encode$3(o))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};const IOBuffer$5=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer:IOBuffer$4},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(IOBuffer$5);var constants$4={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}};const{IOBuffer:IOBuffer$3}=require$$0$3,constants$3=constants$4,tableLeft=[];for(let e=0;e<=8;e++)tableLeft.push(255<<e);class BMPEncoder extends IOBuffer$3{constructor(o){if(o.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!o.height||!o.width)throw new Error("ImageData width and height are required");super(o.data),this.width=o.width,this.height=o.height,this.bitDepth=o.bitDepth,this.channels=o.channels,this.components=o.components}encode(){this.encoded=new IOBuffer$3,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const o=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(o),this.encoded.toArray()}writePixelArray(){let o=this.encoded;const s=Math.floor((this.bitDepth*this.width+31)/32)*4,a=Math.ceil(this.bitDepth*this.width/8),h=s-a,c=this.bitDepth*this.width%8,d=c===0?0:8-c,g=s*this.height;let b,_,$=0,j=0,_e=8;o.mark(),_=this.readUint8();for(let et=this.height-1;et>=0;et--){const nt=et===0;o.reset(),o.skip(et*s);for(let it=0;it<a;it++){const lt=it===a-1;j<=d&&lt?(o.writeByte(_<<j),(d===0||d===j)&&!nt&&(b=_,_=this.readByte())):j===0?(b=_,_=this.readUint8(),o.writeByte(b)):(b=_,_=this.readUint8(),o.writeByte(b<<j&tableLeft[j]|_>>_e)),lt&&($+=c||0,o.skip(h),j=$%8,_e=8-j)}}s>a&&(o.reset(),o.skip(g-1),o.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(o){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(o)}writeBitmapV5Header(){const s=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(constants$3.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(s).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(constants$3.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(constants$3.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}var BMPEncoder_1=BMPEncoder;const Encoder=BMPEncoder_1;var encode$2=function(o){return new Encoder(o).encode()};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(e){let o=e.length;for(;--o>=0;)e[o]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,o,s,a,h){this.static_tree=e,this.extra_bits=o,this.extra_base=s,this.elems=a,this.max_length=h,this.has_stree=e&&e.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,o){this.dyn_tree=e,this.max_code=0,this.stat_desc=o}const d_code=e=>e<256?_dist_code[e]:_dist_code[256+(e>>>7)],put_short=(e,o)=>{e.pending_buf[e.pending++]=o&255,e.pending_buf[e.pending++]=o>>>8&255},send_bits=(e,o,s)=>{e.bi_valid>Buf_size-s?(e.bi_buf|=o<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=o>>Buf_size-e.bi_valid,e.bi_valid+=s-Buf_size):(e.bi_buf|=o<<e.bi_valid&65535,e.bi_valid+=s)},send_code=(e,o,s)=>{send_bits(e,s[o*2],s[o*2+1])},bi_reverse=(e,o)=>{let s=0;do s|=e&1,e>>>=1,s<<=1;while(--o>0);return s>>>1},bi_flush=e=>{e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},gen_bitlen=(e,o)=>{const s=o.dyn_tree,a=o.max_code,h=o.stat_desc.static_tree,c=o.stat_desc.has_stree,d=o.stat_desc.extra_bits,g=o.stat_desc.extra_base,b=o.stat_desc.max_length;let _,$,j,_e,et,nt,it=0;for(_e=0;_e<=MAX_BITS$1;_e++)e.bl_count[_e]=0;for(s[e.heap[e.heap_max]*2+1]=0,_=e.heap_max+1;_<HEAP_SIZE$1;_++)$=e.heap[_],_e=s[s[$*2+1]*2+1]+1,_e>b&&(_e=b,it++),s[$*2+1]=_e,!($>a)&&(e.bl_count[_e]++,et=0,$>=g&&(et=d[$-g]),nt=s[$*2],e.opt_len+=nt*(_e+et),c&&(e.static_len+=nt*(h[$*2+1]+et)));if(it!==0){do{for(_e=b-1;e.bl_count[_e]===0;)_e--;e.bl_count[_e]--,e.bl_count[_e+1]+=2,e.bl_count[b]--,it-=2}while(it>0);for(_e=b;_e!==0;_e--)for($=e.bl_count[_e];$!==0;)j=e.heap[--_],!(j>a)&&(s[j*2+1]!==_e&&(e.opt_len+=(_e-s[j*2+1])*s[j*2],s[j*2+1]=_e),$--)}},gen_codes=(e,o,s)=>{const a=new Array(MAX_BITS$1+1);let h=0,c,d;for(c=1;c<=MAX_BITS$1;c++)h=h+s[c-1]<<1,a[c]=h;for(d=0;d<=o;d++){let g=e[d*2+1];g!==0&&(e[d*2]=bi_reverse(a[g]++,g))}},tr_static_init=()=>{let e,o,s,a,h;const c=new Array(MAX_BITS$1+1);for(s=0,a=0;a<LENGTH_CODES$1-1;a++)for(base_length[a]=s,e=0;e<1<<extra_lbits[a];e++)_length_code[s++]=a;for(_length_code[s-1]=a,h=0,a=0;a<16;a++)for(base_dist[a]=h,e=0;e<1<<extra_dbits[a];e++)_dist_code[h++]=a;for(h>>=7;a<D_CODES$1;a++)for(base_dist[a]=h<<7,e=0;e<1<<extra_dbits[a]-7;e++)_dist_code[256+h++]=a;for(o=0;o<=MAX_BITS$1;o++)c[o]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,c[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,c[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,c[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,c[8]++;for(gen_codes(static_ltree,L_CODES$1+1,c),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=e=>{let o;for(o=0;o<L_CODES$1;o++)e.dyn_ltree[o*2]=0;for(o=0;o<D_CODES$1;o++)e.dyn_dtree[o*2]=0;for(o=0;o<BL_CODES$1;o++)e.bl_tree[o*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},bi_windup=e=>{e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},smaller=(e,o,s,a)=>{const h=o*2,c=s*2;return e[h]<e[c]||e[h]===e[c]&&a[o]<=a[s]},pqdownheap=(e,o,s)=>{const a=e.heap[s];let h=s<<1;for(;h<=e.heap_len&&(h<e.heap_len&&smaller(o,e.heap[h+1],e.heap[h],e.depth)&&h++,!smaller(o,a,e.heap[h],e.depth));)e.heap[s]=e.heap[h],s=h,h<<=1;e.heap[s]=a},compress_block=(e,o,s)=>{let a,h,c=0,d,g;if(e.sym_next!==0)do a=e.pending_buf[e.sym_buf+c++]&255,a+=(e.pending_buf[e.sym_buf+c++]&255)<<8,h=e.pending_buf[e.sym_buf+c++],a===0?send_code(e,h,o):(d=_length_code[h],send_code(e,d+LITERALS$1+1,o),g=extra_lbits[d],g!==0&&(h-=base_length[d],send_bits(e,h,g)),a--,d=d_code(a),send_code(e,d,s),g=extra_dbits[d],g!==0&&(a-=base_dist[d],send_bits(e,a,g)));while(c<e.sym_next);send_code(e,END_BLOCK,o)},build_tree=(e,o)=>{const s=o.dyn_tree,a=o.stat_desc.static_tree,h=o.stat_desc.has_stree,c=o.stat_desc.elems;let d,g,b=-1,_;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,d=0;d<c;d++)s[d*2]!==0?(e.heap[++e.heap_len]=b=d,e.depth[d]=0):s[d*2+1]=0;for(;e.heap_len<2;)_=e.heap[++e.heap_len]=b<2?++b:0,s[_*2]=1,e.depth[_]=0,e.opt_len--,h&&(e.static_len-=a[_*2+1]);for(o.max_code=b,d=e.heap_len>>1;d>=1;d--)pqdownheap(e,s,d);_=c;do d=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,s,1),g=e.heap[1],e.heap[--e.heap_max]=d,e.heap[--e.heap_max]=g,s[_*2]=s[d*2]+s[g*2],e.depth[_]=(e.depth[d]>=e.depth[g]?e.depth[d]:e.depth[g])+1,s[d*2+1]=s[g*2+1]=_,e.heap[1]=_++,pqdownheap(e,s,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,o),gen_codes(s,b,e.bl_count)},scan_tree=(e,o,s)=>{let a,h=-1,c,d=o[0*2+1],g=0,b=7,_=4;for(d===0&&(b=138,_=3),o[(s+1)*2+1]=65535,a=0;a<=s;a++)c=d,d=o[(a+1)*2+1],!(++g<b&&c===d)&&(g<_?e.bl_tree[c*2]+=g:c!==0?(c!==h&&e.bl_tree[c*2]++,e.bl_tree[REP_3_6*2]++):g<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,g=0,h=c,d===0?(b=138,_=3):c===d?(b=6,_=3):(b=7,_=4))},send_tree=(e,o,s)=>{let a,h=-1,c,d=o[0*2+1],g=0,b=7,_=4;for(d===0&&(b=138,_=3),a=0;a<=s;a++)if(c=d,d=o[(a+1)*2+1],!(++g<b&&c===d)){if(g<_)do send_code(e,c,e.bl_tree);while(--g!==0);else c!==0?(c!==h&&(send_code(e,c,e.bl_tree),g--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,g-3,2)):g<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,g-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,g-11,7));g=0,h=c,d===0?(b=138,_=3):c===d?(b=6,_=3):(b=7,_=4)}},build_bl_tree=e=>{let o;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),o=BL_CODES$1-1;o>=3&&e.bl_tree[bl_order[o]*2+1]===0;o--);return e.opt_len+=3*(o+1)+5+5+4,o},send_all_trees=(e,o,s,a)=>{let h;for(send_bits(e,o-257,5),send_bits(e,s-1,5),send_bits(e,a-4,4),h=0;h<a;h++)send_bits(e,e.bl_tree[bl_order[h]*2+1],3);send_tree(e,e.dyn_ltree,o-1),send_tree(e,e.dyn_dtree,s-1)},detect_data_type=e=>{let o=4093624447,s;for(s=0;s<=31;s++,o>>>=1)if(o&1&&e.dyn_ltree[s*2]!==0)return Z_BINARY;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT;for(s=32;s<LITERALS$1;s++)if(e.dyn_ltree[s*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=e=>{static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)},_tr_stored_block$1=(e,o,s,a)=>{send_bits(e,(STORED_BLOCK<<1)+(a?1:0),3),bi_windup(e),put_short(e,s),put_short(e,~s),s&&e.pending_buf.set(e.window.subarray(o,o+s),e.pending),e.pending+=s},_tr_align$1=e=>{send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)},_tr_flush_block$1=(e,o,s,a)=>{let h,c,d=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$1&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),d=build_bl_tree(e),h=e.opt_len+3+7>>>3,c=e.static_len+3+7>>>3,c<=h&&(h=c)):h=c=s+5,s+4<=h&&o!==-1?_tr_stored_block$1(e,o,s,a):e.strategy===Z_FIXED$1||c===h?(send_bits(e,(STATIC_TREES<<1)+(a?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(a?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),a&&bi_windup(e)},_tr_tally$1=(e,o,s)=>(e.pending_buf[e.sym_buf+e.sym_next++]=o,e.pending_buf[e.sym_buf+e.sym_next++]=o>>8,e.pending_buf[e.sym_buf+e.sym_next++]=s,o===0?e.dyn_ltree[s*2]++:(e.matches++,o--,e.dyn_ltree[(_length_code[s]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(o)*2]++),e.sym_next===e.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(e,o,s,a)=>{let h=e&65535|0,c=e>>>16&65535|0,d=0;for(;s!==0;){d=s>2e3?2e3:s,s-=d;do h=h+o[a++]|0,c=c+h|0;while(--d);h%=65521,c%=65521}return h|c<<16|0};var adler32_1=adler32;const makeTable=()=>{let e,o=[];for(var s=0;s<256;s++){e=s;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;o[s]=e}return o},crcTable$1=new Uint32Array(makeTable()),crc32=(e,o,s,a)=>{const h=crcTable$1,c=a+s;e^=-1;for(let d=a;d<c;d++)e=e>>>8^h[(e^o[d])&255];return e^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(e,o)=>(e.msg=messages[o],o),rank=e=>e*2-(e>4?9:0),zero=e=>{let o=e.length;for(;--o>=0;)e[o]=0},slide_hash=e=>{let o,s,a,h=e.w_size;o=e.hash_size,a=o;do s=e.head[--a],e.head[a]=s>=h?s-h:0;while(--o);o=h,a=o;do s=e.prev[--a],e.prev[a]=s>=h?s-h:0;while(--o)};let HASH_ZLIB=(e,o,s)=>(o<<e.hash_shift^s)&e.hash_mask,HASH=HASH_ZLIB;const flush_pending=e=>{const o=e.state;let s=o.pending;s>e.avail_out&&(s=e.avail_out),s!==0&&(e.output.set(o.pending_buf.subarray(o.pending_out,o.pending_out+s),e.next_out),e.next_out+=s,o.pending_out+=s,e.total_out+=s,e.avail_out-=s,o.pending-=s,o.pending===0&&(o.pending_out=0))},flush_block_only=(e,o)=>{_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,o),e.block_start=e.strstart,flush_pending(e.strm)},put_byte=(e,o)=>{e.pending_buf[e.pending++]=o},putShortMSB=(e,o)=>{e.pending_buf[e.pending++]=o>>>8&255,e.pending_buf[e.pending++]=o&255},read_buf=(e,o,s,a)=>{let h=e.avail_in;return h>a&&(h=a),h===0?0:(e.avail_in-=h,o.set(e.input.subarray(e.next_in,e.next_in+h),s),e.state.wrap===1?e.adler=adler32_1(e.adler,o,h,s):e.state.wrap===2&&(e.adler=crc32_1(e.adler,o,h,s)),e.next_in+=h,e.total_in+=h,h)},longest_match=(e,o)=>{let s=e.max_chain_length,a=e.strstart,h,c,d=e.prev_length,g=e.nice_match;const b=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,_=e.window,$=e.w_mask,j=e.prev,_e=e.strstart+MAX_MATCH;let et=_[a+d-1],nt=_[a+d];e.prev_length>=e.good_match&&(s>>=2),g>e.lookahead&&(g=e.lookahead);do if(h=o,!(_[h+d]!==nt||_[h+d-1]!==et||_[h]!==_[a]||_[++h]!==_[a+1])){a+=2,h++;do;while(_[++a]===_[++h]&&_[++a]===_[++h]&&_[++a]===_[++h]&&_[++a]===_[++h]&&_[++a]===_[++h]&&_[++a]===_[++h]&&_[++a]===_[++h]&&_[++a]===_[++h]&&a<_e);if(c=MAX_MATCH-(_e-a),a=_e-MAX_MATCH,c>d){if(e.match_start=o,d=c,c>=g)break;et=_[a+d-1],nt=_[a+d]}}while((o=j[o&$])>b&&--s!==0);return d<=e.lookahead?d:e.lookahead},fill_window=e=>{const o=e.w_size;let s,a,h;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-MIN_LOOKAHEAD)&&(e.window.set(e.window.subarray(o,o+o-a),0),e.match_start-=o,e.strstart-=o,e.block_start-=o,e.insert>e.strstart&&(e.insert=e.strstart),slide_hash(e),a+=o),e.strm.avail_in===0)break;if(s=read_buf(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=s,e.lookahead+e.insert>=MIN_MATCH)for(h=e.strstart-e.insert,e.ins_h=e.window[h],e.ins_h=HASH(e,e.ins_h,e.window[h+1]);e.insert&&(e.ins_h=HASH(e,e.ins_h,e.window[h+MIN_MATCH-1]),e.prev[h&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=h,h++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)},deflate_stored=(e,o)=>{let s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a,h,c,d=0,g=e.strm.avail_in;do{if(a=65535,c=e.bi_valid+42>>3,e.strm.avail_out<c||(c=e.strm.avail_out-c,h=e.strstart-e.block_start,a>h+e.strm.avail_in&&(a=h+e.strm.avail_in),a>c&&(a=c),a<s&&(a===0&&o!==Z_FINISH$3||o===Z_NO_FLUSH$2||a!==h+e.strm.avail_in)))break;d=o===Z_FINISH$3&&a===h+e.strm.avail_in?1:0,_tr_stored_block(e,0,0,d),e.pending_buf[e.pending-4]=a,e.pending_buf[e.pending-3]=a>>8,e.pending_buf[e.pending-2]=~a,e.pending_buf[e.pending-1]=~a>>8,flush_pending(e.strm),h&&(h>a&&(h=a),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+h),e.strm.next_out),e.strm.next_out+=h,e.strm.avail_out-=h,e.strm.total_out+=h,e.block_start+=h,a-=h),a&&(read_buf(e.strm,e.strm.output,e.strm.next_out,a),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a)}while(d===0);return g-=e.strm.avail_in,g&&(g>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=g&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-g,e.strm.next_in),e.strstart),e.strstart+=g,e.insert+=g>e.w_size-e.insert?e.w_size-e.insert:g),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),d?BS_FINISH_DONE:o!==Z_NO_FLUSH$2&&o!==Z_FINISH$3&&e.strm.avail_in===0&&e.strstart===e.block_start?BS_BLOCK_DONE:(c=e.window_size-e.strstart,e.strm.avail_in>c&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,c+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),c>e.strm.avail_in&&(c=e.strm.avail_in),c&&(read_buf(e.strm,e.window,e.strstart,c),e.strstart+=c,e.insert+=c>e.w_size-e.insert?e.w_size-e.insert:c),e.high_water<e.strstart&&(e.high_water=e.strstart),c=e.bi_valid+42>>3,c=e.pending_buf_size-c>65535?65535:e.pending_buf_size-c,s=c>e.w_size?e.w_size:c,h=e.strstart-e.block_start,(h>=s||(h||o===Z_FINISH$3)&&o!==Z_NO_FLUSH$2&&e.strm.avail_in===0&&h<=c)&&(a=h>c?c:h,d=o===Z_FINISH$3&&e.strm.avail_in===0&&a===h?1:0,_tr_stored_block(e,e.block_start,a,d),e.block_start+=a,flush_pending(e.strm)),d?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(e,o)=>{let s,a;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(e.lookahead===0)break}if(s=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),s!==0&&e.strstart-s<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,s)),e.match_length>=MIN_MATCH)if(a=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+1]);else a=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,o===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(e,o)=>{let s,a,h;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(e.lookahead===0)break}if(s=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,s!==0&&e.prev_length<e.max_lazy_match&&e.strstart-s<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,s),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){h=e.strstart+e.lookahead-MIN_MATCH,a=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=h&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,a&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(a=_tr_tally(e,0,e.window[e.strstart-1]),a&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,o===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(e,o)=>{let s,a,h,c;const d=e.window;for(;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(h=e.strstart-1,a=d[h],a===d[++h]&&a===d[++h]&&a===d[++h])){c=e.strstart+MAX_MATCH;do;while(a===d[++h]&&a===d[++h]&&a===d[++h]&&a===d[++h]&&a===d[++h]&&a===d[++h]&&a===d[++h]&&a===d[++h]&&h<c);e.match_length=MAX_MATCH-(c-h),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(s=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(s=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),s&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,o===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(e,o)=>{let s;for(;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(o===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(e.match_length=0,s=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,s&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,o===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(e,o,s,a,h){this.good_length=e,this.max_lazy=o,this.nice_length=s,this.max_chain=a,this.func=h}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=e=>{e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=e=>{if(!e)return 1;const o=e.state;return!o||o.strm!==e||o.status!==INIT_STATE&&o.status!==GZIP_STATE&&o.status!==EXTRA_STATE&&o.status!==NAME_STATE&&o.status!==COMMENT_STATE&&o.status!==HCRC_STATE&&o.status!==BUSY_STATE&&o.status!==FINISH_STATE?1:0},deflateResetKeep=e=>{if(deflateStateCheck(e))return err(e,Z_STREAM_ERROR$2);e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN;const o=e.state;return o.pending=0,o.pending_out=0,o.wrap<0&&(o.wrap=-o.wrap),o.status=o.wrap===2?GZIP_STATE:o.wrap?INIT_STATE:BUSY_STATE,e.adler=o.wrap===2?0:1,o.last_flush=-2,_tr_init(o),Z_OK$3},deflateReset=e=>{const o=deflateResetKeep(e);return o===Z_OK$3&&lm_init(e.state),o},deflateSetHeader=(e,o)=>deflateStateCheck(e)||e.state.wrap!==2?Z_STREAM_ERROR$2:(e.state.gzhead=o,Z_OK$3),deflateInit2=(e,o,s,a,h,c)=>{if(!e)return Z_STREAM_ERROR$2;let d=1;if(o===Z_DEFAULT_COMPRESSION$1&&(o=6),a<0?(d=0,a=-a):a>15&&(d=2,a-=16),h<1||h>MAX_MEM_LEVEL||s!==Z_DEFLATED$2||a<8||a>15||o<0||o>9||c<0||c>Z_FIXED||a===8&&d!==1)return err(e,Z_STREAM_ERROR$2);a===8&&(a=9);const g=new DeflateState;return e.state=g,g.strm=e,g.status=INIT_STATE,g.wrap=d,g.gzhead=null,g.w_bits=a,g.w_size=1<<g.w_bits,g.w_mask=g.w_size-1,g.hash_bits=h+7,g.hash_size=1<<g.hash_bits,g.hash_mask=g.hash_size-1,g.hash_shift=~~((g.hash_bits+MIN_MATCH-1)/MIN_MATCH),g.window=new Uint8Array(g.w_size*2),g.head=new Uint16Array(g.hash_size),g.prev=new Uint16Array(g.w_size),g.lit_bufsize=1<<h+6,g.pending_buf_size=g.lit_bufsize*4,g.pending_buf=new Uint8Array(g.pending_buf_size),g.sym_buf=g.lit_bufsize,g.sym_end=(g.lit_bufsize-1)*3,g.level=o,g.strategy=c,g.method=s,deflateReset(e)},deflateInit=(e,o)=>deflateInit2(e,o,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(e,o)=>{if(deflateStateCheck(e)||o>Z_BLOCK$1||o<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const s=e.state;if(!e.output||e.avail_in!==0&&!e.input||s.status===FINISH_STATE&&o!==Z_FINISH$3)return err(e,e.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const a=s.last_flush;if(s.last_flush=o,s.pending!==0){if(flush_pending(e),e.avail_out===0)return s.last_flush=-1,Z_OK$3}else if(e.avail_in===0&&rank(o)<=rank(a)&&o!==Z_FINISH$3)return err(e,Z_BUF_ERROR$1);if(s.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$1);if(s.status===INIT_STATE&&s.wrap===0&&(s.status=BUSY_STATE),s.status===INIT_STATE){let h=Z_DEFLATED$2+(s.w_bits-8<<4)<<8,c=-1;if(s.strategy>=Z_HUFFMAN_ONLY||s.level<2?c=0:s.level<6?c=1:s.level===6?c=2:c=3,h|=c<<6,s.strstart!==0&&(h|=PRESET_DICT),h+=31-h%31,putShortMSB(s,h),s.strstart!==0&&(putShortMSB(s,e.adler>>>16),putShortMSB(s,e.adler&65535)),e.adler=1,s.status=BUSY_STATE,flush_pending(e),s.pending!==0)return s.last_flush=-1,Z_OK$3}if(s.status===GZIP_STATE){if(e.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead)put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,s.gzhead.time&255),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,s.gzhead.extra.length&255),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=EXTRA_STATE;else if(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,OS_CODE),s.status=BUSY_STATE,flush_pending(e),s.pending!==0)return s.last_flush=-1,Z_OK$3}if(s.status===EXTRA_STATE){if(s.gzhead.extra){let h=s.pending,c=(s.gzhead.extra.length&65535)-s.gzindex;for(;s.pending+c>s.pending_buf_size;){let g=s.pending_buf_size-s.pending;if(s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+g),s.pending),s.pending=s.pending_buf_size,s.gzhead.hcrc&&s.pending>h&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending-h,h)),s.gzindex+=g,flush_pending(e),s.pending!==0)return s.last_flush=-1,Z_OK$3;h=0,c-=g}let d=new Uint8Array(s.gzhead.extra);s.pending_buf.set(d.subarray(s.gzindex,s.gzindex+c),s.pending),s.pending+=c,s.gzhead.hcrc&&s.pending>h&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending-h,h)),s.gzindex=0}s.status=NAME_STATE}if(s.status===NAME_STATE){if(s.gzhead.name){let h=s.pending,c;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>h&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending-h,h)),flush_pending(e),s.pending!==0)return s.last_flush=-1,Z_OK$3;h=0}s.gzindex<s.gzhead.name.length?c=s.gzhead.name.charCodeAt(s.gzindex++)&255:c=0,put_byte(s,c)}while(c!==0);s.gzhead.hcrc&&s.pending>h&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending-h,h)),s.gzindex=0}s.status=COMMENT_STATE}if(s.status===COMMENT_STATE){if(s.gzhead.comment){let h=s.pending,c;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>h&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending-h,h)),flush_pending(e),s.pending!==0)return s.last_flush=-1,Z_OK$3;h=0}s.gzindex<s.gzhead.comment.length?c=s.gzhead.comment.charCodeAt(s.gzindex++)&255:c=0,put_byte(s,c)}while(c!==0);s.gzhead.hcrc&&s.pending>h&&(e.adler=crc32_1(e.adler,s.pending_buf,s.pending-h,h))}s.status=HCRC_STATE}if(s.status===HCRC_STATE){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size&&(flush_pending(e),s.pending!==0))return s.last_flush=-1,Z_OK$3;put_byte(s,e.adler&255),put_byte(s,e.adler>>8&255),e.adler=0}if(s.status=BUSY_STATE,flush_pending(e),s.pending!==0)return s.last_flush=-1,Z_OK$3}if(e.avail_in!==0||s.lookahead!==0||o!==Z_NO_FLUSH$2&&s.status!==FINISH_STATE){let h=s.level===0?deflate_stored(s,o):s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,o):s.strategy===Z_RLE?deflate_rle(s,o):configuration_table[s.level].func(s,o);if((h===BS_FINISH_STARTED||h===BS_FINISH_DONE)&&(s.status=FINISH_STATE),h===BS_NEED_MORE||h===BS_FINISH_STARTED)return e.avail_out===0&&(s.last_flush=-1),Z_OK$3;if(h===BS_BLOCK_DONE&&(o===Z_PARTIAL_FLUSH?_tr_align(s):o!==Z_BLOCK$1&&(_tr_stored_block(s,0,0,!1),o===Z_FULL_FLUSH$1&&(zero(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(e),e.avail_out===0))return s.last_flush=-1,Z_OK$3}return o!==Z_FINISH$3?Z_OK$3:s.wrap<=0?Z_STREAM_END$3:(s.wrap===2?(put_byte(s,e.adler&255),put_byte(s,e.adler>>8&255),put_byte(s,e.adler>>16&255),put_byte(s,e.adler>>24&255),put_byte(s,e.total_in&255),put_byte(s,e.total_in>>8&255),put_byte(s,e.total_in>>16&255),put_byte(s,e.total_in>>24&255)):(putShortMSB(s,e.adler>>>16),putShortMSB(s,e.adler&65535)),flush_pending(e),s.wrap>0&&(s.wrap=-s.wrap),s.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=e=>{if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const o=e.state.status;return e.state=null,o===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(e,o)=>{let s=o.length;if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const a=e.state,h=a.wrap;if(h===2||h===1&&a.status!==INIT_STATE||a.lookahead)return Z_STREAM_ERROR$2;if(h===1&&(e.adler=adler32_1(e.adler,o,s,0)),a.wrap=0,s>=a.w_size){h===0&&(zero(a.head),a.strstart=0,a.block_start=0,a.insert=0);let b=new Uint8Array(a.w_size);b.set(o.subarray(s-a.w_size,s),0),o=b,s=a.w_size}const c=e.avail_in,d=e.next_in,g=e.input;for(e.avail_in=s,e.next_in=0,e.input=o,fill_window(a);a.lookahead>=MIN_MATCH;){let b=a.strstart,_=a.lookahead-(MIN_MATCH-1);do a.ins_h=HASH(a,a.ins_h,a.window[b+MIN_MATCH-1]),a.prev[b&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=b,b++;while(--_);a.strstart=b,a.lookahead=MIN_MATCH-1,fill_window(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=MIN_MATCH-1,a.match_available=0,e.next_in=d,e.input=g,e.avail_in=c,a.wrap=h,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(e,o)=>Object.prototype.hasOwnProperty.call(e,o);var assign=function(e){const o=Array.prototype.slice.call(arguments,1);for(;o.length;){const s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const a in s)_has(s,a)&&(e[a]=s[a])}}return e},flattenChunks=e=>{let o=0;for(let a=0,h=e.length;a<h;a++)o+=e[a].length;const s=new Uint8Array(o);for(let a=0,h=0,c=e.length;a<c;a++){let d=e[a];s.set(d,h),h+=d.length}return s},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++)_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let o,s,a,h,c,d=e.length,g=0;for(h=0;h<d;h++)s=e.charCodeAt(h),(s&64512)===55296&&h+1<d&&(a=e.charCodeAt(h+1),(a&64512)===56320&&(s=65536+(s-55296<<10)+(a-56320),h++)),g+=s<128?1:s<2048?2:s<65536?3:4;for(o=new Uint8Array(g),c=0,h=0;c<g;h++)s=e.charCodeAt(h),(s&64512)===55296&&h+1<d&&(a=e.charCodeAt(h+1),(a&64512)===56320&&(s=65536+(s-55296<<10)+(a-56320),h++)),s<128?o[c++]=s:s<2048?(o[c++]=192|s>>>6,o[c++]=128|s&63):s<65536?(o[c++]=224|s>>>12,o[c++]=128|s>>>6&63,o[c++]=128|s&63):(o[c++]=240|s>>>18,o[c++]=128|s>>>12&63,o[c++]=128|s>>>6&63,o[c++]=128|s&63);return o};const buf2binstring=(e,o)=>{if(o<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===o?e:e.subarray(0,o));let s="";for(let a=0;a<o;a++)s+=String.fromCharCode(e[a]);return s};var buf2string=(e,o)=>{const s=o||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,o));let a,h;const c=new Array(s*2);for(h=0,a=0;a<s;){let d=e[a++];if(d<128){c[h++]=d;continue}let g=_utf8len[d];if(g>4){c[h++]=65533,a+=g-1;continue}for(d&=g===2?31:g===3?15:7;g>1&&a<s;)d=d<<6|e[a++]&63,g--;if(g>1){c[h++]=65533;continue}d<65536?c[h++]=d:(d-=65536,c[h++]=55296|d>>10&1023,c[h++]=56320|d&1023)}return buf2binstring(c,h)},utf8border=(e,o)=>{o=o||e.length,o>e.length&&(o=e.length);let s=o-1;for(;s>=0&&(e[s]&192)===128;)s--;return s<0||s===0?o:s+_utf8len[e[s]]>o?s:o},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(e){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},e||{});let o=this.options;o.raw&&o.windowBits>0?o.windowBits=-o.windowBits:o.gzip&&o.windowBits>0&&o.windowBits<16&&(o.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let s=deflate_1$2.deflateInit2(this.strm,o.level,o.method,o.windowBits,o.memLevel,o.strategy);if(s!==Z_OK$2)throw new Error(messages[s]);if(o.header&&deflate_1$2.deflateSetHeader(this.strm,o.header),o.dictionary){let a;if(typeof o.dictionary=="string"?a=strings.string2buf(o.dictionary):toString$1$1.call(o.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(o.dictionary):a=o.dictionary,s=deflate_1$2.deflateSetDictionary(this.strm,a),s!==Z_OK$2)throw new Error(messages[s]);this._dict_set=!0}}Deflate$1.prototype.push=function(e,o){const s=this.strm,a=this.options.chunkSize;let h,c;if(this.ended)return!1;for(o===~~o?c=o:c=o===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof e=="string"?s.input=strings.string2buf(e):toString$1$1.call(e)==="[object ArrayBuffer]"?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){if(s.avail_out===0&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),(c===Z_SYNC_FLUSH||c===Z_FULL_FLUSH)&&s.avail_out<=6){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(h=deflate_1$2.deflate(s,c),h===Z_STREAM_END$2)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),h=deflate_1$2.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===Z_OK$2;if(s.avail_out===0){this.onData(s.output);continue}if(c>0&&s.next_out>0){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(s.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(e){this.chunks.push(e)};Deflate$1.prototype.onEnd=function(e){e===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function deflate$1(e,o){const s=new Deflate$1(o);if(s.push(e,!0),s.err)throw s.msg||messages[s.err];return s.result}function deflateRaw$1(e,o){return o=o||{},o.raw=!0,deflate$1(e,o)}function gzip$1(e,o){return o=o||{},o.gzip=!0,deflate$1(e,o)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(o,s){let a,h,c,d,g,b,_,$,j,_e,et,nt,it,lt,tt,st,rt,ot,ut,gt,pt,ht,ct,at;const ft=o.state;a=o.next_in,ct=o.input,h=a+(o.avail_in-5),c=o.next_out,at=o.output,d=c-(s-o.avail_out),g=c+(o.avail_out-257),b=ft.dmax,_=ft.wsize,$=ft.whave,j=ft.wnext,_e=ft.window,et=ft.hold,nt=ft.bits,it=ft.lencode,lt=ft.distcode,tt=(1<<ft.lenbits)-1,st=(1<<ft.distbits)-1;e:do{nt<15&&(et+=ct[a++]<<nt,nt+=8,et+=ct[a++]<<nt,nt+=8),rt=it[et&tt];t:for(;;){if(ot=rt>>>24,et>>>=ot,nt-=ot,ot=rt>>>16&255,ot===0)at[c++]=rt&65535;else if(ot&16){ut=rt&65535,ot&=15,ot&&(nt<ot&&(et+=ct[a++]<<nt,nt+=8),ut+=et&(1<<ot)-1,et>>>=ot,nt-=ot),nt<15&&(et+=ct[a++]<<nt,nt+=8,et+=ct[a++]<<nt,nt+=8),rt=lt[et&st];n:for(;;){if(ot=rt>>>24,et>>>=ot,nt-=ot,ot=rt>>>16&255,ot&16){if(gt=rt&65535,ot&=15,nt<ot&&(et+=ct[a++]<<nt,nt+=8,nt<ot&&(et+=ct[a++]<<nt,nt+=8)),gt+=et&(1<<ot)-1,gt>b){o.msg="invalid distance too far back",ft.mode=BAD$1;break e}if(et>>>=ot,nt-=ot,ot=c-d,gt>ot){if(ot=gt-ot,ot>$&&ft.sane){o.msg="invalid distance too far back",ft.mode=BAD$1;break e}if(pt=0,ht=_e,j===0){if(pt+=_-ot,ot<ut){ut-=ot;do at[c++]=_e[pt++];while(--ot);pt=c-gt,ht=at}}else if(j<ot){if(pt+=_+j-ot,ot-=j,ot<ut){ut-=ot;do at[c++]=_e[pt++];while(--ot);if(pt=0,j<ut){ot=j,ut-=ot;do at[c++]=_e[pt++];while(--ot);pt=c-gt,ht=at}}}else if(pt+=j-ot,ot<ut){ut-=ot;do at[c++]=_e[pt++];while(--ot);pt=c-gt,ht=at}for(;ut>2;)at[c++]=ht[pt++],at[c++]=ht[pt++],at[c++]=ht[pt++],ut-=3;ut&&(at[c++]=ht[pt++],ut>1&&(at[c++]=ht[pt++]))}else{pt=c-gt;do at[c++]=at[pt++],at[c++]=at[pt++],at[c++]=at[pt++],ut-=3;while(ut>2);ut&&(at[c++]=at[pt++],ut>1&&(at[c++]=at[pt++]))}}else if(ot&64){o.msg="invalid distance code",ft.mode=BAD$1;break e}else{rt=lt[(rt&65535)+(et&(1<<ot)-1)];continue n}break}}else if(ot&64)if(ot&32){ft.mode=TYPE$1;break e}else{o.msg="invalid literal/length code",ft.mode=BAD$1;break e}else{rt=it[(rt&65535)+(et&(1<<ot)-1)];continue t}break}}while(a<h&&c<g);ut=nt>>3,a-=ut,nt-=ut<<3,et&=(1<<nt)-1,o.next_in=a,o.next_out=c,o.avail_in=a<h?5+(h-a):5-(a-h),o.avail_out=c<g?257+(g-c):257-(c-g),ft.hold=et,ft.bits=nt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(e,o,s,a,h,c,d,g)=>{const b=g.bits;let _=0,$=0,j=0,_e=0,et=0,nt=0,it=0,lt=0,tt=0,st=0,rt,ot,ut,gt,pt,ht=null,ct;const at=new Uint16Array(MAXBITS+1),ft=new Uint16Array(MAXBITS+1);let mt=null,xt,bt,Et;for(_=0;_<=MAXBITS;_++)at[_]=0;for($=0;$<a;$++)at[o[s+$]]++;for(et=b,_e=MAXBITS;_e>=1&&at[_e]===0;_e--);if(et>_e&&(et=_e),_e===0)return h[c++]=1<<24|64<<16|0,h[c++]=1<<24|64<<16|0,g.bits=1,0;for(j=1;j<_e&&at[j]===0;j++);for(et<j&&(et=j),lt=1,_=1;_<=MAXBITS;_++)if(lt<<=1,lt-=at[_],lt<0)return-1;if(lt>0&&(e===CODES$1||_e!==1))return-1;for(ft[1]=0,_=1;_<MAXBITS;_++)ft[_+1]=ft[_]+at[_];for($=0;$<a;$++)o[s+$]!==0&&(d[ft[o[s+$]]++]=$);if(e===CODES$1?(ht=mt=d,ct=20):e===LENS$1?(ht=lbase,mt=lext,ct=257):(ht=dbase,mt=dext,ct=0),st=0,$=0,_=j,pt=c,nt=et,it=0,ut=-1,tt=1<<et,gt=tt-1,e===LENS$1&&tt>ENOUGH_LENS$1||e===DISTS$1&&tt>ENOUGH_DISTS$1)return 1;for(;;){xt=_-it,d[$]+1<ct?(bt=0,Et=d[$]):d[$]>=ct?(bt=mt[d[$]-ct],Et=ht[d[$]-ct]):(bt=32+64,Et=0),rt=1<<_-it,ot=1<<nt,j=ot;do ot-=rt,h[pt+(st>>it)+ot]=xt<<24|bt<<16|Et|0;while(ot!==0);for(rt=1<<_-1;st&rt;)rt>>=1;if(rt!==0?(st&=rt-1,st+=rt):st=0,$++,--at[_]===0){if(_===_e)break;_=o[s+d[$]]}if(_>et&&(st&gt)!==ut){for(it===0&&(it=et),pt+=j,nt=_-it,lt=1<<nt;nt+it<_e&&(lt-=at[nt+it],!(lt<=0));)nt++,lt<<=1;if(tt+=1<<nt,e===LENS$1&&tt>ENOUGH_LENS$1||e===DISTS$1&&tt>ENOUGH_DISTS$1)return 1;ut=st&gt,h[ut]=et<<24|nt<<16|pt-c|0}}return st!==0&&(h[pt+st]=_-it<<24|64<<16|0),g.bits=et,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=e=>{if(!e)return 1;const o=e.state;return!o||o.strm!==e||o.mode<HEAD||o.mode>SYNC?1:0},inflateResetKeep=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const o=e.state;return e.total_in=e.total_out=o.total=0,e.msg="",o.wrap&&(e.adler=o.wrap&1),o.mode=HEAD,o.last=0,o.havedict=0,o.flags=-1,o.dmax=32768,o.head=null,o.hold=0,o.bits=0,o.lencode=o.lendyn=new Int32Array(ENOUGH_LENS),o.distcode=o.distdyn=new Int32Array(ENOUGH_DISTS),o.sane=1,o.back=-1,Z_OK$1},inflateReset=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const o=e.state;return o.wsize=0,o.whave=0,o.wnext=0,inflateResetKeep(e)},inflateReset2=(e,o)=>{let s;if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const a=e.state;return o<0?(s=0,o=-o):(s=(o>>4)+5,o<48&&(o&=15)),o&&(o<8||o>15)?Z_STREAM_ERROR$1:(a.window!==null&&a.wbits!==o&&(a.window=null),a.wrap=s,a.wbits=o,inflateReset(e))},inflateInit2=(e,o)=>{if(!e)return Z_STREAM_ERROR$1;const s=new InflateState;e.state=s,s.strm=e,s.window=null,s.mode=HEAD;const a=inflateReset2(e,o);return a!==Z_OK$1&&(e.state=null),a},inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let o=0;for(;o<144;)e.lens[o++]=8;for(;o<256;)e.lens[o++]=9;for(;o<280;)e.lens[o++]=7;for(;o<288;)e.lens[o++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),o=0;o<32;)e.lens[o++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=(e,o,s,a)=>{let h;const c=e.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),a>=c.wsize?(c.window.set(o.subarray(s-c.wsize,s),0),c.wnext=0,c.whave=c.wsize):(h=c.wsize-c.wnext,h>a&&(h=a),c.window.set(o.subarray(s-a,s-a+h),c.wnext),a-=h,a?(c.window.set(o.subarray(s-a,s),0),c.wnext=a,c.whave=c.wsize):(c.wnext+=h,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=h))),0},inflate$2=(e,o)=>{let s,a,h,c,d,g,b,_,$,j,_e,et,nt,it,lt=0,tt,st,rt,ot,ut,gt,pt,ht;const ct=new Uint8Array(4);let at,ft;const mt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;s=e.state,s.mode===TYPE&&(s.mode=TYPEDO),d=e.next_out,h=e.output,b=e.avail_out,c=e.next_in,a=e.input,g=e.avail_in,_=s.hold,$=s.bits,j=g,_e=b,ht=Z_OK$1;e:for(;;)switch(s.mode){case HEAD:if(s.wrap===0){s.mode=TYPEDO;break}for(;$<16;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(s.wrap&2&&_===35615){s.wbits===0&&(s.wbits=15),s.check=0,ct[0]=_&255,ct[1]=_>>>8&255,s.check=crc32_1(s.check,ct,2,0),_=0,$=0,s.mode=FLAGS;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((_&255)<<8)+(_>>8))%31){e.msg="incorrect header check",s.mode=BAD;break}if((_&15)!==Z_DEFLATED){e.msg="unknown compression method",s.mode=BAD;break}if(_>>>=4,$-=4,pt=(_&15)+8,s.wbits===0&&(s.wbits=pt),pt>15||pt>s.wbits){e.msg="invalid window size",s.mode=BAD;break}s.dmax=1<<s.wbits,s.flags=0,e.adler=s.check=1,s.mode=_&512?DICTID:TYPE,_=0,$=0;break;case FLAGS:for(;$<16;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(s.flags=_,(s.flags&255)!==Z_DEFLATED){e.msg="unknown compression method",s.mode=BAD;break}if(s.flags&57344){e.msg="unknown header flags set",s.mode=BAD;break}s.head&&(s.head.text=_>>8&1),s.flags&512&&s.wrap&4&&(ct[0]=_&255,ct[1]=_>>>8&255,s.check=crc32_1(s.check,ct,2,0)),_=0,$=0,s.mode=TIME;case TIME:for(;$<32;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}s.head&&(s.head.time=_),s.flags&512&&s.wrap&4&&(ct[0]=_&255,ct[1]=_>>>8&255,ct[2]=_>>>16&255,ct[3]=_>>>24&255,s.check=crc32_1(s.check,ct,4,0)),_=0,$=0,s.mode=OS;case OS:for(;$<16;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}s.head&&(s.head.xflags=_&255,s.head.os=_>>8),s.flags&512&&s.wrap&4&&(ct[0]=_&255,ct[1]=_>>>8&255,s.check=crc32_1(s.check,ct,2,0)),_=0,$=0,s.mode=EXLEN;case EXLEN:if(s.flags&1024){for(;$<16;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}s.length=_,s.head&&(s.head.extra_len=_),s.flags&512&&s.wrap&4&&(ct[0]=_&255,ct[1]=_>>>8&255,s.check=crc32_1(s.check,ct,2,0)),_=0,$=0}else s.head&&(s.head.extra=null);s.mode=EXTRA;case EXTRA:if(s.flags&1024&&(et=s.length,et>g&&(et=g),et&&(s.head&&(pt=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(a.subarray(c,c+et),pt)),s.flags&512&&s.wrap&4&&(s.check=crc32_1(s.check,a,et,c)),g-=et,c+=et,s.length-=et),s.length))break e;s.length=0,s.mode=NAME;case NAME:if(s.flags&2048){if(g===0)break e;et=0;do pt=a[c+et++],s.head&&pt&&s.length<65536&&(s.head.name+=String.fromCharCode(pt));while(pt&&et<g);if(s.flags&512&&s.wrap&4&&(s.check=crc32_1(s.check,a,et,c)),g-=et,c+=et,pt)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=COMMENT;case COMMENT:if(s.flags&4096){if(g===0)break e;et=0;do pt=a[c+et++],s.head&&pt&&s.length<65536&&(s.head.comment+=String.fromCharCode(pt));while(pt&&et<g);if(s.flags&512&&s.wrap&4&&(s.check=crc32_1(s.check,a,et,c)),g-=et,c+=et,pt)break e}else s.head&&(s.head.comment=null);s.mode=HCRC;case HCRC:if(s.flags&512){for(;$<16;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(s.wrap&4&&_!==(s.check&65535)){e.msg="header crc mismatch",s.mode=BAD;break}_=0,$=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=TYPE;break;case DICTID:for(;$<32;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}e.adler=s.check=zswap32(_),_=0,$=0,s.mode=DICT;case DICT:if(s.havedict===0)return e.next_out=d,e.avail_out=b,e.next_in=c,e.avail_in=g,s.hold=_,s.bits=$,Z_NEED_DICT$1;e.adler=s.check=1,s.mode=TYPE;case TYPE:if(o===Z_BLOCK||o===Z_TREES)break e;case TYPEDO:if(s.last){_>>>=$&7,$-=$&7,s.mode=CHECK;break}for(;$<3;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}switch(s.last=_&1,_>>>=1,$-=1,_&3){case 0:s.mode=STORED;break;case 1:if(fixedtables(s),s.mode=LEN_,o===Z_TREES){_>>>=2,$-=2;break e}break;case 2:s.mode=TABLE;break;case 3:e.msg="invalid block type",s.mode=BAD}_>>>=2,$-=2;break;case STORED:for(_>>>=$&7,$-=$&7;$<32;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if((_&65535)!==(_>>>16^65535)){e.msg="invalid stored block lengths",s.mode=BAD;break}if(s.length=_&65535,_=0,$=0,s.mode=COPY_,o===Z_TREES)break e;case COPY_:s.mode=COPY;case COPY:if(et=s.length,et){if(et>g&&(et=g),et>b&&(et=b),et===0)break e;h.set(a.subarray(c,c+et),d),g-=et,c+=et,b-=et,d+=et,s.length-=et;break}s.mode=TYPE;break;case TABLE:for(;$<14;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(s.nlen=(_&31)+257,_>>>=5,$-=5,s.ndist=(_&31)+1,_>>>=5,$-=5,s.ncode=(_&15)+4,_>>>=4,$-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=BAD;break}s.have=0,s.mode=LENLENS;case LENLENS:for(;s.have<s.ncode;){for(;$<3;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}s.lens[mt[s.have++]]=_&7,_>>>=3,$-=3}for(;s.have<19;)s.lens[mt[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,at={bits:s.lenbits},ht=inftrees(CODES,s.lens,0,19,s.lencode,0,s.work,at),s.lenbits=at.bits,ht){e.msg="invalid code lengths set",s.mode=BAD;break}s.have=0,s.mode=CODELENS;case CODELENS:for(;s.have<s.nlen+s.ndist;){for(;lt=s.lencode[_&(1<<s.lenbits)-1],tt=lt>>>24,st=lt>>>16&255,rt=lt&65535,!(tt<=$);){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(rt<16)_>>>=tt,$-=tt,s.lens[s.have++]=rt;else{if(rt===16){for(ft=tt+2;$<ft;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(_>>>=tt,$-=tt,s.have===0){e.msg="invalid bit length repeat",s.mode=BAD;break}pt=s.lens[s.have-1],et=3+(_&3),_>>>=2,$-=2}else if(rt===17){for(ft=tt+3;$<ft;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}_>>>=tt,$-=tt,pt=0,et=3+(_&7),_>>>=3,$-=3}else{for(ft=tt+7;$<ft;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}_>>>=tt,$-=tt,pt=0,et=11+(_&127),_>>>=7,$-=7}if(s.have+et>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=BAD;break}for(;et--;)s.lens[s.have++]=pt}}if(s.mode===BAD)break;if(s.lens[256]===0){e.msg="invalid code -- missing end-of-block",s.mode=BAD;break}if(s.lenbits=9,at={bits:s.lenbits},ht=inftrees(LENS,s.lens,0,s.nlen,s.lencode,0,s.work,at),s.lenbits=at.bits,ht){e.msg="invalid literal/lengths set",s.mode=BAD;break}if(s.distbits=6,s.distcode=s.distdyn,at={bits:s.distbits},ht=inftrees(DISTS,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,at),s.distbits=at.bits,ht){e.msg="invalid distances set",s.mode=BAD;break}if(s.mode=LEN_,o===Z_TREES)break e;case LEN_:s.mode=LEN;case LEN:if(g>=6&&b>=258){e.next_out=d,e.avail_out=b,e.next_in=c,e.avail_in=g,s.hold=_,s.bits=$,inffast(e,_e),d=e.next_out,h=e.output,b=e.avail_out,c=e.next_in,a=e.input,g=e.avail_in,_=s.hold,$=s.bits,s.mode===TYPE&&(s.back=-1);break}for(s.back=0;lt=s.lencode[_&(1<<s.lenbits)-1],tt=lt>>>24,st=lt>>>16&255,rt=lt&65535,!(tt<=$);){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(st&&!(st&240)){for(ot=tt,ut=st,gt=rt;lt=s.lencode[gt+((_&(1<<ot+ut)-1)>>ot)],tt=lt>>>24,st=lt>>>16&255,rt=lt&65535,!(ot+tt<=$);){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}_>>>=ot,$-=ot,s.back+=ot}if(_>>>=tt,$-=tt,s.back+=tt,s.length=rt,st===0){s.mode=LIT;break}if(st&32){s.back=-1,s.mode=TYPE;break}if(st&64){e.msg="invalid literal/length code",s.mode=BAD;break}s.extra=st&15,s.mode=LENEXT;case LENEXT:if(s.extra){for(ft=s.extra;$<ft;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}s.length+=_&(1<<s.extra)-1,_>>>=s.extra,$-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=DIST;case DIST:for(;lt=s.distcode[_&(1<<s.distbits)-1],tt=lt>>>24,st=lt>>>16&255,rt=lt&65535,!(tt<=$);){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(!(st&240)){for(ot=tt,ut=st,gt=rt;lt=s.distcode[gt+((_&(1<<ot+ut)-1)>>ot)],tt=lt>>>24,st=lt>>>16&255,rt=lt&65535,!(ot+tt<=$);){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}_>>>=ot,$-=ot,s.back+=ot}if(_>>>=tt,$-=tt,s.back+=tt,st&64){e.msg="invalid distance code",s.mode=BAD;break}s.offset=rt,s.extra=st&15,s.mode=DISTEXT;case DISTEXT:if(s.extra){for(ft=s.extra;$<ft;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}s.offset+=_&(1<<s.extra)-1,_>>>=s.extra,$-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=BAD;break}s.mode=MATCH;case MATCH:if(b===0)break e;if(et=_e-b,s.offset>et){if(et=s.offset-et,et>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=BAD;break}et>s.wnext?(et-=s.wnext,nt=s.wsize-et):nt=s.wnext-et,et>s.length&&(et=s.length),it=s.window}else it=h,nt=d-s.offset,et=s.length;et>b&&(et=b),b-=et,s.length-=et;do h[d++]=it[nt++];while(--et);s.length===0&&(s.mode=LEN);break;case LIT:if(b===0)break e;h[d++]=s.length,b--,s.mode=LEN;break;case CHECK:if(s.wrap){for(;$<32;){if(g===0)break e;g--,_|=a[c++]<<$,$+=8}if(_e-=b,e.total_out+=_e,s.total+=_e,s.wrap&4&&_e&&(e.adler=s.check=s.flags?crc32_1(s.check,h,_e,d-_e):adler32_1(s.check,h,_e,d-_e)),_e=b,s.wrap&4&&(s.flags?_:zswap32(_))!==s.check){e.msg="incorrect data check",s.mode=BAD;break}_=0,$=0}s.mode=LENGTH;case LENGTH:if(s.wrap&&s.flags){for(;$<32;){if(g===0)break e;g--,_+=a[c++]<<$,$+=8}if(s.wrap&4&&_!==(s.total&4294967295)){e.msg="incorrect length check",s.mode=BAD;break}_=0,$=0}s.mode=DONE;case DONE:ht=Z_STREAM_END$1;break e;case BAD:ht=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=d,e.avail_out=b,e.next_in=c,e.avail_in=g,s.hold=_,s.bits=$,(s.wsize||_e!==e.avail_out&&s.mode<BAD&&(s.mode<CHECK||o!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,_e-e.avail_out),j-=e.avail_in,_e-=e.avail_out,e.total_in+=j,e.total_out+=_e,s.total+=_e,s.wrap&4&&_e&&(e.adler=s.check=s.flags?crc32_1(s.check,h,_e,e.next_out-_e):adler32_1(s.check,h,_e,e.next_out-_e)),e.data_type=s.bits+(s.last?64:0)+(s.mode===TYPE?128:0)+(s.mode===LEN_||s.mode===COPY_?256:0),(j===0&&_e===0||o===Z_FINISH$1)&&ht===Z_OK$1&&(ht=Z_BUF_ERROR),ht},inflateEnd=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;let o=e.state;return o.window&&(o.window=null),e.state=null,Z_OK$1},inflateGetHeader=(e,o)=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const s=e.state;return s.wrap&2?(s.head=o,o.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(e,o)=>{const s=o.length;let a,h,c;return inflateStateCheck(e)||(a=e.state,a.wrap!==0&&a.mode!==DICT)?Z_STREAM_ERROR$1:a.mode===DICT&&(h=1,h=adler32_1(h,o,s,0),h!==a.check)?Z_DATA_ERROR$1:(c=updatewindow(e,o,s,s),c?(a.mode=MEM,Z_MEM_ERROR$1):(a.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const o=this.options;o.raw&&o.windowBits>=0&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),o.windowBits>=0&&o.windowBits<16&&!(e&&e.windowBits)&&(o.windowBits+=32),o.windowBits>15&&o.windowBits<48&&(o.windowBits&15||(o.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let s=inflate_1$2.inflateInit2(this.strm,o.windowBits);if(s!==Z_OK)throw new Error(messages[s]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=strings.string2buf(o.dictionary):toString$2.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(s=inflate_1$2.inflateSetDictionary(this.strm,o.dictionary),s!==Z_OK)))throw new Error(messages[s])}Inflate$1.prototype.push=function(e,o){const s=this.strm,a=this.options.chunkSize,h=this.options.dictionary;let c,d,g;if(this.ended)return!1;for(o===~~o?d=o:d=o===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(e)==="[object ArrayBuffer]"?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),c=inflate_1$2.inflate(s,d),c===Z_NEED_DICT&&h&&(c=inflate_1$2.inflateSetDictionary(s,h),c===Z_OK?c=inflate_1$2.inflate(s,d):c===Z_DATA_ERROR&&(c=Z_NEED_DICT));s.avail_in>0&&c===Z_STREAM_END&&s.state.wrap>0&&e[s.next_in]!==0;)inflate_1$2.inflateReset(s),c=inflate_1$2.inflate(s,d);switch(c){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(c),this.ended=!0,!1}if(g=s.avail_out,s.next_out&&(s.avail_out===0||c===Z_STREAM_END))if(this.options.to==="string"){let b=strings.utf8border(s.output,s.next_out),_=s.next_out-b,$=strings.buf2string(s.output,b);s.next_out=_,s.avail_out=a-_,_&&s.output.set(s.output.subarray(b,b+_),0),this.onData($)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(c===Z_OK&&g===0)){if(c===Z_STREAM_END)return c=inflate_1$2.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(e){this.chunks.push(e)};Inflate$1.prototype.onEnd=function(e){e===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function inflate$1(e,o){const s=new Inflate$1(o);if(s.push(e),s.err)throw s.msg||messages[s.err];return s.result}function inflateRaw$1(e,o){return o=o||{},o.raw=!0,inflate$1(e,o)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var deflate_1=deflate,Inflate_1=Inflate,inflate_1=inflate;const pngSignature=[137,80,78,71,13,10,26,10],crcTable=[];for(let e=0;e<256;e++){let o=e;for(let s=0;s<8;s++)o&1?o=3988292384^o>>>1:o=o>>>1;crcTable[e]=o}const initialCrc=4294967295;function updateCrc(e,o,s){let a=e;for(let h=0;h<s;h++)a=crcTable[(a^o[h])&255]^a>>>8;return a}function crc(e,o){return(updateCrc(initialCrc,e,o)^initialCrc)>>>0}var ColorType;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.GREYSCALE=0]="GREYSCALE",e[e.TRUECOLOUR=2]="TRUECOLOUR",e[e.INDEXED_COLOUR=3]="INDEXED_COLOUR",e[e.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",e[e.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(ColorType||(ColorType={}));var CompressionMethod;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.DEFLATE=0]="DEFLATE"})(CompressionMethod||(CompressionMethod={}));var FilterMethod;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.ADAPTIVE=0]="ADAPTIVE"})(FilterMethod||(FilterMethod={}));var InterlaceMethod;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.NO_INTERLACE=0]="NO_INTERLACE",e[e.ADAM7=1]="ADAM7"})(InterlaceMethod||(InterlaceMethod={}));const empty=new Uint8Array(0),NULL="\0",uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255;class PngDecoder extends IOBuffer$4{constructor(o,s={}){super(o);const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let o=0;o<pngSignature.length;o++)if(this.readUint8()!==pngSignature[o])throw new Error(`wrong PNG signature. Byte at ${o} should be ${pngSignature[o]}.`)}decodeChunk(){const o=this.readUint32(),s=this.readChars(4),a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(o);break;case"IDAT":this.decodeIDAT(o);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(o);break;case"iCCP":this.decodeiCCP(o);break;case"tEXt":this.decodetEXt(o);break;case"pHYs":this.decodepHYs();break;default:this.skip(o);break}if(this.offset-a!==o)throw new Error(`Length mismatch while decoding chunk ${s}`);if(this._checkCrc){const h=this.readUint32(),c=o+4,d=crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-c-4,c),c);if(d!==h)throw new Error(`CRC mismatch for chunk ${s}. Expected ${h}, found ${d}`)}else this.skip(4)}decodeIHDR(){const o=this._png;o.width=this.readUint32(),o.height=this.readUint32(),o.depth=checkBitDepth(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case ColorType.GREYSCALE:a=1;break;case ColorType.TRUECOLOUR:a=3;break;case ColorType.INDEXED_COLOUR:a=1;break;case ColorType.GREYSCALE_ALPHA:a=2;break;case ColorType.TRUECOLOUR_ALPHA:a=4;break;default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(o){if(o%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${o}`);const s=o/3;this._hasPalette=!0;const a=[];this._palette=a;for(let h=0;h<s;h++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(o){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,o)),this.skip(o)}decodetRNS(o){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(o%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${o}`);if(o/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${o/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(o/2);for(let s=0;s<o/2;s++)this._transparency[s]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(o>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${o} vs ${this._palette.length})`);let s=0;for(;s<o;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(o){let s="",a;for(;(a=this.readChar())!==NULL;)s+=a;const h=this.readUint8();if(h!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${h}`);const c=this.readBytes(o-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:inflate_1(c)}}decodetEXt(o){let s="",a;for(;(a=this.readChar())!==NULL;)s+=a;this._png.text[s]=this.readChars(o-s.length-1)}decodepHYs(){const o=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:o,y:s,unit:a}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const o=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this.decodeInterlaceNull(o);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(o){const s=this._png.height,a=this._png.channels*this._png.depth/8,h=this._png.width*a,c=new Uint8Array(this._png.height*h);let d=empty,g=0,b,_;for(let $=0;$<s;$++){switch(b=o.subarray(g+1,g+1+h),_=c.subarray($*h,($+1)*h),o[g]){case 0:unfilterNone(b,_,h);break;case 1:unfilterSub(b,_,h,a);break;case 2:unfilterUp(b,_,d,h);break;case 3:unfilterAverage(b,_,d,h,a);break;case 4:unfilterPaeth(b,_,d,h,a);break;default:throw new Error(`Unsupported filter: ${o[g]}`)}d=_,g+=h+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),this._png.depth===16){const $=new Uint16Array(c.buffer);if(osIsLittleEndian)for(let j=0;j<$.length;j++)$[j]=swap16($[j]);this._png.data=$}else this._png.data=c}}function unfilterNone(e,o,s){for(let a=0;a<s;a++)o[a]=e[a]}function unfilterSub(e,o,s,a){let h=0;for(;h<a;h++)o[h]=e[h];for(;h<s;h++)o[h]=e[h]+o[h-a]&255}function unfilterUp(e,o,s,a){let h=0;if(s.length===0)for(;h<a;h++)o[h]=e[h];else for(;h<a;h++)o[h]=e[h]+s[h]&255}function unfilterAverage(e,o,s,a,h){let c=0;if(s.length===0){for(;c<h;c++)o[c]=e[c];for(;c<a;c++)o[c]=e[c]+(o[c-h]>>1)&255}else{for(;c<h;c++)o[c]=e[c]+(s[c]>>1)&255;for(;c<a;c++)o[c]=e[c]+(o[c-h]+s[c]>>1)&255}}function unfilterPaeth(e,o,s,a,h){let c=0;if(s.length===0){for(;c<h;c++)o[c]=e[c];for(;c<a;c++)o[c]=e[c]+o[c-h]&255}else{for(;c<h;c++)o[c]=e[c]+s[c]&255;for(;c<a;c++)o[c]=e[c]+paethPredictor(o[c-h],s[c],s[c-h])&255}}function paethPredictor(e,o,s){const a=e+o-s,h=Math.abs(a-e),c=Math.abs(a-o),d=Math.abs(a-s);return h<=c&&h<=d?e:c<=d?o:s}function swap16(e){return(e&255)<<8|e>>8&255}function checkBitDepth(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer$4{constructor(o,s={}){super(),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...s.zlib},this._png=this._checkData(o),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(pngSignature)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(o){this.writeUint32(o.length),this.writeChars("IDAT"),this.writeBytes(o),this.writeCrc(o.length+4)}encodeData(){const{width:o,height:s,channels:a,depth:h,data:c}=this._png,d=a*o,g=new IOBuffer$4().setBigEndian();let b=0;for(let j=0;j<s;j++)if(g.writeByte(0),h===8)b=writeDataBytes(c,g,d,b);else if(h===16)b=writeDataUint16(c,g,d,b);else throw new Error("unreachable");const _=g.toArray(),$=deflate_1(_,this._zlibOptions);this.encodeIDAT($)}_checkData(o){const{colorType:s,channels:a,depth:h}=getColorType(o),c={width:checkInteger(o.width,"width"),height:checkInteger(o.height,"height"),channels:a,data:o.data,depth:h,text:{}};this._colorType=s;const d=c.width*c.height*a;if(c.data.length!==d)throw new RangeError(`wrong data size. Found ${c.data.length}, expected ${d}`);return c}writeCrc(o){this.writeUint32(crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-o,o),o))}}function checkInteger(e,o){if(Number.isInteger(e)&&e>0)return e;throw new TypeError(`${o} must be a positive integer`)}function getColorType(e){const{channels:o=4,depth:s=8}=e;if(o!==4&&o!==3&&o!==2&&o!==1)throw new RangeError(`unsupported number of channels: ${o}`);if(s!==8&&s!==16)throw new RangeError(`unsupported bit depth: ${s}`);const a={channels:o,depth:s,colorType:ColorType.UNKNOWN};switch(o){case 4:a.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:a.colorType=ColorType.TRUECOLOUR;break;case 1:a.colorType=ColorType.GREYSCALE;break;case 2:a.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return a}function writeDataBytes(e,o,s,a){for(let h=0;h<s;h++)o.writeByte(e[a++]);return a}function writeDataUint16(e,o,s,a){for(let h=0;h<s;h++)o.writeUint16(e[a++]);return a}var ResolutionUnitSpecifier;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(e,o){return new PngDecoder(e,o).decode()}function encodePng$1(e,o){return new PngEncoder(e,o).encode()}var encoder={exports:{}};(function(e){function o(a){var h=Math.floor,c=new Array(64),d=new Array(64),g=new Array(64),b=new Array(64),_,$,j,_e,et=new Array(65535),nt=new Array(65535),it=new Array(64),lt=new Array(64),tt=[],st=0,rt=7,ot=new Array(64),ut=new Array(64),gt=new Array(64),pt=new Array(256),ht=new Array(2048),ct,at=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ft=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],mt=[0,1,2,3,4,5,6,7,8,9,10,11],xt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],bt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Et=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Bt=[0,1,2,3,4,5,6,7,8,9,10,11],Nt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],vt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function St(_t){for(var Vt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Xt=0;Xt<64;Xt++){var Ht=h((Vt[Xt]*_t+50)/100);Ht<1?Ht=1:Ht>255&&(Ht=255),c[at[Xt]]=Ht}for(var Tt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],hn=0;hn<64;hn++){var on=h((Tt[hn]*_t+50)/100);on<1?on=1:on>255&&(on=255),d[at[hn]]=on}for(var jt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Yt=0,Kt=0;Kt<8;Kt++)for(var Ut=0;Ut<8;Ut++)g[Yt]=1/(c[at[Yt]]*jt[Kt]*jt[Ut]*8),b[Yt]=1/(d[at[Yt]]*jt[Kt]*jt[Ut]*8),Yt++}function kt(_t,Vt){for(var Xt=0,Ht=0,Tt=new Array,hn=1;hn<=16;hn++){for(var on=1;on<=_t[hn];on++)Tt[Vt[Ht]]=[],Tt[Vt[Ht]][0]=Xt,Tt[Vt[Ht]][1]=hn,Ht++,Xt++;Xt*=2}return Tt}function $t(){_=kt(ft,mt),$=kt(Et,Bt),j=kt(xt,bt),_e=kt(Nt,vt)}function Pt(){for(var _t=1,Vt=2,Xt=1;Xt<=15;Xt++){for(var Ht=_t;Ht<Vt;Ht++)nt[32767+Ht]=Xt,et[32767+Ht]=[],et[32767+Ht][1]=Xt,et[32767+Ht][0]=Ht;for(var Tt=-(Vt-1);Tt<=-_t;Tt++)nt[32767+Tt]=Xt,et[32767+Tt]=[],et[32767+Tt][1]=Xt,et[32767+Tt][0]=Vt-1+Tt;_t<<=1,Vt<<=1}}function It(){for(var _t=0;_t<256;_t++)ht[_t]=19595*_t,ht[_t+256>>0]=38470*_t,ht[_t+512>>0]=7471*_t+32768,ht[_t+768>>0]=-11059*_t,ht[_t+1024>>0]=-21709*_t,ht[_t+1280>>0]=32768*_t+8421375,ht[_t+1536>>0]=-27439*_t,ht[_t+1792>>0]=-5329*_t}function Dt(_t){for(var Vt=_t[0],Xt=_t[1]-1;Xt>=0;)Vt&1<<Xt&&(st|=1<<rt),Xt--,rt--,rt<0&&(st==255?(At(255),At(0)):At(st),rt=7,st=0)}function At(_t){tt.push(_t)}function Rt(_t){At(_t>>8&255),At(_t&255)}function Ot(_t,Vt){var Xt,Ht,Tt,hn,on,jt,Yt,Kt,Ut=0,Jt,an=8,Wt=64;for(Jt=0;Jt<an;++Jt){Xt=_t[Ut],Ht=_t[Ut+1],Tt=_t[Ut+2],hn=_t[Ut+3],on=_t[Ut+4],jt=_t[Ut+5],Yt=_t[Ut+6],Kt=_t[Ut+7];var ln=Xt+Kt,sn=Xt-Kt,fn=Ht+Yt,gn=Ht-Yt,dn=Tt+jt,_n=Tt-jt,Rn=hn+on,$n=hn-on,bn=ln+Rn,Tn=ln-Rn,Mn=fn+dn,kn=fn-dn;_t[Ut]=bn+Mn,_t[Ut+4]=bn-Mn;var In=(kn+Tn)*.707106781;_t[Ut+2]=Tn+In,_t[Ut+6]=Tn-In,bn=$n+_n,Mn=_n+gn,kn=gn+sn;var Cn=(bn-kn)*.382683433,dt=.5411961*bn+Cn,wt=1.306562965*kn+Cn,yt=Mn*.707106781,Mt=sn+yt,Ft=sn-yt;_t[Ut+5]=Ft+dt,_t[Ut+3]=Ft-dt,_t[Ut+1]=Mt+wt,_t[Ut+7]=Mt-wt,Ut+=8}for(Ut=0,Jt=0;Jt<an;++Jt){Xt=_t[Ut],Ht=_t[Ut+8],Tt=_t[Ut+16],hn=_t[Ut+24],on=_t[Ut+32],jt=_t[Ut+40],Yt=_t[Ut+48],Kt=_t[Ut+56];var zt=Xt+Kt,pn=Xt-Kt,cn=Ht+Yt,mn=Ht-Yt,yn=Tt+jt,Bn=Tt-jt,xn=hn+on,Dn=hn-on,wn=zt+xn,En=zt-xn,vn=cn+yn,An=cn-yn;_t[Ut]=wn+vn,_t[Ut+32]=wn-vn;var Pn=(An+En)*.707106781;_t[Ut+16]=En+Pn,_t[Ut+48]=En-Pn,wn=Dn+Bn,vn=Bn+mn,An=mn+pn;var Sn=(wn-An)*.382683433,Fn=.5411961*wn+Sn,On=1.306562965*An+Sn,Ln=vn*.707106781,jn=pn+Ln,Un=pn-Ln;_t[Ut+40]=Un+Fn,_t[Ut+24]=Un-Fn,_t[Ut+8]=jn+On,_t[Ut+56]=jn-On,Ut++}var Nn;for(Jt=0;Jt<Wt;++Jt)Nn=_t[Jt]*Vt[Jt],it[Jt]=Nn>0?Nn+.5|0:Nn-.5|0;return it}function en(){Rt(65504),Rt(16),At(74),At(70),At(73),At(70),At(0),At(1),At(1),At(0),Rt(1),Rt(1),At(0),At(0)}function Gt(_t){if(_t){Rt(65505),_t[0]===69&&_t[1]===120&&_t[2]===105&&_t[3]===102?Rt(_t.length+2):(Rt(_t.length+5+2),At(69),At(120),At(105),At(102),At(0));for(var Vt=0;Vt<_t.length;Vt++)At(_t[Vt])}}function Qt(_t,Vt){Rt(65472),Rt(17),At(8),Rt(Vt),Rt(_t),At(3),At(1),At(17),At(0),At(2),At(17),At(1),At(3),At(17),At(1)}function tn(){Rt(65499),Rt(132),At(0);for(var _t=0;_t<64;_t++)At(c[_t]);At(1);for(var Vt=0;Vt<64;Vt++)At(d[Vt])}function un(){Rt(65476),Rt(418),At(0);for(var _t=0;_t<16;_t++)At(ft[_t+1]);for(var Vt=0;Vt<=11;Vt++)At(mt[Vt]);At(16);for(var Xt=0;Xt<16;Xt++)At(xt[Xt+1]);for(var Ht=0;Ht<=161;Ht++)At(bt[Ht]);At(1);for(var Tt=0;Tt<16;Tt++)At(Et[Tt+1]);for(var hn=0;hn<=11;hn++)At(Bt[hn]);At(17);for(var on=0;on<16;on++)At(Nt[on+1]);for(var jt=0;jt<=161;jt++)At(vt[jt])}function nn(_t){typeof _t>"u"||_t.constructor!==Array||_t.forEach(Vt=>{if(typeof Vt=="string"){Rt(65534);var Xt=Vt.length;Rt(Xt+2);var Ht;for(Ht=0;Ht<Xt;Ht++)At(Vt.charCodeAt(Ht))}})}function Lt(){Rt(65498),Rt(12),At(3),At(1),At(0),At(2),At(17),At(3),At(17),At(0),At(63),At(0)}function Ct(_t,Vt,Xt,Ht,Tt){for(var hn=Tt[0],on=Tt[240],jt,Yt=16,Kt=63,Ut=64,Jt=Ot(_t,Vt),an=0;an<Ut;++an)lt[at[an]]=Jt[an];var Wt=lt[0]-Xt;Xt=lt[0],Wt==0?Dt(Ht[0]):(jt=32767+Wt,Dt(Ht[nt[jt]]),Dt(et[jt]));for(var ln=63;ln>0&&lt[ln]==0;ln--);if(ln==0)return Dt(hn),Xt;for(var sn=1,fn;sn<=ln;){for(var gn=sn;lt[sn]==0&&sn<=ln;++sn);var dn=sn-gn;if(dn>=Yt){fn=dn>>4;for(var _n=1;_n<=fn;++_n)Dt(on);dn=dn&15}jt=32767+lt[sn],Dt(Tt[(dn<<4)+nt[jt]]),Dt(et[jt]),sn++}return ln!=Kt&&Dt(hn),Xt}function rn(){for(var _t=String.fromCharCode,Vt=0;Vt<256;Vt++)pt[Vt]=_t(Vt)}this.encode=function(_t,Vt){new Date().getTime(),Vt&&Zt(Vt),tt=new Array,st=0,rt=7,Rt(65496),en(),nn(_t.comments),Gt(_t.exifBuffer),tn(),Qt(_t.width,_t.height),un(),Lt();var Xt=0,Ht=0,Tt=0;st=0,rt=7,this.encode.displayName="_encode_";for(var hn=_t.data,on=_t.width,jt=_t.height,Yt=on*4,Kt,Ut=0,Jt,an,Wt,ln,sn,fn,gn,dn;Ut<jt;){for(Kt=0;Kt<Yt;){for(ln=Yt*Ut+Kt,sn=ln,fn=-1,gn=0,dn=0;dn<64;dn++)gn=dn>>3,fn=(dn&7)*4,sn=ln+gn*Yt+fn,Ut+gn>=jt&&(sn-=Yt*(Ut+1+gn-jt)),Kt+fn>=Yt&&(sn-=Kt+fn-Yt+4),Jt=hn[sn++],an=hn[sn++],Wt=hn[sn++],ot[dn]=(ht[Jt]+ht[an+256>>0]+ht[Wt+512>>0]>>16)-128,ut[dn]=(ht[Jt+768>>0]+ht[an+1024>>0]+ht[Wt+1280>>0]>>16)-128,gt[dn]=(ht[Jt+1280>>0]+ht[an+1536>>0]+ht[Wt+1792>>0]>>16)-128;Xt=Ct(ot,g,Xt,_,j),Ht=Ct(ut,b,Ht,$,_e),Tt=Ct(gt,b,Tt,$,_e),Kt+=32}Ut+=8}if(rt>=0){var _n=[];_n[1]=rt+1,_n[0]=(1<<rt+1)-1,Dt(_n)}return Rt(65497),Buffer.from(tt)};function Zt(_t){if(_t<=0&&(_t=1),_t>100&&(_t=100),ct!=_t){var Vt=0;_t<50?Vt=Math.floor(5e3/_t):Vt=Math.floor(200-_t*2),St(Vt),ct=_t}}function qt(){var _t=new Date().getTime();a||(a=50),rn(),$t(),Pt(),It(),Zt(a),new Date().getTime()-_t}qt()}e.exports=s;function s(a,h){typeof h>"u"&&(h=50);var c=new o(h),d=c.encode(a,h);return{data:d,width:a.width,height:a.height}}})(encoder);var encoderExports=encoder.exports,decoder={exports:{}};(function(e){var o=function(){var h=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c=4017,d=799,g=3406,b=2276,_=1567,$=3784,j=5793,_e=2896;function et(){}function nt(ut,gt){for(var pt=0,ht=[],ct,at,ft=16;ft>0&&!ut[ft-1];)ft--;ht.push({children:[],index:0});var mt=ht[0],xt;for(ct=0;ct<ft;ct++){for(at=0;at<ut[ct];at++){for(mt=ht.pop(),mt.children[mt.index]=gt[pt];mt.index>0;){if(ht.length===0)throw new Error("Could not recreate Huffman Table");mt=ht.pop()}for(mt.index++,ht.push(mt);ht.length<=ct;)ht.push(xt={children:[],index:0}),mt.children[mt.index]=xt.children,mt=xt;pt++}ct+1<ft&&(ht.push(xt={children:[],index:0}),mt.children[mt.index]=xt.children,mt=xt)}return ht[0].children}function it(ut,gt,pt,ht,ct,at,ft,mt,xt,bt){pt.precision,pt.samplesPerLine,pt.scanLines;var Et=pt.mcusPerLine,Bt=pt.progressive;pt.maxH,pt.maxV;var Nt=gt,vt=0,St=0;function kt(){if(St>0)return St--,vt>>St&1;if(vt=ut[gt++],vt==255){var jt=ut[gt++];if(jt)throw new Error("unexpected marker: "+(vt<<8|jt).toString(16))}return St=7,vt>>>7}function $t(jt){for(var Yt=jt,Kt;(Kt=kt())!==null;){if(Yt=Yt[Kt],typeof Yt=="number")return Yt;if(typeof Yt!="object")throw new Error("invalid huffman sequence")}return null}function Pt(jt){for(var Yt=0;jt>0;){var Kt=kt();if(Kt===null)return;Yt=Yt<<1|Kt,jt--}return Yt}function It(jt){var Yt=Pt(jt);return Yt>=1<<jt-1?Yt:Yt+(-1<<jt)+1}function Dt(jt,Yt){var Kt=$t(jt.huffmanTableDC),Ut=Kt===0?0:It(Kt);Yt[0]=jt.pred+=Ut;for(var Jt=1;Jt<64;){var an=$t(jt.huffmanTableAC),Wt=an&15,ln=an>>4;if(Wt===0){if(ln<15)break;Jt+=16;continue}Jt+=ln;var sn=h[Jt];Yt[sn]=It(Wt),Jt++}}function At(jt,Yt){var Kt=$t(jt.huffmanTableDC),Ut=Kt===0?0:It(Kt)<<xt;Yt[0]=jt.pred+=Ut}function Rt(jt,Yt){Yt[0]|=kt()<<xt}var Ot=0;function en(jt,Yt){if(Ot>0){Ot--;return}for(var Kt=at,Ut=ft;Kt<=Ut;){var Jt=$t(jt.huffmanTableAC),an=Jt&15,Wt=Jt>>4;if(an===0){if(Wt<15){Ot=Pt(Wt)+(1<<Wt)-1;break}Kt+=16;continue}Kt+=Wt;var ln=h[Kt];Yt[ln]=It(an)*(1<<xt),Kt++}}var Gt=0,Qt;function tn(jt,Yt){for(var Kt=at,Ut=ft,Jt=0;Kt<=Ut;){var an=h[Kt],Wt=Yt[an]<0?-1:1;switch(Gt){case 0:var ln=$t(jt.huffmanTableAC),sn=ln&15,Jt=ln>>4;if(sn===0)Jt<15?(Ot=Pt(Jt)+(1<<Jt),Gt=4):(Jt=16,Gt=1);else{if(sn!==1)throw new Error("invalid ACn encoding");Qt=It(sn),Gt=Jt?2:3}continue;case 1:case 2:Yt[an]?Yt[an]+=(kt()<<xt)*Wt:(Jt--,Jt===0&&(Gt=Gt==2?3:0));break;case 3:Yt[an]?Yt[an]+=(kt()<<xt)*Wt:(Yt[an]=Qt<<xt,Gt=0);break;case 4:Yt[an]&&(Yt[an]+=(kt()<<xt)*Wt);break}Kt++}Gt===4&&(Ot--,Ot===0&&(Gt=0))}function un(jt,Yt,Kt,Ut,Jt){var an=Kt/Et|0,Wt=Kt%Et,ln=an*jt.v+Ut,sn=Wt*jt.h+Jt;jt.blocks[ln]===void 0&&bt.tolerantDecoding||Yt(jt,jt.blocks[ln][sn])}function nn(jt,Yt,Kt){var Ut=Kt/jt.blocksPerLine|0,Jt=Kt%jt.blocksPerLine;jt.blocks[Ut]===void 0&&bt.tolerantDecoding||Yt(jt,jt.blocks[Ut][Jt])}var Lt=ht.length,Ct,rn,Zt,qt,_t,Vt;Bt?at===0?Vt=mt===0?At:Rt:Vt=mt===0?en:tn:Vt=Dt;var Xt=0,Ht,Tt;Lt==1?Tt=ht[0].blocksPerLine*ht[0].blocksPerColumn:Tt=Et*pt.mcusPerColumn,ct||(ct=Tt);for(var hn,on;Xt<Tt;){for(rn=0;rn<Lt;rn++)ht[rn].pred=0;if(Ot=0,Lt==1)for(Ct=ht[0],_t=0;_t<ct;_t++)nn(Ct,Vt,Xt),Xt++;else for(_t=0;_t<ct;_t++){for(rn=0;rn<Lt;rn++)for(Ct=ht[rn],hn=Ct.h,on=Ct.v,Zt=0;Zt<on;Zt++)for(qt=0;qt<hn;qt++)un(Ct,Vt,Xt,Zt,qt);if(Xt++,Xt===Tt)break}if(Xt===Tt)do{if(ut[gt]===255&&ut[gt+1]!==0)break;gt+=1}while(gt<ut.length-2);if(St=0,Ht=ut[gt]<<8|ut[gt+1],Ht<65280)throw new Error("marker was not found");if(Ht>=65488&&Ht<=65495)gt+=2;else break}return gt-Nt}function lt(ut,gt){var pt=[],ht=gt.blocksPerLine,ct=gt.blocksPerColumn,at=ht<<3,ft=new Int32Array(64),mt=new Uint8Array(64);function xt(Pt,It,Dt){var At=gt.quantizationTable,Rt,Ot,en,Gt,Qt,tn,un,nn,Lt,Ct=Dt,rn;for(rn=0;rn<64;rn++)Ct[rn]=Pt[rn]*At[rn];for(rn=0;rn<8;++rn){var Zt=8*rn;if(Ct[1+Zt]==0&&Ct[2+Zt]==0&&Ct[3+Zt]==0&&Ct[4+Zt]==0&&Ct[5+Zt]==0&&Ct[6+Zt]==0&&Ct[7+Zt]==0){Lt=j*Ct[0+Zt]+512>>10,Ct[0+Zt]=Lt,Ct[1+Zt]=Lt,Ct[2+Zt]=Lt,Ct[3+Zt]=Lt,Ct[4+Zt]=Lt,Ct[5+Zt]=Lt,Ct[6+Zt]=Lt,Ct[7+Zt]=Lt;continue}Rt=j*Ct[0+Zt]+128>>8,Ot=j*Ct[4+Zt]+128>>8,en=Ct[2+Zt],Gt=Ct[6+Zt],Qt=_e*(Ct[1+Zt]-Ct[7+Zt])+128>>8,nn=_e*(Ct[1+Zt]+Ct[7+Zt])+128>>8,tn=Ct[3+Zt]<<4,un=Ct[5+Zt]<<4,Lt=Rt-Ot+1>>1,Rt=Rt+Ot+1>>1,Ot=Lt,Lt=en*$+Gt*_+128>>8,en=en*_-Gt*$+128>>8,Gt=Lt,Lt=Qt-un+1>>1,Qt=Qt+un+1>>1,un=Lt,Lt=nn+tn+1>>1,tn=nn-tn+1>>1,nn=Lt,Lt=Rt-Gt+1>>1,Rt=Rt+Gt+1>>1,Gt=Lt,Lt=Ot-en+1>>1,Ot=Ot+en+1>>1,en=Lt,Lt=Qt*b+nn*g+2048>>12,Qt=Qt*g-nn*b+2048>>12,nn=Lt,Lt=tn*d+un*c+2048>>12,tn=tn*c-un*d+2048>>12,un=Lt,Ct[0+Zt]=Rt+nn,Ct[7+Zt]=Rt-nn,Ct[1+Zt]=Ot+un,Ct[6+Zt]=Ot-un,Ct[2+Zt]=en+tn,Ct[5+Zt]=en-tn,Ct[3+Zt]=Gt+Qt,Ct[4+Zt]=Gt-Qt}for(rn=0;rn<8;++rn){var qt=rn;if(Ct[8+qt]==0&&Ct[16+qt]==0&&Ct[24+qt]==0&&Ct[32+qt]==0&&Ct[40+qt]==0&&Ct[48+qt]==0&&Ct[56+qt]==0){Lt=j*Dt[rn+0]+8192>>14,Ct[0+qt]=Lt,Ct[8+qt]=Lt,Ct[16+qt]=Lt,Ct[24+qt]=Lt,Ct[32+qt]=Lt,Ct[40+qt]=Lt,Ct[48+qt]=Lt,Ct[56+qt]=Lt;continue}Rt=j*Ct[0+qt]+2048>>12,Ot=j*Ct[32+qt]+2048>>12,en=Ct[16+qt],Gt=Ct[48+qt],Qt=_e*(Ct[8+qt]-Ct[56+qt])+2048>>12,nn=_e*(Ct[8+qt]+Ct[56+qt])+2048>>12,tn=Ct[24+qt],un=Ct[40+qt],Lt=Rt-Ot+1>>1,Rt=Rt+Ot+1>>1,Ot=Lt,Lt=en*$+Gt*_+2048>>12,en=en*_-Gt*$+2048>>12,Gt=Lt,Lt=Qt-un+1>>1,Qt=Qt+un+1>>1,un=Lt,Lt=nn+tn+1>>1,tn=nn-tn+1>>1,nn=Lt,Lt=Rt-Gt+1>>1,Rt=Rt+Gt+1>>1,Gt=Lt,Lt=Ot-en+1>>1,Ot=Ot+en+1>>1,en=Lt,Lt=Qt*b+nn*g+2048>>12,Qt=Qt*g-nn*b+2048>>12,nn=Lt,Lt=tn*d+un*c+2048>>12,tn=tn*c-un*d+2048>>12,un=Lt,Ct[0+qt]=Rt+nn,Ct[56+qt]=Rt-nn,Ct[8+qt]=Ot+un,Ct[48+qt]=Ot-un,Ct[16+qt]=en+tn,Ct[40+qt]=en-tn,Ct[24+qt]=Gt+Qt,Ct[32+qt]=Gt-Qt}for(rn=0;rn<64;++rn){var _t=128+(Ct[rn]+8>>4);It[rn]=_t<0?0:_t>255?255:_t}}ot(at*ct*8);for(var bt,Et,Bt=0;Bt<ct;Bt++){var Nt=Bt<<3;for(bt=0;bt<8;bt++)pt.push(new Uint8Array(at));for(var vt=0;vt<ht;vt++){xt(gt.blocks[Bt][vt],mt,ft);var St=0,kt=vt<<3;for(Et=0;Et<8;Et++){var $t=pt[Nt+Et];for(bt=0;bt<8;bt++)$t[kt+bt]=mt[St++]}}}return pt}function tt(ut){return ut<0?0:ut>255?255:ut}et.prototype={load:function(gt){var pt=new XMLHttpRequest;pt.open("GET",gt,!0),pt.responseType="arraybuffer",pt.onload=(function(){var ht=new Uint8Array(pt.response||pt.mozResponseArrayBuffer);this.parse(ht),this.onload&&this.onload()}).bind(this),pt.send(null)},parse:function(gt){var pt=this.opts.maxResolutionInMP*1e3*1e3,ht=0;gt.length;function ct(){var Wt=gt[ht]<<8|gt[ht+1];return ht+=2,Wt}function at(){var Wt=ct(),ln=gt.subarray(ht,ht+Wt-2);return ht+=ln.length,ln}function ft(Wt){var ln=1,sn=1,fn,gn;for(gn in Wt.components)Wt.components.hasOwnProperty(gn)&&(fn=Wt.components[gn],ln<fn.h&&(ln=fn.h),sn<fn.v&&(sn=fn.v));var dn=Math.ceil(Wt.samplesPerLine/8/ln),_n=Math.ceil(Wt.scanLines/8/sn);for(gn in Wt.components)if(Wt.components.hasOwnProperty(gn)){fn=Wt.components[gn];var Rn=Math.ceil(Math.ceil(Wt.samplesPerLine/8)*fn.h/ln),$n=Math.ceil(Math.ceil(Wt.scanLines/8)*fn.v/sn),bn=dn*fn.h,Tn=_n*fn.v,Mn=Tn*bn,kn=[];ot(Mn*256);for(var In=0;In<Tn;In++){for(var Cn=[],dt=0;dt<bn;dt++)Cn.push(new Int32Array(64));kn.push(Cn)}fn.blocksPerLine=Rn,fn.blocksPerColumn=$n,fn.blocks=kn}Wt.maxH=ln,Wt.maxV=sn,Wt.mcusPerLine=dn,Wt.mcusPerColumn=_n}var mt=null,xt=null,bt,Et,Bt=[],Nt=[],vt=[],St=[],kt=ct(),$t=-1;if(this.comments=[],kt!=65496)throw new Error("SOI not found");for(kt=ct();kt!=65497;){var Pt,It;switch(kt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Dt=at();if(kt===65534){var At=String.fromCharCode.apply(null,Dt);this.comments.push(At)}kt===65504&&Dt[0]===74&&Dt[1]===70&&Dt[2]===73&&Dt[3]===70&&Dt[4]===0&&(mt={version:{major:Dt[5],minor:Dt[6]},densityUnits:Dt[7],xDensity:Dt[8]<<8|Dt[9],yDensity:Dt[10]<<8|Dt[11],thumbWidth:Dt[12],thumbHeight:Dt[13],thumbData:Dt.subarray(14,14+3*Dt[12]*Dt[13])}),kt===65505&&Dt[0]===69&&Dt[1]===120&&Dt[2]===105&&Dt[3]===102&&Dt[4]===0&&(this.exifBuffer=Dt.subarray(5,Dt.length)),kt===65518&&Dt[0]===65&&Dt[1]===100&&Dt[2]===111&&Dt[3]===98&&Dt[4]===101&&Dt[5]===0&&(xt={version:Dt[6],flags0:Dt[7]<<8|Dt[8],flags1:Dt[9]<<8|Dt[10],transformCode:Dt[11]});break;case 65499:for(var Rt=ct(),Ot=Rt+ht-2;ht<Ot;){var en=gt[ht++];ot(256);var Gt=new Int32Array(64);if(en>>4)if(en>>4===1)for(It=0;It<64;It++){var Qt=h[It];Gt[Qt]=ct()}else throw new Error("DQT: invalid table spec");else for(It=0;It<64;It++){var Qt=h[It];Gt[Qt]=gt[ht++]}Bt[en&15]=Gt}break;case 65472:case 65473:case 65474:ct(),bt={},bt.extended=kt===65473,bt.progressive=kt===65474,bt.precision=gt[ht++],bt.scanLines=ct(),bt.samplesPerLine=ct(),bt.components={},bt.componentsOrder=[];var tn=bt.scanLines*bt.samplesPerLine;if(tn>pt){var un=Math.ceil((tn-pt)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${un}MP`)}var nn=gt[ht++],Lt;for(Pt=0;Pt<nn;Pt++){Lt=gt[ht];var Ct=gt[ht+1]>>4,rn=gt[ht+1]&15,Zt=gt[ht+2];if(Ct<=0||rn<=0)throw new Error("Invalid sampling factor, expected values above 0");bt.componentsOrder.push(Lt),bt.components[Lt]={h:Ct,v:rn,quantizationIdx:Zt},ht+=3}ft(bt),Nt.push(bt);break;case 65476:var qt=ct();for(Pt=2;Pt<qt;){var _t=gt[ht++],Vt=new Uint8Array(16),Xt=0;for(It=0;It<16;It++,ht++)Xt+=Vt[It]=gt[ht];ot(16+Xt);var Ht=new Uint8Array(Xt);for(It=0;It<Xt;It++,ht++)Ht[It]=gt[ht];Pt+=17+Xt,(_t>>4?vt:St)[_t&15]=nt(Vt,Ht)}break;case 65501:ct(),Et=ct();break;case 65500:ct(),ct();break;case 65498:ct();var Tt=gt[ht++],hn=[],on;for(Pt=0;Pt<Tt;Pt++){on=bt.components[gt[ht++]];var jt=gt[ht++];on.huffmanTableDC=St[jt>>4],on.huffmanTableAC=vt[jt&15],hn.push(on)}var Yt=gt[ht++],Kt=gt[ht++],Ut=gt[ht++],Jt=it(gt,ht,bt,hn,Et,Yt,Kt,Ut>>4,Ut&15,this.opts);ht+=Jt;break;case 65535:gt[ht]!==255&&ht--;break;default:if(gt[ht-3]==255&&gt[ht-2]>=192&&gt[ht-2]<=254){ht-=3;break}else if(kt===224||kt==225){if($t!==-1)throw new Error(`first unknown JPEG marker at offset ${$t.toString(16)}, second unknown JPEG marker ${kt.toString(16)} at offset ${(ht-1).toString(16)}`);$t=ht-1;const Wt=ct();if(gt[ht+Wt-2]===255){ht+=Wt-2;break}}throw new Error("unknown JPEG marker "+kt.toString(16))}kt=ct()}if(Nt.length!=1)throw new Error("only single frame JPEGs supported");for(var Pt=0;Pt<Nt.length;Pt++){var an=Nt[Pt].components;for(var It in an)an[It].quantizationTable=Bt[an[It].quantizationIdx],delete an[It].quantizationIdx}this.width=bt.samplesPerLine,this.height=bt.scanLines,this.jfif=mt,this.adobe=xt,this.components=[];for(var Pt=0;Pt<bt.componentsOrder.length;Pt++){var on=bt.components[bt.componentsOrder[Pt]];this.components.push({lines:lt(bt,on),scaleX:on.h/bt.maxH,scaleY:on.v/bt.maxV})}},getData:function(gt,pt){var ht=this.width/gt,ct=this.height/pt,at,ft,mt,xt,bt,Et,Bt,Nt,vt,St,kt=0,$t,Pt,It,Dt,At,Rt,Ot,en,Gt,Qt,tn,un=gt*pt*this.components.length;ot(un);var nn=new Uint8Array(un);switch(this.components.length){case 1:for(at=this.components[0],St=0;St<pt;St++)for(bt=at.lines[0|St*at.scaleY*ct],vt=0;vt<gt;vt++)$t=bt[0|vt*at.scaleX*ht],nn[kt++]=$t;break;case 2:for(at=this.components[0],ft=this.components[1],St=0;St<pt;St++)for(bt=at.lines[0|St*at.scaleY*ct],Et=ft.lines[0|St*ft.scaleY*ct],vt=0;vt<gt;vt++)$t=bt[0|vt*at.scaleX*ht],nn[kt++]=$t,$t=Et[0|vt*ft.scaleX*ht],nn[kt++]=$t;break;case 3:for(tn=!0,this.adobe&&this.adobe.transformCode?tn=!0:typeof this.opts.colorTransform<"u"&&(tn=!!this.opts.colorTransform),at=this.components[0],ft=this.components[1],mt=this.components[2],St=0;St<pt;St++)for(bt=at.lines[0|St*at.scaleY*ct],Et=ft.lines[0|St*ft.scaleY*ct],Bt=mt.lines[0|St*mt.scaleY*ct],vt=0;vt<gt;vt++)tn?($t=bt[0|vt*at.scaleX*ht],Pt=Et[0|vt*ft.scaleX*ht],It=Bt[0|vt*mt.scaleX*ht],en=tt($t+1.402*(It-128)),Gt=tt($t-.3441363*(Pt-128)-.71413636*(It-128)),Qt=tt($t+1.772*(Pt-128))):(en=bt[0|vt*at.scaleX*ht],Gt=Et[0|vt*ft.scaleX*ht],Qt=Bt[0|vt*mt.scaleX*ht]),nn[kt++]=en,nn[kt++]=Gt,nn[kt++]=Qt;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(tn=!1,this.adobe&&this.adobe.transformCode?tn=!0:typeof this.opts.colorTransform<"u"&&(tn=!!this.opts.colorTransform),at=this.components[0],ft=this.components[1],mt=this.components[2],xt=this.components[3],St=0;St<pt;St++)for(bt=at.lines[0|St*at.scaleY*ct],Et=ft.lines[0|St*ft.scaleY*ct],Bt=mt.lines[0|St*mt.scaleY*ct],Nt=xt.lines[0|St*xt.scaleY*ct],vt=0;vt<gt;vt++)tn?($t=bt[0|vt*at.scaleX*ht],Pt=Et[0|vt*ft.scaleX*ht],It=Bt[0|vt*mt.scaleX*ht],Dt=Nt[0|vt*xt.scaleX*ht],At=255-tt($t+1.402*(It-128)),Rt=255-tt($t-.3441363*(Pt-128)-.71413636*(It-128)),Ot=255-tt($t+1.772*(Pt-128))):(At=bt[0|vt*at.scaleX*ht],Rt=Et[0|vt*ft.scaleX*ht],Ot=Bt[0|vt*mt.scaleX*ht],Dt=Nt[0|vt*xt.scaleX*ht]),nn[kt++]=255-At,nn[kt++]=255-Rt,nn[kt++]=255-Ot,nn[kt++]=255-Dt;break;default:throw new Error("Unsupported color mode")}return nn},copyToImageData:function(gt,pt){var ht=gt.width,ct=gt.height,at=gt.data,ft=this.getData(ht,ct),mt=0,xt=0,bt,Et,Bt,Nt,vt,St,kt,$t,Pt;switch(this.components.length){case 1:for(Et=0;Et<ct;Et++)for(bt=0;bt<ht;bt++)Bt=ft[mt++],at[xt++]=Bt,at[xt++]=Bt,at[xt++]=Bt,pt&&(at[xt++]=255);break;case 3:for(Et=0;Et<ct;Et++)for(bt=0;bt<ht;bt++)kt=ft[mt++],$t=ft[mt++],Pt=ft[mt++],at[xt++]=kt,at[xt++]=$t,at[xt++]=Pt,pt&&(at[xt++]=255);break;case 4:for(Et=0;Et<ct;Et++)for(bt=0;bt<ht;bt++)vt=ft[mt++],St=ft[mt++],Bt=ft[mt++],Nt=ft[mt++],kt=255-tt(vt*(1-Nt/255)+Nt),$t=255-tt(St*(1-Nt/255)+Nt),Pt=255-tt(Bt*(1-Nt/255)+Nt),at[xt++]=kt,at[xt++]=$t,at[xt++]=Pt,pt&&(at[xt++]=255);break;default:throw new Error("Unsupported color mode")}}};var st=0,rt=0;function ot(ut=0){var gt=st+ut;if(gt>rt){var pt=Math.ceil((gt-rt)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${pt}MB`)}st=gt}return et.resetMaxMemoryUsage=function(ut){st=0,rt=ut},et.getBytesAllocated=function(){return st},et.requestMemoryAllocation=ot,et}();e.exports=s;function s(a,h={}){var c={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},d={...c,...h},g=new Uint8Array(a),b=new o;b.opts=d,o.resetMaxMemoryUsage(d.maxMemoryUsageInMB*1024*1024),b.parse(g);var _=d.formatAsRGBA?4:3,$=b.width*b.height*_;try{o.requestMemoryAllocation($);var j={width:b.width,height:b.height,exifBuffer:b.exifBuffer,data:d.useTArray?new Uint8Array($):Buffer.alloc($)};b.comments.length>0&&(j.comments=b.comments)}catch(_e){throw _e instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+$):_e instanceof ReferenceError&&_e.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):_e}return b.copyToImageData(j,d.formatAsRGBA),j}})(decoder);var decoderExports=decoder.exports,encode$1=encoderExports,decode$4=decoderExports,jpegJs={encode:encode$1,decode:decode$4};let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(let e=0;e<chars.length;e++)lookup[chars.charCodeAt(e)]=e;function encode(e){let o,s=e.length,a="";for(o=0;o<s;o+=3)a+=chars[e[o]>>2],a+=chars[(e[o]&3)<<4|e[o+1]>>4],a+=chars[(e[o+1]&15)<<2|e[o+2]>>6],a+=chars[e[o+2]&63];return s%3===2?a=`${a.substring(0,a.length-1)}=`:s%3===1&&(a=`${a.substring(0,a.length-2)}==`),a}function decode$3(e){let o=e.length*.75,s=e.length,a=0,h,c,d,g;e[e.length-1]==="="&&(o--,e[e.length-2]==="="&&o--);const b=new Uint8Array(o);for(let _=0;_<s;_+=4)h=lookup[e.charCodeAt(_)],c=lookup[e.charCodeAt(_+1)],d=lookup[e.charCodeAt(_+2)],g=lookup[e.charCodeAt(_+3)],b[a++]=h<<2|c>>4,b[a++]=(c&15)<<4|d>>2,b[a++]=(d&3)<<6|g&63;return b}function toBase64URL(e,o){const s=encode(e);return`data:${o};base64,${s}`}const ImageData=self.ImageData,DOMImage=self.Image;function createCanvas(e,o){let s=self.document.createElement("canvas");return s.width=e,s.height=o,s}function fetchBinary(e,{withCredentials:o=!1}={}){return new Promise(function(s,a){let h=new self.XMLHttpRequest;h.open("GET",e,!0),h.responseType="arraybuffer",h.withCredentials=o,h.onload=function(c){this.status!==200?a(c):s(this.response)},h.onerror=a,h.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(e){return e.includes("/")||(e=`image/${e}`),e}function encodeJpeg(e,o={}){const s={width:e.width,height:e.height,data:e.getRGBAData()};return jpegJs.encode(s,o.quality).data}function encodePng(e,o){const s={width:e.width,height:e.height,channels:e.channels,depth:e.bitDepth,data:e.data};return(s.depth===1||s.depth===32)&&(s.depth=8,s.channels=4,s.data=e.getRGBAData()),encodePng$1(s,o)}const exportMethods={save(e,o={}){const{useCanvas:s=!1,encoder:a=void 0}=o;let{format:h}=o;if(!h){const c=/\.(?<format>[a-zA-Z]+)$/.exec(e);c&&(h=c.groups.format.toLowerCase())}if(!h)throw new Error("file format not provided");return new Promise((c,d)=>{let g,b;switch(h.toLowerCase()){case"png":{s?g=this.getCanvas().pngStream():b=encodePng(this,a);break}case"jpg":case"jpeg":s?g=this.getCanvas().jpegStream():b=encodeJpeg(this,a);break;case"bmp":b=encode$2(this,a);break;default:throw new RangeError(`invalid output format: ${h}`)}if(g){let _=createWriteStream();_.on("finish",c),_.on("error",d),g.pipe(_)}else b&&writeFile()})},toDataURL(e="image/png",o={}){typeof e=="object"&&(o=e,e="image/png");const{useCanvas:s=!1,encoder:a=void 0}=o;e=getType(e);function h(c,d){const g=c(d,a);return toBase64URL(g,e)}return e==="image/bmp"?h(encode$2,this):e==="image/png"&&!s?h(encodePng,this):e==="image/jpeg"&&!s?h(encodeJpeg,this):this.getCanvas().toDataURL(e)},toBuffer(e={}){const{format:o="png",encoder:s=void 0}=e;switch(o.toLowerCase()){case"png":return encodePng(this,s);case"jpeg":case"jpg":return encodeJpeg(this,s);case"bmp":return encode$2(this,s);default:throw new RangeError(`invalid output format: ${o}`)}},toBase64(e="image/png",o={}){if(o.async)return this.toDataURL(e,o).then(function(s){return s.substring(s.indexOf(",")+1)});{const s=this.toDataURL(e,o);return s.substring(s.indexOf(",")+1)}},toBlob(e="image/png",o=.8){return canvasToBlob(this.getCanvas(),e,o)},getCanvas(){const e=new ImageData(this.getRGBAData({clamped:!0}),this.width,this.height);let o=createCanvas(this.width,this.height);return o.getContext("2d").putImageData(e,0,0),o}};function setExportMethods(e){for(const o in exportMethods)e.prototype[o]=exportMethods[o]}var hasOwn$1={exports:{}};const name="has-own",version="1.0.1",description="A safer .hasOwnProperty() - hasOwn(name, obj)",main="index.js",scripts={test:"make test"},author="Aaron Heckmann <aaron.heckmann+github@gmail.com>",license="MIT",repository={type:"git",url:"git://github.com/aheckmann/has-own.git"},homepage="https://github.com/aheckmann/has-own/",devDependencies={mocha:"^6.2.2"},require$$0$2={name,version,description,main,scripts,author,license,repository,homepage,devDependencies};(function(e,o){var s=Object.prototype.hasOwnProperty;e.exports=o=function(h,c){return s.call(c,h)},o.version=require$$0$2.version})(hasOwn$1,hasOwn$1.exports);var hasOwnExports=hasOwn$1.exports;const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(e,o,s={}){let{inPlace:a=!1,returnThis:h=!0,partialArgs:c=[]}=s;return a?Image.prototype[e]=function(...d){this.computed=null;let g=o.apply(this,[...c,...d]);return h?this:g}:Image.prototype[e]=function(...d){return o.apply(this,[...c,...d])},Image}function extendProperty(e,o,s={}){let{partialArgs:a=[]}=s;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(e,this.computed))return this.computed[e];let h=o.apply(this,a);return this.computed[e]=h,h},Object.defineProperty(Image.prototype,e,computedPropertyDescriptor$1),Image}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(e={}){const{clamped:o}=e;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const s=this.width*this.height*4;let a=o?new Uint8ClampedArray(s):new Uint8Array(s);return this.bitDepth===1?fillDataFromBinary(this,a):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,a):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,a))):this.components===1?fillDataFromGrey(this,a):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,a)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,a)):fillAlpha(this,a),a}function fillDataFromBinary(e,o){for(let s=0;s<e.size;s++){const a=e.getBit(s);o[s*4]=a*255,o[s*4+1]=a*255,o[s*4+2]=a*255}}function fillDataFromGrey32(e,o){const s=e.min[0],h=e.max[0]-s;for(let c=0;c<e.size;c++){const d=Math.floor(255*(e.data[c]-s)/h);o[c*4]=d,o[c*4+1]=d,o[c*4+2]=d}}function fillDataFromRGB32(e,o){const s=Math.min(...e.min),h=Math.max(...e.max)-s;for(let c=0;c<e.size;c++){const d=Math.floor(255*(e.data[c*3]-s)/h),g=Math.floor(255*(e.data[c*3+1]-s)/h),b=Math.floor(255*(e.data[c*3+2]-s)/h);o[c*4]=d,o[c*4+1]=g,o[c*4+2]=b}}function fillDataFromGrey(e,o){for(let s=0;s<e.size;s++)o[s*4]=e.data[s*e.channels]>>>e.bitDepth-8,o[s*4+1]=e.data[s*e.channels]>>>e.bitDepth-8,o[s*4+2]=e.data[s*e.channels]>>>e.bitDepth-8}function fillDataFromRGB(e,o){for(let s=0;s<e.size;s++)o[s*4]=e.data[s*e.channels]>>>e.bitDepth-8,o[s*4+1]=e.data[s*e.channels+1]>>>e.bitDepth-8,o[s*4+2]=e.data[s*e.channels+2]>>>e.bitDepth-8}function copyAlpha(e,o){for(let s=0;s<e.size;s++)o[s*4+3]=e.data[s*e.channels+e.components]>>e.bitDepth-8}function fillAlpha(e,o){for(let s=0;s<e.size;s++)o[s*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(e){const o=kinds[e];if(!o)throw new RangeError(`invalid image kind: ${e}`);return o}const validBitDepth=[1,8,16,32];function verifyKindDefinition(e){const{components:o,alpha:s,bitDepth:a,colorModel:h}=e;if(!Number.isInteger(o)||o<=0)throw new RangeError(`invalid components: ${o}. Must be a positive integer`);if(s!==0&&s!==1&&typeof s!="boolean")throw new TypeError(`invalid alpha: ${s}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(a))throw new RangeError(`invalid bitDepth: ${a}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[h])throw new RangeError(`invalid colorModel: ${h}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(e,o,s){let a=o*e;return s===1&&(a=Math.ceil(a/8)),a}function createPixelArray(e,o,s,a,h,c){const d=a*e;let g;switch(h){case 1:g=new Uint8Array(Math.ceil(d/8));break;case 8:g=new Uint8Array(d);break;case 16:g=new Uint16Array(d);break;case 32:g=new Float32Array(d);break;default:throw new Error(`Cannot create pixel array for bit depth ${h}`)}if(s)for(let b=o;b<g.length;b+=a)g[b]=c;return g}const defaultByteLength=1024*8,charArray=[];let IOBuffer$2=class{constructor(o,s){s=s||{},o===void 0&&(o=defaultByteLength),typeof o=="number"&&(o=new ArrayBuffer(o));let a=o.byteLength;const h=s.offset?s.offset>>>0:0;o.buffer&&(a=o.byteLength-h,o.byteLength!==o.buffer.byteLength?o=o.buffer.slice(o.byteOffset+h,o.byteOffset+o.byteLength):h?o=o.buffer.slice(h):o=o.buffer),this.buffer=o,this.length=a,this.byteLength=a,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=a||defaultByteLength,this._mark=0}available(o){return o===void 0&&(o=1),this.offset+o<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(o){o===void 0&&(o=1),this.offset+=o}seek(o){this.offset=o}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(o){if(o===void 0&&(o=1),!this.available(o)){const s=this._increment+this._increment;this._increment=s;const a=this.length+s,h=new Uint8Array(a);h.set(new Uint8Array(this.buffer)),this.buffer=h.buffer,this.length=a,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(o){o===void 0&&(o=1);for(var s=new Uint8Array(o),a=0;a<o;a++)s[a]=this.readByte();return s}readInt16(){var o=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,o}readUint16(){var o=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,o}readInt32(){var o=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,o}readUint32(){var o=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat32(){var o=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat64(){var o=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,o}readChar(){return String.fromCharCode(this.readInt8())}readChars(o){o===void 0&&(o=1),charArray.length=o;for(var s=0;s<o;s++)charArray[s]=this.readChar();return charArray.join("")}writeBoolean(o){this.writeUint8(o?255:0)}writeInt8(o){this.ensureAvailable(1),this._data.setInt8(this.offset++,o)}writeUint8(o){this.ensureAvailable(1),this._data.setUint8(this.offset++,o)}writeByte(o){this.writeUint8(o)}writeBytes(o){this.ensureAvailable(o.length);for(var s=0;s<o.length;s++)this._data.setUint8(this.offset++,o[s])}writeInt16(o){this.ensureAvailable(2),this._data.setInt16(this.offset,o,this.littleEndian),this.offset+=2}writeUint16(o){this.ensureAvailable(2),this._data.setUint16(this.offset,o,this.littleEndian),this.offset+=2}writeInt32(o){this.ensureAvailable(4),this._data.setInt32(this.offset,o,this.littleEndian),this.offset+=4}writeUint32(o){this.ensureAvailable(4),this._data.setUint32(this.offset,o,this.littleEndian),this.offset+=4}writeFloat32(o){this.ensureAvailable(4),this._data.setFloat32(this.offset,o,this.littleEndian),this.offset+=4}writeFloat64(o){this.ensureAvailable(8),this._data.setFloat64(this.offset,o,this.littleEndian),this.offset+=8}writeChar(o){this.writeUint8(o.charCodeAt(0))}writeChars(o){for(var s=0;s<o.length;s++)this.writeUint8(o.charCodeAt(s))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}};var IOBuffer_1=IOBuffer$2,src$4={};const tagsById$5={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName$5={};for(var i$2 in tagsById$5)tagsByName$5[tagsById$5[i$2]]=i$2;var standard$1={tagsById:tagsById$5,tagsByName:tagsByName$5};const tagsById$4={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$4={};for(var i$1 in tagsById$4)tagsByName$4[tagsById$4[i$1]]=i$1;var exif$1={tagsById:tagsById$4,tagsByName:tagsByName$4};const tagsById$3={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$3={};for(var i in tagsById$3)tagsByName$3[tagsById$3[i]]=i;var gps$1={tagsById:tagsById$3,tagsByName:tagsByName$3};const tags$1={standard:standard$1,exif:exif$1,gps:gps$1};let IFD$2=class{constructor(o){if(!o)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=o,this._map=null}get(o){if(typeof o=="number")return this.fields.get(o);if(typeof o=="string")return this.fields.get(tags$1[this.kind].tagsByName[o]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const s=tags$1[this.kind].tagsById;for(var o of this.fields.keys())s[o]&&(this._map[s[o]]=this.fields.get(o))}return this._map}};var ifd=IFD$2;const Ifd=ifd,dateTimeRegex$1=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;let TiffIfd$1=class extends Ifd{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var o=new Date,s=dateTimeRegex$1.exec(this.dateTime);return o.setFullYear(s[1],s[2]-1,s[3]),o.setHours(s[4],s[5],s[6]),o}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return alwaysArray$1(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return alwaysArray$1(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}};function alwaysArray$1(e){return typeof e=="number"?[e]:e}var tiffIfd=TiffIfd$1,ifdValue={},types$1=new Map([[1,[1,readByte$1]],[2,[1,readASCII$1]],[3,[2,readShort$1]],[4,[4,readLong$1]],[5,[8,readRational$1]],[6,[1,readSByte$1]],[7,[1,readByte$1]],[8,[2,readSShort$1]],[9,[4,readSLong$1]],[10,[8,readSRational$1]],[11,[4,readFloat$1]],[12,[8,readDouble$1]]]);ifdValue.getByteLength=function(e,o){return types$1.get(e)[0]*o};ifdValue.readData=function(e,o,s){return types$1.get(o)[1](e,s)};function readByte$1(e,o){if(o===1)return e.readUint8();for(var s=new Uint8Array(o),a=0;a<o;a++)s[a]=e.readUint8();return s}function readASCII$1(e,o){for(var s=[],a="",h=0;h<o;h++){var c=String.fromCharCode(e.readUint8());c==="\0"?(s.push(a),a=""):a+=c}return s.length===1?s[0]:s}function readShort$1(e,o){if(o===1)return e.readUint16();for(var s=new Uint16Array(o),a=0;a<o;a++)s[a]=e.readUint16();return s}function readLong$1(e,o){if(o===1)return e.readUint32();for(var s=new Uint32Array(o),a=0;a<o;a++)s[a]=e.readUint32();return s}function readRational$1(e,o){if(o===1)return e.readUint32()/e.readUint32();for(var s=new Array(o),a=0;a<o;a++)s[a]=e.readUint32()/e.readUint32();return s}function readSByte$1(e,o){if(o===1)return e.readInt8();for(var s=new Int8Array(o),a=0;a<o;a++)s[a]=e.readInt8();return s}function readSShort$1(e,o){if(o===1)return e.readInt16();for(var s=new Int16Array(o),a=0;a<o;a++)s[a]=e.readInt16();return s}function readSLong$1(e,o){if(o===1)return e.readInt32();for(var s=new Int32Array(o),a=0;a<o;a++)s[a]=e.readInt32();return s}function readSRational$1(e,o){if(o===1)return e.readInt32()/e.readInt32();for(var s=new Array(o),a=0;a<o;a++)s[a]=e.readInt32()/e.readInt32();return s}function readFloat$1(e,o){if(o===1)return e.readFloat32();for(var s=new Float32Array(o),a=0;a<o;a++)s[a]=e.readFloat32();return s}function readDouble$1(e,o){if(o===1)return e.readFloat64();for(var s=new Float64Array(o),a=0;a<o;a++)s[a]=e.readFloat64();return s}const IOBuffer$1=IOBuffer_1,IFD$1=ifd,TiffIFD=tiffIfd,IFDValue=ifdValue,defaultOptions$d={ignoreImageData:!1,onlyFirst:!1};let TIFFDecoder$2=class extends IOBuffer$1{constructor(o,s){super(o,s),this._nextIFD=0}decode(o){o=Object.assign({},defaultOptions$d,o);const s=[];for(this.decodeHeader();this._nextIFD;)if(s.push(this.decodeIFD(o)),o.onlyFirst)return s[0];return s}decodeHeader(){let o=this.readUint16();if(o===18761)this.setLittleEndian();else if(o===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+o.toString(16));if(o=this.readUint16(),o!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(o){this.seek(this._nextIFD);var s;o.kind?s=new IFD$1(o.kind):s=new TiffIFD;const a=this.readUint16();for(var h=0;h<a;h++)this.decodeIFDEntry(s);return o.ignoreImageData||this.decodeImageData(s),this._nextIFD=this.readUint32(),s}decodeIFDEntry(o){const s=this.offset,a=this.readUint16(),h=this.readUint16(),c=this.readUint32();if(h<1||h>12){this.skip(4);return}IFDValue.getByteLength(h,c)>4&&this.seek(this.readUint32());const g=IFDValue.readData(this,h,c);if(o.fields.set(a,g),a===34665||a===34853){let b=this.offset,_;a===34665?_="exif":a===34853&&(_="gps"),this._nextIFD=g,o[_]=this.decodeIFD({kind:_,ignoreImageData:!0}),this.offset=b}this.seek(s),this.skip(12)}decodeImageData(o){const s=o.orientation;switch(s&&s!==1&&unsupported$1("orientation",s),o.type){case 1:case 2:this.readStripData(o);break;default:unsupported$1("image type",o.type);break}}readStripData(o){const s=o.width,a=o.height,h=validateBitDepth(o.bitsPerSample),c=o.sampleFormat;let d=s*a;const g=getDataArray$1(d,1,h,c),b=o.compression,$=o.rowsPerStrip*s,j=o.stripOffsets,_e=o.stripByteCounts;for(var et=0,nt=0;nt<j.length;nt++){var it=this.getStripData(b,j[nt],_e[nt]),lt=d>$?$:d;d-=lt,h===8?et=fill8bit$1(g,it,et,lt):h===16?et=fill16bit$1(g,it,et,lt,this.isLittleEndian()):h===32&&c===3?et=fillFloat32$1(g,it,et,lt,this.isLittleEndian()):unsupported$1("bitDepth",h)}o.data=g}getStripData(o,s,a){switch(o){case 1:return new DataView(this.buffer,s,a);case 2:case 32773:return unsupported$1("Compression",o);default:throw new Error("invalid compression: "+o)}}};var tiffDecoder=TIFFDecoder$2;function getDataArray$1(e,o,s,a){return s===8?new Uint8Array(e*o):s===16?new Uint16Array(e*o):s===32&&a===3?new Float32Array(e*o):unsupported$1("bit depth / sample format",s+" / "+a)}function fill8bit$1(e,o,s,a){for(var h=0;h<a;h++)e[s++]=o.getUint8(h);return s}function fill16bit$1(e,o,s,a,h){for(var c=0;c<a*2;c+=2)e[s++]=o.getUint16(c,h);return s}function fillFloat32$1(e,o,s,a,h){for(var c=0;c<a*4;c+=4)e[s++]=o.getFloat32(c,h);return s}function unsupported$1(e,o){throw new Error("Unsupported "+e+": "+o)}function validateBitDepth(e){if(e.length){const s=e;e=s[0];for(var o=0;o<s.length;o++)s[o]!==e&&unsupported$1("bit depth",s)}return e}const TIFFDecoder$1=tiffDecoder;var decode$2=function(o,s){return new TIFFDecoder$1(o,s).decode(s)};src$4.decode=decode$2;const IOBuffer=IOBuffer_1,tiff=src$4;function decode$1(e){const o=new IOBuffer(e),s={};if(o.setBigEndian(),o.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(o.readUint16()===65505){o.readUint16();const c=o.readBytes(6);if(c[0]===69&&c[1]===120&&c[2]===105&&c[3]===102&&c[4]===0&&c[5]===0){const d=tiff.decode(o,{onlyFirst:!0,ignoreImageData:!0,offset:o.offset});s.exif=d}}return s}var decode_1=decode$1,decode=decode_1,imageType$2={exports:{}},fileType$1={exports:{}};(function(module){const toBytes=e=>[...e].map(o=>o.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(e,o=0){let s=e[o],a=1,h=0;for(;++h<8;)a*=256,s+=e[o+h]*a;return s}const fileType=e=>{if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const o=e instanceof Uint8Array?e:new Uint8Array(e);if(!(o&&o.length>1))return null;const s=(h,c)=>{c=Object.assign({offset:0},c);for(let d=0;d<h.length;d++)if(c.mask){if(h[d]!==(c.mask[d]&o[d+c.offset]))return!1}else if(h[d]!==o[d+c.offset])return!1;return!0},a=(h,c)=>s(toBytes(h),c);if(s([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(s([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(s([71,73,70]))return{ext:"gif",mime:"image/gif"};if(s([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(s([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((s([73,73,42,0])||s([77,77,0,42]))&&s([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(s([73,73,42,0])||s([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(s([66,77]))return{ext:"bmp",mime:"image/bmp"};if(s([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(s([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(s([80,75,3,4])){if(s([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(s(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(a("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(a("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(a("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const h=(b,_=0)=>b.findIndex(($,j,_e)=>j>=_&&_e[j]===80&&_e[j+1]===75&&_e[j+2]===3&&_e[j+3]===4);let c=0,d=!1,g=null;do{const b=c+30;if(d||(d=s(oxmlContentTypes,{offset:b})||s(oxmlRels,{offset:b})),g||(a("word/",{offset:b})?g={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:a("ppt/",{offset:b})?g={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:a("xl/",{offset:b})&&(g={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),d&&g)return g;c=h(o,b)}while(c>=0);if(g)return g}if(s([80,75])&&(o[2]===3||o[2]===5||o[2]===7)&&(o[3]===4||o[3]===6||o[3]===8))return{ext:"zip",mime:"application/zip"};if(s([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(s([82,97,114,33,26,7])&&(o[6]===0||o[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(s([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(s([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(s([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(s([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(s([51,103,112,53])||s([0,0,0])&&s([102,116,121,112],{offset:4})&&(s([109,112,52,49],{offset:8})||s([109,112,52,50],{offset:8})||s([105,115,111,109],{offset:8})||s([105,115,111,50],{offset:8})||s([109,109,112,52],{offset:8})||s([77,52,86],{offset:8})||s([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(s([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(s([26,69,223,163])){const h=o.subarray(4,4100),c=h.findIndex((d,g,b)=>b[g]===66&&b[g+1]===130);if(c!==-1){const d=c+3,g=b=>[...b].every((_,$)=>h[d+$]===_.charCodeAt(0));if(g("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(g("webm"))return{ext:"webm",mime:"video/webm"}}}if(s([0,0,0,20,102,116,121,112,113,116,32,32])||s([102,114,101,101],{offset:4})||s([102,116,121,112,113,116,32,32],{offset:4})||s([109,100,97,116],{offset:4})||s([109,111,111,118],{offset:4})||s([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(s([82,73,70,70])){if(s([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(s([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(s([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(s([48,38,178,117,142,102,207,17,166,217])){let h=30;do{const c=readUInt64LE(o,h+16);if(s([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:h})){if(s([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:h+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(s([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:h+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}h+=c}while(h+24<=o.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(s([0,0,1,186])||s([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(s([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let h=0;h<2&&h<o.length-16;h++){if(s([73,68,51],{offset:h})||s([255,226],{offset:h,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(s([255,228],{offset:h,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(s([255,248],{offset:h,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(s([255,240],{offset:h,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(s([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(s([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(s([79,103,103,83]))return s([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:s([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:s([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:s([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:s([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(s([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(s([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(s([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(s([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(s([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(s([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((o[0]===67||o[0]===70)&&s([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(s([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(s([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(s([119,79,70,70])&&(s([0,1,0,0],{offset:4})||s([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(s([119,79,70,50])&&(s([0,1,0,0],{offset:4})||s([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(s([76,80],{offset:34})&&(s([0,0,1],{offset:8})||s([1,0,2],{offset:8})||s([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(s([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(s([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(s([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(s([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(s([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(s([37,33]))return{ext:"ps",mime:"application/postscript"};if(s([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(s([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(s([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(s([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(s([77,83,67,70])||s([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(s([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(s([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(s([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(s([31,160])||s([31,157]))return{ext:"Z",mime:"application/x-compress"};if(s([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(s([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(s([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(s([71],{offset:4})&&(s([71],{offset:192})||s([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(s([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(s([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(s([0,0,0,12,106,80,32,32,13,10,135,10])){if(s([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(s([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(s([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(s([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(s([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(a("<?xml "))return{ext:"xml",mime:"application/xml"};if(s([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(s([102,116,121,112],{offset:4})){if(s([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(s([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(s([104,101,105,99],{offset:8})||s([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(s([104,101,118,99],{offset:8})||s([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return s([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:s([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:s([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:s([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:s([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:s([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:s([212,195,178,161])||s([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const e=new stream.PassThrough,o=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{e.fileType=fileType(o)}catch(s){reject(s)}readableStream.unshift(o),stream.pipeline?resolve(stream.pipeline(readableStream,e,()=>{})):resolve(readableStream.pipe(e))})})})(fileType$1);var fileTypeExports=fileType$1.exports;const fileType=fileTypeExports,imageExts=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),imageType=e=>{const o=fileType(e);return imageExts.has(o&&o.ext)?o:null};imageType$2.exports=imageType;imageType$2.exports.default=imageType;Object.defineProperty(imageType,"minimumBytes",{value:fileType.minimumBytes});var imageTypeExports=imageType$2.exports;const imageType$1=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(e){if(e.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const o=e.rowsPerStrip*e.width*e.samplesPerPixel*(e.bitsPerSample/8);return new Array(e.stripOffsets.length).fill(o)}function applyHorizontalDifferencing8Bit(e,o,s){let a=0;for(;a<e.length;){for(let h=s;h<o*s;h+=s)for(let c=0;c<s;c++)e[a+h+c]=e[a+h+c]+e[a+h-(s-c)]&255;a+=o*s}}function applyHorizontalDifferencing16Bit(e,o,s){let a=0;for(;a<e.length;){for(let h=s;h<o*s;h+=s)for(let c=0;c<s;c++)e[a+h+c]=e[a+h+c]+e[a+h-(s-c)]&65535;a+=o*s}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let e in tagsById$2)tagsByName$2[tagsById$2[e]]=Number(e);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let e in tagsById$1)tagsByName$1[tagsById$1[e]]=Number(e);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let e in tagsById)tagsByName[tagsById[e]]=Number(e);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(o){if(!o)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=o,this._hasMap=!1,this._map={}}get(o){if(typeof o=="number")return this.fields.get(o);if(typeof o=="string")return this.fields.get(tags[this.kind].tagsByName[o]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const o=tags[this.kind].tagsById;for(let s of this.fields.keys())o[s]&&(this._map[o[s]]=this.fields.get(s));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(e,o){const s=types.get(e);if(!s)throw new Error(`type not found: ${e}`);return s[0]*o}function readData(e,o,s){const a=types.get(o);if(!a)throw new Error(`type not found: ${o}`);return a[1](e,s)}function readByte(e,o){if(o===1)return e.readUint8();let s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=e.readUint8();return s}function readASCII(e,o){let s=[],a="";for(let h=0;h<o;h++){let c=String.fromCharCode(e.readUint8());c==="\0"?(s.push(a),a=""):a+=c}return s.length===1?s[0]:s}function readShort(e,o){if(o===1)return e.readUint16();let s=new Uint16Array(o);for(let a=0;a<o;a++)s[a]=e.readUint16();return s}function readLong(e,o){if(o===1)return e.readUint32();let s=new Uint32Array(o);for(let a=0;a<o;a++)s[a]=e.readUint32();return s}function readRational(e,o){if(o===1)return e.readUint32()/e.readUint32();let s=new Array(o);for(let a=0;a<o;a++)s[a]=e.readUint32()/e.readUint32();return s}function readSByte(e,o){if(o===1)return e.readInt8();let s=new Int8Array(o);for(let a=0;a<o;a++)s[a]=e.readInt8();return s}function readSShort(e,o){if(o===1)return e.readInt16();let s=new Int16Array(o);for(let a=0;a<o;a++)s[a]=e.readInt16();return s}function readSLong(e,o){if(o===1)return e.readInt32();let s=new Int32Array(o);for(let a=0;a<o;a++)s[a]=e.readInt32();return s}function readSRational(e,o){if(o===1)return e.readInt32()/e.readInt32();let s=new Array(o);for(let a=0;a<o;a++)s[a]=e.readInt32()/e.readInt32();return s}function readFloat(e,o){if(o===1)return e.readFloat32();let s=new Float32Array(o);for(let a=0;a<o;a++)s[a]=e.readFloat32();return s}function readDouble(e,o){if(o===1)return e.readFloat64();let s=new Float64Array(o);for(let a=0;a<o;a++)s[a]=e.readFloat64();return s}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let o=0;o<256;o++)stringTable.push([o]);const e=[];for(let o=256;o<4096;o++)stringTable.push(e)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(o){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(o.buffer,o.byteOffset,o.byteLength),this.outData=new IOBuffer$4(o.byteLength),this.initializeTable()}decode(){let o=0,s=0;for(;(o=this.getNextCode())!==EOI_CODE;)if(o===CLEAR_CODE){if(this.initializeTable(),o=this.getNextCode(),o===EOI_CODE)break;this.writeString(this.stringFromCode(o)),s=o}else if(this.isInTable(o))this.writeString(this.stringFromCode(o)),this.addStringToTable(this.stringFromCode(s).concat(this.stringFromCode(o)[0])),s=o;else{const h=this.stringFromCode(s).concat(this.stringFromCode(s)[0]);this.writeString(h),this.addStringToTable(h),s=o}const a=this.outData.toArray();return new DataView(a.buffer,a.byteOffset,a.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(o){this.outData.writeBytes(o)}stringFromCode(o){return stringTable[o]}isInTable(o){return o<this.tableLength}addStringToTable(o){if(stringTable[this.tableLength++]=o,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const o=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:o}}function decompressLzw(e){return new LzwDecoder(e).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let o=new Date,s=dateTimeRegex.exec(this.dateTime);if(s===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return o.setFullYear(Number(s[1]),Number(s[2])-1,Number(s[3])),o.setHours(Number(s[4]),Number(s[5]),Number(s[6])),o}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const o=this.get("BitsPerSample");return o&&typeof o!="number"?o[0]:o}get alpha(){const o=this.extraSamples;return o?o[0]!==0:!1}get associatedAlpha(){const o=this.extraSamples;return o?o[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const o=2**this.bitsPerSample,s=this.get("ColorMap");if(!s)return;if(s.length!==3*o)throw new Error(`ColorMap size must be ${o}`);const a=[];for(let h=0;h<o;h++)a.push([s[h],s[h+o],s[h+2*o]]);return a}}function alwaysArray(e){return typeof e=="number"?[e]:e}function decompressZlib(e){const o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=inflate_1(o);return new DataView(s.buffer,s.byteOffset,s.byteLength)}const defaultOptions$c={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer$4{constructor(o){super(o),this._nextIFD=0}get isMultiPage(){let o=0;for(this.decodeHeader();this._nextIFD;)if(o++,this.decodeIFD({ignoreImageData:!0},!0),o===2)return!0;if(o===1)return!1;throw unsupported("ifdCount",o)}get pageCount(){let o=0;for(this.decodeHeader();this._nextIFD;)o++,this.decodeIFD({ignoreImageData:!0},!0);if(o>0)return o;throw unsupported("ifdCount",o)}decode(o={}){o=Object.assign({},defaultOptions$c,o);const s=[];for(this.decodeHeader();this._nextIFD;)if(s.push(this.decodeIFD(o,!0)),o.onlyFirst)return[s[0]];return s}decodeHeader(){const o=this.readUint16();if(o===18761)this.setLittleEndian();else if(o===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${o.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(o,s){this.seek(this._nextIFD);let a;if(s)a=new TiffIfd;else{if(!o.kind)throw new Error("kind is missing");a=new IFD(o.kind)}const h=this.readUint16();for(let c=0;c<h;c++)this.decodeIFDEntry(a);if(!o.ignoreImageData){if(!(a instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(a)}return this._nextIFD=this.readUint32(),a}decodeIFDEntry(o){const s=this.offset,a=this.readUint16(),h=this.readUint16(),c=this.readUint32();if(h<1||h>12){this.skip(4);return}getByteLength(h,c)>4&&this.seek(this.readUint32());const g=readData(this,h,c);if(o.fields.set(a,g),a===34665||a===34853){let b=this.offset,_="exif";a===34665?_="exif":a===34853&&(_="gps"),this._nextIFD=g,o[_]=this.decodeIFD({kind:_,ignoreImageData:!0},!1),this.offset=b}this.seek(s),this.skip(12)}decodeImageData(o){const s=o.orientation;if(s&&s!==1)throw unsupported("orientation",s);switch(o.type){case 0:case 1:case 2:case 3:this.readStripData(o);break;default:throw unsupported("image type",o.type)}if(this.applyPredictor(o),this.convertAlpha(o),o.type===0){const a=o.bitsPerSample,h=Math.pow(2,a)-1;for(let c=0;c<o.data.length;c++)o.data[c]=h-o.data[c]}}readStripData(o){const s=o.width,a=o.height,h=o.bitsPerSample,c=o.sampleFormat,d=s*a*o.samplesPerPixel,g=getDataArray(d,h,c),_=o.rowsPerStrip*s*o.samplesPerPixel,$=o.stripOffsets,j=o.stripByteCounts||guessStripByteCounts(o);let _e=d,et=0;for(let nt=0;nt<$.length;nt++){let it=new DataView(this.buffer,this.byteOffset+$[nt],j[nt]),lt=_e>_?_:_e;_e-=lt;let tt=it;switch(o.compression){case 1:break;case 5:{tt=decompressLzw(it);break}case 8:{tt=decompressZlib(it);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",o.compression)}et=this.fillUncompressed(h,c,g,tt,et,lt)}o.data=g}fillUncompressed(o,s,a,h,c,d){if(o===8)return fill8bit(a,h,c,d);if(o===16)return fill16bit(a,h,c,d,this.isLittleEndian());if(o===32&&s===3)return fillFloat32(a,h,c,d,this.isLittleEndian());throw unsupported("bitDepth",o)}applyPredictor(o){const s=o.bitsPerSample;switch(o.predictor){case 1:break;case 2:{if(s===8)applyHorizontalDifferencing8Bit(o.data,o.width,o.components);else if(s===16)applyHorizontalDifferencing16Bit(o.data,o.width,o.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${s}`);break}default:throw new Error(`invalid predictor: ${o.predictor}`)}}convertAlpha(o){if(o.alpha&&o.associatedAlpha){const{data:s,components:a,maxSampleValue:h}=o;for(let c=0;c<s.length;c+=a){const d=s[c+a-1];for(let g=0;g<a-1;g++)s[c+g]=Math.round(s[c+g]*h/d)}}}}function getDataArray(e,o,s){if(o===8)return new Uint8Array(e);if(o===16)return new Uint16Array(e);if(o===32&&s===3)return new Float32Array(e);throw unsupported("bit depth / sample format",`${o} / ${s}`)}function fill8bit(e,o,s,a){for(let h=0;h<a;h++)e[s++]=o.getUint8(h);return s}function fill16bit(e,o,s,a,h){for(let c=0;c<a*2;c+=2)e[s++]=o.getUint16(c,h);return s}function fillFloat32(e,o,s,a,h){for(let c=0;c<a*4;c+=4)e[s++]=o.getFloat32(c,h);return s}function unsupported(e,o){return new Error(`Unsupported ${e}: ${o}`)}function decodeTIFF(e,o){return new TIFFDecoder(e).decode(o)}function matchAndCrop(e={}){let{algorithm:o="matchToPrevious",ignoreBorder:s=[0,0]}=e;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let a=o==="matchToPrevious",h=this[0],c=[];c[0]={position:[0,0],image:this[0]};let d=[0,0];for(let _e=1;_e<this.length;_e++){let et=h.getBestMatch(this[_e],{border:s});c[_e]={position:[et[0]+d[0],et[1]+d[1]],image:this[_e]},a&&(d[0]+=et[0],d[1]+=et[1],h=this[_e])}let g=0,b=0,_=0,$=0;for(let _e=0;_e<c.length;_e++){let et=c[_e];et.position[0]>g&&(g=et.position[0]),et.position[0]<b&&(b=et.position[0]),et.position[1]>_&&(_=et.position[1]),et.position[1]<$&&($=et.position[1])}b=0-b,$=0-$;for(let _e=0;_e<c.length;_e++){let et=c[_e];et.crop=et.image.crop({x:g-et.position[0],y:_-et.position[1],width:h.width-b-g,height:h.height-$-_})}let j=[];for(let _e=0;_e<c.length;_e++)j[_e]=c[_e].crop;return new Stack(j)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].min;for(let o=1;o<this.length;o++)for(let s=0;s<e.length;s++)e[s]=Math.min(e[s],this[o].min[s]);return e}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].max;for(let o=1;o<this.length;o++)for(let s=0;s<e.length;s++)e[s]=Math.max(e[s],this[o].max[s]);return e}function median$2(e){let o=e.reduce((d,g)=>d+g);if(o===0)throw new Error("unreachable");let s=0,a=0,h=o/2,c;for(;;){if(e[s]>0){if(c!==void 0)return(c+s)/2;if(a+=e[s],a>h)return s;a===h&&(c=s)}s++}}function mean$2(e){let o=0,s=0;for(let a=0;a<e.length;a++)o+=e[a],s+=e[a]*a;return o===0?0:s/o}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let e=this.getHistograms({maxSlots:this[0].maxValue+1}),o=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o[s]=median$2(a)}return o}function histogram(e){this.checkProcessable("min",{bitDepth:[8,16]});let o=this[0].getHistogram(e);for(let s=1;s<this.length;s++){let a=this[s].getHistogram(e);for(let h=0;h<o.length;h++)o[h]+=a[h]}return o}function histograms(e){this.checkProcessable("min",{bitDepth:[8,16]});let o=this[0].getHistograms(e),s=o[0].length;for(let a=1;a<this.length;a++){let h=this[a].getHistograms(e);for(let c=0;c<o.length;c++)for(let d=0;d<s;d++)o[c][d]+=h[c][d]}return o}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let e=new Uint32Array(this[0].data.length);for(let a=0;a<this.length;a++){let h=this[a];for(let c=0;c<this[0].data.length;c++)e[c]+=h.data[c]}let o=Image.createFrom(this[0]),s=o.data;for(let a=0;a<this[0].data.length;a++)s[a]=e[a]/this.length;return o}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let e=Image.createFrom(this[0]);e.data.fill(0);for(const o of this)for(let s=0;s<e.data.length;s++)e.data[s]=Math.max(o.data[s],e.data[s]);return e}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let e=Image.createFrom(this[0]);e.data.fill(e.maxValue);for(const o of this)for(let s=0;s<e.data.length;s++)e.data[s]=Math.min(o.data[s],e.data[s]);return e}function extend$2(e){e.extendMethod("matchAndCrop",matchAndCrop),e.extendMethod("getMin",min$2),e.extendMethod("getMax",max$2),e.extendMethod("getMedian",median$1),e.extendMethod("getHistogram",histogram),e.extendMethod("getHistograms",histograms),e.extendMethod("getAverage",averageImage),e.extendMethod("getAverageImage",averageImage),e.extendMethod("getMaxImage",maxImage),e.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(o){if(Array.isArray(o)){super(o.length);for(let s=0;s<o.length;s++)this[s]=o[s]}else typeof o=="number"?super(o):super();this.computed=null}static load(o){return Promise.all(o.map(Image.load)).then(s=>new Stack(s))}static extendMethod(o,s,a={}){let{inPlace:h=!1,returnThis:c=!0,partialArgs:d=[]}=a;return h?Stack.prototype[o]=function(...g){this.computed=null;let b=s.apply(this,[...d,...g]);return c?this:b}:Stack.prototype[o]=function(...g){return s.apply(this,[...d,...g])},Stack}static extendProperty(o,s,a={}){let{partialArgs:h=[]}=a;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(o,this.computed))return this.computed[o];let c=s.apply(this,h);return this.computed[o]=c,c},Object.defineProperty(Stack.prototype,o,computedPropertyDescriptor),Stack}checkProcessable(o,s={}){if(typeof o!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${o} can not be applied on an empty stack`);this[0].checkProcessable(o,s);for(let a=1;a<this.length;a++){if((s.sameSize===void 0||s.sameSize)&&this[0].width!==this[a].width)throw new TypeError(`The process: ${o} can not be applied if width is not identical in all images`);if((s.sameSize===void 0||s.sameSize)&&this[0].height!==this[a].height)throw new TypeError(`The process: ${o} can not be applied if height is not identical in all images`);if((s.sameAlpha===void 0||s.sameAlpha)&&this[0].alpha!==this[a].alpha)throw new TypeError(`The process: ${o} can not be applied if alpha is not identical in all images`);if((s.sameBitDepth===void 0||s.sameBitDepth)&&this[0].bitDepth!==this[a].bitDepth)throw new TypeError(`The process: ${o} can not be applied if bitDepth is not identical in all images`);if((s.sameColorModel===void 0||s.sameColorModel)&&this[0].colorModel!==this[a].colorModel)throw new TypeError(`The process: ${o} can not be applied if colorModel is not identical in all images`);if((s.sameNumberChannels===void 0||s.sameNumberChannels)&&this[0].channels!==this[a].channels)throw new TypeError(`The process: ${o} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(e,o){if(typeof e!="function")throw new TypeError(`${e} is not a function`);let s=new Stack(this.length);for(let a=0;a<this.length;a++)s[a]=e.call(o,this[a],a,this);return s});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(e,o){if(typeof e=="string")return loadURL(e,o);if(e instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(e),void 0,o&&o.ignorePalette));if(e.buffer)return Promise.resolve(loadBinary(e,void 0,o&&o.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(e,o,s){const a=imageType$1(e);if(a)switch(a.mime){case"image/png":return loadPNG(e);case"image/jpeg":return loadJPEG(e);case"image/tiff":return loadTIFF(e,s);default:return loadGeneric(h(a.mime))}return loadGeneric(h("application/octet-stream"));function h(c){return o||toBase64URL(e,c)}}function loadURL(e,o){const s=e.slice(0,64).match(isDataURL);let a;return s!==null?a=Promise.resolve(decode$3(e.slice(s[0].length))):a=fetchBinary(e,o),a.then(h=>{const c=new Uint8Array(h);return loadBinary(c,s?e:void 0,o&&o.ignorePalette)})}function loadPNG(e){const o=decodePng(e);let s=o.channels,a,h=0;return s===2||s===4?(a=s-1,h=1):a=s,o.palette?loadPNGFromPalette(o):new Image(o.width,o.height,o.data,{components:a,alpha:h,bitDepth:o.depth})}function loadPNGFromPalette(e){const o=e.width*e.height,s=e.palette[0].length,a=new Uint8Array(o*s),h=8/e.depth,c=e.depth<8?h:1,d=parseInt("1".repeat(e.depth),2),g=s===4;let b=0;for(let _=0;_<o;_++){const $=Math.floor(_/c);let j=e.data[$];e.depth<8&&(j=j>>>e.depth*(h-1-_%h)&d);const _e=e.palette[j];a[b++]=_e[0],a[b++]=_e[1],a[b++]=_e[2],g&&(a[b++]=_e[3])}return new Image(e.width,e.height,a,{components:3,alpha:g,bitDepth:8})}function loadJPEG(e){const o=decode(e);let s;o.exif&&(s=getMetadata(o.exif));const a=jpegJs.decode(e,{useTArray:!0,maxMemoryUsageInMB:1024});let h=new Image(a.width,a.height,a.data,{meta:s});if(s&&s.tiff.tags.Orientation){const c=s.tiff.tags.Orientation;c>2&&(h=h.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[c])),[2,4,5,7].includes(c)&&(h=h.flipX())}return h}function loadTIFF(e,o){let s=decodeTIFF(e);return s.length===1?getImageFromIFD(s[0],o):new Stack(s.map(function(a){return getImageFromIFD(a,o)}))}function getMetadata(e){const o={tiff:{fields:e.fields,tags:e.map}};return e.exif&&(o.exif=e.exif),e.gps&&(o.gps=e.gps),o}function getImageFromIFD(e,o){if(!o&&e.type===3){const s=new Uint16Array(3*e.width*e.height),a=e.palette;let h=0;for(let c=0;c<e.data.length;c++){const d=e.data[c],g=a[d];s[h++]=g[0],s[h++]=g[1],s[h++]=g[2]}return new Image(e.width,e.height,s,{components:3,alpha:e.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(e)})}else return new Image(e.width,e.height,e.data,{components:e.type===2?3:1,alpha:e.alpha,colorModel:e.type===2?RGB$1:GREY$1,bitDepth:e.bitsPerSample.length?e.bitsPerSample[0]:e.bitsPerSample,meta:getMetadata(e)})}function loadGeneric(e,o){return o=o||{},new Promise(function(s,a){let h=new DOMImage;h.onload=function(){let c=h.width,d=h.height,b=createCanvas(c,d).getContext("2d");b.drawImage(h,0,0,c,d);let _=b.getImageData(0,0,c,d).data;s(new Image(c,d,_,o))},h.onerror=function(){a(new Error(`Could not load ${e}`))},h.src=e})}const valueMethods={getValueXY(e,o,s){return this.data[(o*this.width+e)*this.channels+s]},setValueXY(e,o,s,a){return this.data[(o*this.width+e)*this.channels+s]=a,this.computed=null,this},getValue(e,o){return this.data[e*this.channels+o]},setValue(e,o,s){return this.data[e*this.channels+o]=s,this.computed=null,this},getPixelXY(e,o){return this.getPixel(o*this.width+e)},setPixelXY(e,o,s){return this.setPixel(o*this.width+e,s)},getPixel(e){const o=new Array(this.channels),s=e*this.channels;for(let a=0;a<this.channels;a++)o[a]=this.data[s+a];return o},setPixel(e,o){const s=e*this.channels;for(let a=0;a<o.length;a++)this.data[s+a]=o[a];return this.computed=null,this}};function setValueMethods(e){for(const o in valueMethods)e.prototype[o]=valueMethods[o]}function getImageParameters(e){return{width:e.width,height:e.height,components:e.components,alpha:e.alpha,colorModel:e.colorModel,bitDepth:e.bitDepth}}function getOutputImage(e,o,s,a={}){const{out:h}=o;if(h===void 0)return a.copy?e.clone():Image.createFrom(e,s);{if(!Image.isImage(h))throw new TypeError("out must be an Image object");const c=Object.assign(getImageParameters(e),s);for(const d in c)if(h[d]!==c[d])throw new RangeError(`cannot use out. Its ${d} must be "${c[d]}" (found "${h[d]}")`);return h}}function getOutputImageOrInPlace(e,o,s){if(o.inPlace!==void 0&&typeof o.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(o.inPlace){if(o.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return e}return getOutputImage(e,o,null,s)}function abs(e={}){this.checkProcessable("abs",{bitDepth:[32]});const o=getOutputImageOrInPlace(this,e);return absolute(this,o),o}function absolute(e,o){for(let s=0;s<e.data.length;s++)o.data[s]=Math.abs(e.data[s])}function copyAlphaChannel(e,o){if(e.alpha===1&&o.alpha===1)for(let s=0;s<e.size;s++)o.data[s*o.channels+o.components]=e.data[s*e.channels+e.components]}function invert(e={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const o=getOutputImageOrInPlace(this,e);return this.bitDepth===1?invertBinary(this,o):(invertColor(this,o),this!==o&&copyAlphaChannel(this,o)),o}function invertBinary(e,o){for(let s=0;s<e.data.length;s++)o.data[s]=~e.data[s]}function invertColor(e,o){for(let s=0;s<e.data.length;s+=e.channels)for(let a=0;a<e.components;a++)o.data[s+a]=e.maxValue-e.data[s+a]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let e=0;e<this.height;e++){let o=e*this.width*this.channels;for(let s=0;s<Math.floor(this.width/2);s++){let a=s*this.channels+o,h=(this.width-s-1)*this.channels+o;for(let c=0;c<this.channels;c++){let d=this.data[a+c];this.data[a+c]=this.data[h+c],this.data[h+c]=d}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let e=0;e<Math.floor(this.height/2);e++)for(let o=0;o<this.width;o++){let s=o*this.channels+e*this.width*this.channels,a=o*this.channels+(this.height-1-e)*this.channels*this.width;for(let h=0;h<this.channels;h++){let c=this.data[s+h];this.data[s+h]=this.data[a+h],this.data[a+h]=c}}return this}function blurFilter(e={}){const{radius:o=1}=e;if(o<1)throw new Error("radius must be greater than 1");const s=2*o+1,a=new Array(s);for(let h=0;h<s;h++){a[h]=new Array(s);for(let c=0;c<s;c++)a[h][c]=1/(s*s)}return this.convolution(a)}var medianQuickselect_min={exports:{}};(function(e){(function(){function o(h){for(var c=0,d=h.length-1,g=void 0,b=void 0,_=void 0,$=a(c,d);;){if(d<=c)return h[$];if(d==c+1)return h[c]>h[d]&&s(h,c,d),h[$];for(g=a(c,d),h[g]>h[d]&&s(h,g,d),h[c]>h[d]&&s(h,c,d),h[g]>h[c]&&s(h,g,c),s(h,g,c+1),b=c+1,_=d;;){do b++;while(h[c]>h[b]);do _--;while(h[_]>h[c]);if(_<b)break;s(h,b,_)}s(h,c,_),_<=$&&(c=b),_>=$&&(d=_-1)}}var s=function(c,d,g){var b;return b=[c[g],c[d]],c[d]=b[0],c[g]=b[1],b},a=function(c,d){return~~((c+d)/2)};e.exports?e.exports=o:window.median=o})()})(medianQuickselect_min);var medianQuickselect_minExports=medianQuickselect_min.exports;const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(e,o={}){let{channels:s,allowAlpha:a,defaultAlpha:h}=o;return typeof a!="boolean"&&(a=!0),typeof s>"u"?allChannels(e,h):validateChannels(e,s,a)}function allChannels(e,o){let s=o?e.channels:e.components,a=new Array(s);for(let h=0;h<s;h++)a[h]=h;return a}function validateChannels(e,o,s){Array.isArray(o)||(o=[o]);for(let a=0;a<o.length;a++)o[a]=validateChannel(e,o[a],s);return o}function validateChannel(e,o,s=!0){if(o===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if(typeof o=="string"){switch(e.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(o))switch(o){case"r":o=0;break;case"g":o=1;break;case"b":o=2;break}break;case HSL:if("hsl".includes(o))switch(o){case"h":o=0;break;case"s":o=1;break;case"l":o=2;break}break;case HSV:if("hsv".includes(o))switch(o){case"h":o=0;break;case"s":o=1;break;case"v":o=2;break}break;case CMYK$1:if("cmyk".includes(o))switch(o){case"c":o=0;break;case"m":o=1;break;case"y":o=2;break;case"k":o=3;break}break;default:throw new Error(`Unexpected color model: ${e.colorModel}`)}if(o==="a"){if(!e.alpha)throw new Error("validateChannel : the image does not contain alpha channel");o=e.components}if(typeof o=="string")throw new Error(`validateChannel : undefined channel: ${o}`)}if(o>=e.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if(!s&&o>=e.components)throw new RangeError("validateChannel : alpha channel may not be selected");return o}function medianFilter(e={}){let{radius:o=1,border:s="copy",channels:a}=e;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),o<1)throw new Error("radius must be greater than 0");a=validateArrayOfChannels(this,a);let h=o,c=o,d=Image.createFrom(this),g=(h*2+1)*(c*2+1),b=new Array(g);for(let _=0;_<a.length;_++){let $=a[_];for(let j=c;j<this.height-c;j++)for(let _e=h;_e<this.width-h;_e++){let et=0;for(let it=-c;it<=c;it++)for(let lt=-h;lt<=h;lt++){let tt=((j+it)*this.width+_e+lt)*this.channels+$;b[et++]=this.data[tt]}let nt=(j*this.width+_e)*this.channels+$;d.data[nt]=quickSelectMedian(b)}}if(this.alpha&&!a.includes(this.channels))for(let _=this.components;_<this.data.length;_=_+this.channels)d.data[_]=this.data[_];return d.setBorder({size:[h,c],algorithm:s}),d}function gaussianFilter(e={}){let{radius:o=1,sigma:s,channels:a,border:h="copy"}=e;this.checkProcessable("gaussian",{bitDepth:[8,16]});const c=getKernel(o,s);return this.convolution([c,c],{border:h,channels:a,algorithm:"separable"})}function getKernel(e,o){const s=e*2+1,a=new Array(s),h=o||((s-1)*.5-1)*.3+.8,c=-.5/(h*h);let d=0;for(let g=0;g<s;g++){const b=g-e,_=Math.exp(c*b*b);a[g]=_,d+=_}for(let g=0;g<s;g++)a[g]/=d;return a}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$3={},fftlib={};(function(e){(function(){var o;o=e;var s={release:"0.3.0",date:"2013-03"};o.toString=function(){return"version "+s.release+", released "+s.date};for(var a=0,h=null,c=null,d={init:function(_){if(_!==0&&!(_&_-1))a=_,d._initArray(),d._makeBitReversalTable(),d._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(_,$){d.fft(_,$,1)},ifft1d:function(_,$){var j=1/a;d.fft(_,$,-1);for(var _e=0;_e<a;_e++)_[_e]*=j,$[_e]*=j},bt1d:function(_,$){d.fft(_,$,-1)},fft2d:function(_,$){for(var j=[],_e=[],et=0,nt=0;nt<a;nt++){et=nt*a;for(var it=0;it<a;it++)j[it]=_[it+et],_e[it]=$[it+et];d.fft1d(j,_e);for(var lt=0;lt<a;lt++)_[lt+et]=j[lt],$[lt+et]=_e[lt]}for(var tt=0;tt<a;tt++){for(var st=0;st<a;st++)et=tt+st*a,j[st]=_[et],_e[st]=$[et];d.fft1d(j,_e);for(var rt=0;rt<a;rt++)et=tt+rt*a,_[et]=j[rt],$[et]=_e[rt]}},ifft2d:function(_,$){for(var j=[],_e=[],et=0,nt=0;nt<a;nt++){et=nt*a;for(var it=0;it<a;it++)j[it]=_[it+et],_e[it]=$[it+et];d.ifft1d(j,_e);for(var lt=0;lt<a;lt++)_[lt+et]=j[lt],$[lt+et]=_e[lt]}for(var tt=0;tt<a;tt++){for(var st=0;st<a;st++)et=tt+st*a,j[st]=_[et],_e[st]=$[et];d.ifft1d(j,_e);for(var rt=0;rt<a;rt++)et=tt+rt*a,_[et]=j[rt],$[et]=_e[rt]}},fft:function(_,$,j){for(var _e,et,nt,it,lt,tt,st,rt,ot,ut=a>>2,gt=0;gt<a;gt++)it=h[gt],gt<it&&(lt=_[gt],_[gt]=_[it],_[it]=lt,lt=$[gt],$[gt]=$[it],$[it]=lt);for(var pt=1;pt<a;pt<<=1){et=0,_e=a/(pt<<1);for(var ht=0;ht<pt;ht++){tt=c[et+ut],st=j*c[et];for(var ct=ht;ct<a;ct+=pt<<1)nt=ct+pt,rt=tt*_[nt]+st*$[nt],ot=tt*$[nt]-st*_[nt],_[nt]=_[ct]-rt,_[ct]+=rt,$[nt]=$[ct]-ot,$[ct]+=ot;et+=_e}}},_initArray:function(){typeof Uint32Array<"u"?h=new Uint32Array(a):h=[],typeof Float64Array<"u"?c=new Float64Array(a*1.25):c=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var _=0,$=0,j=0;for(h[0]=0;++_<a;){for(j=a>>1;j<=$;)$-=j,j>>=1;$+=j,h[_]=$}},_makeCosSinTable:function(){var _=a>>1,$=a>>2,j=a>>3,_e=_+$,et=Math.sin(Math.PI/a),nt=2*et*et,it=Math.sqrt(nt*(2-nt)),lt=c[$]=1,tt=c[0]=0;et=2*nt;for(var st=1;st<j;st++)lt-=nt,nt+=et*lt,tt+=it,it-=et*tt,c[st]=tt,c[$-st]=lt;j!==0&&(c[j]=Math.sqrt(.5));for(var rt=0;rt<$;rt++)c[_-rt]=c[rt];for(var ot=0;ot<_e;ot++)c[ot+_]=-c[ot]}},g=["init","fft1d","ifft1d","fft2d","ifft2d"],b=0;b<g.length;b++)o[g[b]]=d[g[b]];return o.bt=d.bt1d,o.fft=d.fft1d,o.ifft=d.ifft1d,o}).call(commonjsGlobal)})(fftlib);var FFT$1=fftlib,FFTUtils$1={DEBUG:!1,ifft2DArray:function(e,o,s){var a=new Array(o*s),h=o/2,c=(s-1)*2;FFT$1.init(h);for(var d={re:new Array(h),im:new Array(h)},g=0;g<s;g++){for(var b=h-1;b>=0;b--)d.re[b]=e[b*2*s+g],d.im[b]=e[(b*2+1)*s+g];FFT$1.bt(d.re,d.im);for(var b=h-1;b>=0;b--)a[b*2*s+g]=d.re[b],a[(b*2+1)*s+g]=d.im[b]}var _=new Array(h*c);FFT$1.init(c);for(var $={re:new Array(c),im:new Array(c)},j=c*h,b=0;b<o;b+=2){$.re[0]=a[b*s],$.im[0]=a[(b+1)*s];for(var g=1;g<s;g++)$.re[g]=a[b*s+g],$.im[g]=a[(b+1)*s+g],$.re[c-g]=a[b*s+g],$.im[c-g]=-a[(b+1)*s+g];FFT$1.bt($.re,$.im);for(var _e=b/2*c,g=c-1;g>=0;g--)_[_e+g]=$.re[g]/j}return _},fft2DArray:function(e,o,s,a){Object.assign({},{inplace:!0});var h=s/2+1,c=o*2,d=new Array(c*h);FFT$1.init(s);for(var g={re:new Array(s),im:new Array(s)},b={re:new Array(s),im:new Array(s)},_={re:new Array(s),im:new Array(s)},$,j,_e,et,nt,it=0;it<o/2;it++){$=it*2*s,g.re=e.slice($,$+s),$=(it*2+1)*s,g.im=e.slice($,$+s),FFT$1.fft1d(g.re,g.im),this.reconstructTwoRealFFT(g,b,_),j=it*4*h,_e=(it*4+1)*h,et=(it*4+2)*h,nt=(it*4+3)*h;for(var lt=h-1;lt>=0;lt--)d[j+lt]=b.re[lt],d[_e+lt]=b.im[lt],d[et+lt]=_.re[lt],d[nt+lt]=_.im[lt]}b=null,_=null;var tt=new Array(c*h);FFT$1.init(o);for(var st={re:new Array(o),im:new Array(o)},rt=h-1;rt>=0;rt--){for(var it=o-1;it>=0;it--)st.re[it]=d[it*2*h+rt],st.im[it]=d[(it*2+1)*h+rt],isNaN(st.re[it])&&(st.re[it]=0),isNaN(st.im[it])&&(st.im[it]=0);FFT$1.fft1d(st.re,st.im);for(var it=o-1;it>=0;it--)tt[it*2*h+rt]=st.re[it],tt[(it*2+1)*h+rt]=st.im[it]}return tt},reconstructTwoRealFFT:function(e,o,s){var a=e.re.length;o.re[0]=e.re[0],o.im[0]=0,s.re[0]=e.im[0],s.im[0]=0;for(var h,c,d,g,b,_=a/2;_>0;_--)b=a-_,h=.5*(e.re[_]-e.re[b]),c=.5*(e.re[_]+e.re[b]),d=.5*(e.im[_]-e.im[b]),g=.5*(e.im[_]+e.im[b]),o.re[_]=c,o.im[_]=d,o.re[b]=c,o.im[b]=-d,s.re[_]=g,s.im[_]=-h,s.re[b]=g,s.im[b]=h},convolute2DI:function(e,o,s,a){for(var h,c,d=0;d<s/2;d++)for(var g=0;g<a;g++)h=e[d*2*a+g]*o[d*2*a+g]-e[(d*2+1)*a+g]*o[(d*2+1)*a+g],c=e[d*2*a+g]*o[(d*2+1)*a+g]+e[(d*2+1)*a+g]*o[d*2*a+g],e[d*2*a+g]=h,e[(d*2+1)*a+g]=c},convolute:function(e,o,s,a,h){for(var c=new Array(a*s),d=0;d<s*a;d++)c[d]=e[d];c=this.fft2DArray(c,s,a);for(var g=o.length,b=o[0].length,_=new Array(a*s),d=0;d<a*s;d++)_[d]=0;for(var $,j,_e=Math.floor((g-1)/2),et=Math.floor((b-1)/2),nt=0;nt<g;nt++){$=(nt-_e+s)%s;for(var it=0;it<b;it++)j=(it-et+a)%a,_[$*a+j]=o[nt][it]}_=this.fft2DArray(_,s,a);var lt=s*2,tt=a/2+1;return this.convolute2DI(c,_,lt,tt),this.ifft2DArray(c,lt,tt)},toRadix2:function(e,o,s){var a,h,c,d,g=s,b=o;if(!(s!==0&&!(s&s-1))){for(g=0;s>>++g;);g=1<<g}if(!(o!==0&&!(o&o-1))){for(b=0;o>>++b;);b=1<<b}if(b==o&&g==s)return{data:e,rows:o,cols:s};var _=new Array(b*g),$=Math.floor((b-o)/2)-o,j=Math.floor((g-s)/2)-s;for(a=0;a<b;a++)for(c=a*g,d=(a-$)%o*s,h=0;h<g;h++)_[c+h]=e[d+(h-j)%s];return{data:_,rows:b,cols:g}},crop:function(e,o,s,a,h,c){if(o==a&&s==h)return e;Object.assign({},c);var d=new Array(h*a),g=Math.floor((o-a)/2),b=Math.floor((s-h)/2),_,$,j,_e;for(j=0;j<a;j++)for(_=j*h,$=(j+g)*s,_e=0;_e<h;_e++)d[_+_e]=e[$+(_e+b)];return d}},FFTUtils_1=FFTUtils$1;src$3.FFTUtils=FFTUtils_1;src$3.FFT=fftlib;var FFTUtils=src$3.FFTUtils;function convolutionFFT(e,o,s){var a=matrix2Array(e),h=a.data,c=Object.assign({normalize:!1,divisor:1,rows:a.rows,cols:a.cols},s),d,g;if(c.rows&&c.cols)d=c.rows,g=c.cols;else throw new Error("Invalid number of rows or columns "+d+" "+g);var b=c.divisor,_,$,j=o.length,_e=o[0].length;if(c.normalize)for(b=0,_=0;_<j;_++)for($=0;$<_e;$++)b+=o[_][$];if(b===0)throw new RangeError("convolution: The divisor is equal to zero");var et=FFTUtils.toRadix2(h,d,g),nt=FFTUtils.convolute(et.data,o,et.rows,et.cols);if(nt=FFTUtils.crop(nt,et.rows,et.cols,d,g),b!=0&&b!=1)for(_=0;_<nt.length;_++)nt[_]/=b;return nt}function convolutionDirect(e,o,s){var a=matrix2Array(e),h=a.data,c=Object.assign({normalize:!1,divisor:1,rows:a.rows,cols:a.cols},s),d,g;if(c.rows&&c.cols)d=c.rows,g=c.cols;else throw new Error("Invalid number of rows or columns "+d+" "+g);var b=c.divisor,_=o.length,$=o[0].length,j,_e,et,nt,it,lt,tt,st,rt;if(c.normalize)for(b=0,j=0;j<_;j++)for(_e=0;_e<$;_e++)b+=o[j][_e];if(b===0)throw new RangeError("convolution: The divisor is equal to zero");var ot=new Array(d*g),ut=Math.floor(_/2),gt=Math.floor($/2);for(nt=0;nt<d;nt++)for(et=0;et<g;et++){for(lt=0,_e=0;_e<_;_e++)for(j=0;j<$;j++)tt=o[_-_e-1][$-j-1],st=(nt+_e-ut+d)%d,rt=(et+j-gt+g)%g,it=st*g+rt,lt+=h[it]*tt;it=nt*g+et,ot[it]=lt/b}return ot}function LoG(e,o,s){var a=1e3;s&&s.factor&&(a=s.factor);var h=new Array(o),c,d,g,b;a*=-1;var _=(o-1)/2,$=2*e*e;for(c=0;c<o;c++)for(h[c]=new Array(o),b=(c-_)*(c-_),d=0;d<o;d++)g=-((d-_)*(d-_)+b)/$,h[c][d]=Math.round(a*(1+g)*Math.exp(g));return h}function matrix2Array(e){var o=e,s,a;if(typeof e[0]!="number"){s=e.length,a=e[0].length,o=new Array(s*a);for(var h=0;h<s;h++)for(var c=0;c<a;c++)o[h*a+c]=e[h][c]}else{var d=Math.sqrt(e.length);Number.isInteger(d)&&(s=d,a=d)}return{data:o,rows:s,cols:a}}var src$2={fft:convolutionFFT,direct:convolutionDirect,kernelFactory:{LoG},matrix2Array},_isFinite=Number.isFinite||function(e){return!(typeof e!="number"||e!==e||e===1/0||e===-1/0)},isFinite$1=_isFinite,isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite$1(e)&&Math.floor(e)===e};const isInteger$1=getDefaultExportFromCjs(isInteger);function validateKernel(e){let o,s;if(Array.isArray(e))if(Array.isArray(e[0])){if(!(e.length&1)||!(e[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");o=Math.floor(e.length/2),s=Math.floor(e[0].length/2)}else{let a=Math.sqrt(e.length);if(isInteger$1(a))s=o=Math.floor(Math.sqrt(e.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let h=new Array(a);for(let c=0;c<a;c++){h[c]=new Array(a);for(let d=0;d<a;d++)h[c][d]=e[c*a+d]}e=h}else throw new Error(`validateKernel: Invalid Kernel: ${e}`);return{kernel:e,kWidth:s,kHeight:o}}function clamp(e,o){return Math.round(Math.min(Math.max(e,0),o.maxValue))}function directConvolution(e,o,s){if(s===void 0){const c=e.length+o.length-1;s=new Array(c)}fill(s);for(var a=0;a<e.length;a++)for(var h=0;h<o.length;h++)s[a+h]+=e[a]*o[h];return s}function fill(e){for(var o=0;o<e.length;o++)e[o]=0}function FFT(e){if(this.size=e|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=e<<1;for(var o=new Array(this.size*2),s=0;s<o.length;s+=2){const b=Math.PI*s/this.size;o[s]=Math.cos(b),o[s+1]=-Math.sin(b)}this.table=o;for(var a=0,h=1;this.size>h;h<<=1)a++;this._width=a%2===0?a-1:a,this._bitrev=new Array(1<<this._width);for(var c=0;c<this._bitrev.length;c++){this._bitrev[c]=0;for(var d=0;d<this._width;d+=2){var g=this._width-d-2;this._bitrev[c]|=(c>>>d&3)<<g}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function e(o,s){for(var a=s||new Array(o.length>>>1),h=0;h<o.length;h+=2)a[h>>>1]=o[h];return a};FFT.prototype.createComplexArray=function e(){const o=new Array(this._csize);for(var s=0;s<o.length;s++)o[s]=0;return o};FFT.prototype.toComplexArray=function e(o,s){for(var a=s||this.createComplexArray(),h=0;h<a.length;h+=2)a[h]=o[h>>>1],a[h+1]=0;return a};FFT.prototype.completeSpectrum=function e(o){for(var s=this._csize,a=s>>>1,h=2;h<a;h+=2)o[s-h]=o[h],o[s-h+1]=-o[h+1]};FFT.prototype.transform=function e(o,s){if(o===s)throw new Error("Input and output buffers must be different");this._out=o,this._data=s,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function e(o,s){if(o===s)throw new Error("Input and output buffers must be different");this._out=o,this._data=s,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function e(o,s){if(o===s)throw new Error("Input and output buffers must be different");this._out=o,this._data=s,this._inv=1,this._transform4();for(var a=0;a<o.length;a++)o[a]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function e(){var o=this._out,s=this._csize,a=this._width,h=1<<a,c=s/h<<1,d,g,b=this._bitrev;if(c===4)for(d=0,g=0;d<s;d+=c,g++){const it=b[g];this._singleTransform2(d,it,h)}else for(d=0,g=0;d<s;d+=c,g++){const it=b[g];this._singleTransform4(d,it,h)}var _=this._inv?-1:1,$=this.table;for(h>>=2;h>=2;h>>=2){c=s/h<<1;var j=c>>>2;for(d=0;d<s;d+=c)for(var _e=d+j,et=d,nt=0;et<_e;et+=2,nt+=h){const it=et,lt=it+j,tt=lt+j,st=tt+j,rt=o[it],ot=o[it+1],ut=o[lt],gt=o[lt+1],pt=o[tt],ht=o[tt+1],ct=o[st],at=o[st+1],ft=rt,mt=ot,xt=$[nt],bt=_*$[nt+1],Et=ut*xt-gt*bt,Bt=ut*bt+gt*xt,Nt=$[2*nt],vt=_*$[2*nt+1],St=pt*Nt-ht*vt,kt=pt*vt+ht*Nt,$t=$[3*nt],Pt=_*$[3*nt+1],It=ct*$t-at*Pt,Dt=ct*Pt+at*$t,At=ft+St,Rt=mt+kt,Ot=ft-St,en=mt-kt,Gt=Et+It,Qt=Bt+Dt,tn=_*(Et-It),un=_*(Bt-Dt),nn=At+Gt,Lt=Rt+Qt,Ct=At-Gt,rn=Rt-Qt,Zt=Ot+un,qt=en-tn,_t=Ot-un,Vt=en+tn;o[it]=nn,o[it+1]=Lt,o[lt]=Zt,o[lt+1]=qt,o[tt]=Ct,o[tt+1]=rn,o[st]=_t,o[st+1]=Vt}}};FFT.prototype._singleTransform2=function e(o,s,a){const h=this._out,c=this._data,d=c[s],g=c[s+1],b=c[s+a],_=c[s+a+1],$=d+b,j=g+_,_e=d-b,et=g-_;h[o]=$,h[o+1]=j,h[o+2]=_e,h[o+3]=et};FFT.prototype._singleTransform4=function e(o,s,a){const h=this._out,c=this._data,d=this._inv?-1:1,g=a*2,b=a*3,_=c[s],$=c[s+1],j=c[s+a],_e=c[s+a+1],et=c[s+g],nt=c[s+g+1],it=c[s+b],lt=c[s+b+1],tt=_+et,st=$+nt,rt=_-et,ot=$-nt,ut=j+it,gt=_e+lt,pt=d*(j-it),ht=d*(_e-lt),ct=tt+ut,at=st+gt,ft=rt+ht,mt=ot-pt,xt=tt-ut,bt=st-gt,Et=rt-ht,Bt=ot+pt;h[o]=ct,h[o+1]=at,h[o+2]=ft,h[o+3]=mt,h[o+4]=xt,h[o+5]=bt,h[o+6]=Et,h[o+7]=Bt};FFT.prototype._realTransform4=function e(){var o=this._out,s=this._csize,a=this._width,h=1<<a,c=s/h<<1,d,g,b=this._bitrev;if(c===4)for(d=0,g=0;d<s;d+=c,g++){const sn=b[g];this._singleRealTransform2(d,sn>>>1,h>>>1)}else for(d=0,g=0;d<s;d+=c,g++){const sn=b[g];this._singleRealTransform4(d,sn>>>1,h>>>1)}var _=this._inv?-1:1,$=this.table;for(h>>=2;h>=2;h>>=2){c=s/h<<1;var j=c>>>1,_e=j>>>1,et=_e>>>1;for(d=0;d<s;d+=c)for(var nt=0,it=0;nt<=et;nt+=2,it+=h){var lt=d+nt,tt=lt+_e,st=tt+_e,rt=st+_e,ot=o[lt],ut=o[lt+1],gt=o[tt],pt=o[tt+1],ht=o[st],ct=o[st+1],at=o[rt],ft=o[rt+1],mt=ot,xt=ut,bt=$[it],Et=_*$[it+1],Bt=gt*bt-pt*Et,Nt=gt*Et+pt*bt,vt=$[2*it],St=_*$[2*it+1],kt=ht*vt-ct*St,$t=ht*St+ct*vt,Pt=$[3*it],It=_*$[3*it+1],Dt=at*Pt-ft*It,At=at*It+ft*Pt,Rt=mt+kt,Ot=xt+$t,en=mt-kt,Gt=xt-$t,Qt=Bt+Dt,tn=Nt+At,un=_*(Bt-Dt),nn=_*(Nt-At),Lt=Rt+Qt,Ct=Ot+tn,rn=en+nn,Zt=Gt-un;if(o[lt]=Lt,o[lt+1]=Ct,o[tt]=rn,o[tt+1]=Zt,nt===0){var qt=Rt-Qt,_t=Ot-tn;o[st]=qt,o[st+1]=_t;continue}if(nt!==et){var Vt=en,Xt=-Gt,Ht=Rt,Tt=-Ot,hn=-_*nn,on=-_*un,jt=-_*tn,Yt=-_*Qt,Kt=Vt+hn,Ut=Xt+on,Jt=Ht+Yt,an=Tt-jt,Wt=d+_e-nt,ln=d+j-nt;o[Wt]=Kt,o[Wt+1]=Ut,o[ln]=Jt,o[ln+1]=an}}}};FFT.prototype._singleRealTransform2=function e(o,s,a){const h=this._out,c=this._data,d=c[s],g=c[s+a],b=d+g,_=d-g;h[o]=b,h[o+1]=0,h[o+2]=_,h[o+3]=0};FFT.prototype._singleRealTransform4=function e(o,s,a){const h=this._out,c=this._data,d=this._inv?-1:1,g=a*2,b=a*3,_=c[s],$=c[s+a],j=c[s+g],_e=c[s+b],et=_+j,nt=_-j,it=$+_e,lt=d*($-_e),tt=et+it,st=nt,rt=-lt,ot=et-it,ut=nt,gt=lt;h[o]=tt,h[o+1]=0,h[o+2]=st,h[o+3]=rt,h[o+4]=ot,h[o+5]=0,h[o+6]=ut,h[o+7]=gt};function convolutionSeparable(e,o,s,a){const h=new Array(e.length);let c,d,g,b;b=o[1],g=(b.length-1)/2,d=new Array(s+b.length-1),c=new Array(s);for(let _=0;_<a;_++){for(let $=0;$<s;$++)c[$]=e[_*s+$];directConvolution(c,b,d);for(let $=0;$<s;$++)h[_*s+$]=d[g+$]}b=o[0],g=(b.length-1)/2,d=new Array(a+b.length-1),c=new Array(a);for(let _=0;_<s;_++){for(let $=0;$<a;$++)c[$]=h[$*s+_];directConvolution(c,b,d);for(let $=0;$<a;$++)h[$*s+_]=d[g+$]}return h}const toString$1=Object.prototype.toString;function isAnyArray(e){const o=toString$1.call(e);return o.endsWith("Array]")&&!o.includes("Big")}function max$1(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var s=o.fromIndex,a=s===void 0?0:s,h=o.toIndex,c=h===void 0?e.length:h;if(a<0||a>=e.length||!Number.isInteger(a))throw new Error("fromIndex must be a positive integer smaller than length");if(c<=a||c>e.length||!Number.isInteger(c))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=e[a],g=a+1;g<c;g++)e[g]>d&&(d=e[g]);return d}function min$1(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var s=o.fromIndex,a=s===void 0?0:s,h=o.toIndex,c=h===void 0?e.length:h;if(a<0||a>=e.length||!Number.isInteger(a))throw new Error("fromIndex must be a positive integer smaller than length");if(c<=a||c>e.length||!Number.isInteger(c))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=e[a],g=a+1;g<c;g++)e[g]<d&&(d=e[g]);return d}function rescale(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var s;if(o.output!==void 0){if(!isAnyArray(o.output))throw new TypeError("output option must be an array if specified");s=o.output}else s=new Array(e.length);var a=min$1(e),h=max$1(e);if(a===h)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var c=o.min,d=c===void 0?o.autoMinMax?a:0:c,g=o.max,b=g===void 0?o.autoMinMax?h:1:g;if(d>=b)throw new RangeError("min option must be smaller than max option");for(var _=(b-d)/(h-a),$=0;$<e.length;$++)s[$]=(e[$]-a)*_+d;return s}const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(e,o={}){const{maxRows:s=15,maxColumns:a=10,maxNumSize:h=8,padMinus:c="auto"}=o;return`${e.constructor.name} {
${indent}[
${indentData}${inspectData(e,s,a,h,c)}
${indent}]
${indent}rows: ${e.rows}
${indent}columns: ${e.columns}
}`}function inspectData(e,o,s,a,h){const{rows:c,columns:d}=e,g=Math.min(c,o),b=Math.min(d,s),_=[];if(h==="auto"){h=!1;e:for(let $=0;$<g;$++)for(let j=0;j<b;j++)if(e.get($,j)<0){h=!0;break e}}for(let $=0;$<g;$++){let j=[];for(let _e=0;_e<b;_e++)j.push(formatNumber(e.get($,_e),a,h));_.push(`${j.join(" ")}`)}return b!==d&&(_[_.length-1]+=` ... ${d-s} more columns`),g!==c&&_.push(`... ${c-o} more rows`),_.join(`
${indentData}`)}function formatNumber(e,o,s){return(e>=0&&s?` ${formatNumber2(e,o-1)}`:formatNumber2(e,o)).padEnd(o)}function formatNumber2(e,o){let s=e.toString();if(s.length<=o)return s;let a=e.toFixed(o);if(a.length>o&&(a=e.toFixed(Math.max(0,o-(a.length-o)))),a.length<=o&&!a.startsWith("0.000")&&!a.startsWith("-0.000"))return a;let h=e.toExponential(o);return h.length>o&&(h=e.toExponential(Math.max(0,o-(h.length-o)))),h.slice(0)}function installMathOperations(e,o){e.prototype.add=function(a){return typeof a=="number"?this.addS(a):this.addM(a)},e.prototype.addS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)+a);return this},e.prototype.addM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)+a.get(h,c));return this},e.add=function(a,h){return new o(a).add(h)},e.prototype.sub=function(a){return typeof a=="number"?this.subS(a):this.subM(a)},e.prototype.subS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)-a);return this},e.prototype.subM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)-a.get(h,c));return this},e.sub=function(a,h){return new o(a).sub(h)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(a){return typeof a=="number"?this.mulS(a):this.mulM(a)},e.prototype.mulS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)*a);return this},e.prototype.mulM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)*a.get(h,c));return this},e.mul=function(a,h){return new o(a).mul(h)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(a){return typeof a=="number"?this.divS(a):this.divM(a)},e.prototype.divS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)/a);return this},e.prototype.divM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)/a.get(h,c));return this},e.div=function(a,h){return new o(a).div(h)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(a){return typeof a=="number"?this.modS(a):this.modM(a)},e.prototype.modS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)%a);return this},e.prototype.modM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)%a.get(h,c));return this},e.mod=function(a,h){return new o(a).mod(h)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(a){return typeof a=="number"?this.andS(a):this.andM(a)},e.prototype.andS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)&a);return this},e.prototype.andM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)&a.get(h,c));return this},e.and=function(a,h){return new o(a).and(h)},e.prototype.or=function(a){return typeof a=="number"?this.orS(a):this.orM(a)},e.prototype.orS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)|a);return this},e.prototype.orM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)|a.get(h,c));return this},e.or=function(a,h){return new o(a).or(h)},e.prototype.xor=function(a){return typeof a=="number"?this.xorS(a):this.xorM(a)},e.prototype.xorS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)^a);return this},e.prototype.xorM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)^a.get(h,c));return this},e.xor=function(a,h){return new o(a).xor(h)},e.prototype.leftShift=function(a){return typeof a=="number"?this.leftShiftS(a):this.leftShiftM(a)},e.prototype.leftShiftS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)<<a);return this},e.prototype.leftShiftM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)<<a.get(h,c));return this},e.leftShift=function(a,h){return new o(a).leftShift(h)},e.prototype.signPropagatingRightShift=function(a){return typeof a=="number"?this.signPropagatingRightShiftS(a):this.signPropagatingRightShiftM(a)},e.prototype.signPropagatingRightShiftS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)>>a);return this},e.prototype.signPropagatingRightShiftM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)>>a.get(h,c));return this},e.signPropagatingRightShift=function(a,h){return new o(a).signPropagatingRightShift(h)},e.prototype.rightShift=function(a){return typeof a=="number"?this.rightShiftS(a):this.rightShiftM(a)},e.prototype.rightShiftS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)>>>a);return this},e.prototype.rightShiftM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,this.get(h,c)>>>a.get(h,c));return this},e.rightShift=function(a,h){return new o(a).rightShift(h)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,~this.get(a,h));return this},e.not=function(a){return new o(a).not()},e.prototype.abs=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.abs(this.get(a,h)));return this},e.abs=function(a){return new o(a).abs()},e.prototype.acos=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.acos(this.get(a,h)));return this},e.acos=function(a){return new o(a).acos()},e.prototype.acosh=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.acosh(this.get(a,h)));return this},e.acosh=function(a){return new o(a).acosh()},e.prototype.asin=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.asin(this.get(a,h)));return this},e.asin=function(a){return new o(a).asin()},e.prototype.asinh=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.asinh(this.get(a,h)));return this},e.asinh=function(a){return new o(a).asinh()},e.prototype.atan=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.atan(this.get(a,h)));return this},e.atan=function(a){return new o(a).atan()},e.prototype.atanh=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.atanh(this.get(a,h)));return this},e.atanh=function(a){return new o(a).atanh()},e.prototype.cbrt=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.cbrt(this.get(a,h)));return this},e.cbrt=function(a){return new o(a).cbrt()},e.prototype.ceil=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.ceil(this.get(a,h)));return this},e.ceil=function(a){return new o(a).ceil()},e.prototype.clz32=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.clz32(this.get(a,h)));return this},e.clz32=function(a){return new o(a).clz32()},e.prototype.cos=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.cos(this.get(a,h)));return this},e.cos=function(a){return new o(a).cos()},e.prototype.cosh=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.cosh(this.get(a,h)));return this},e.cosh=function(a){return new o(a).cosh()},e.prototype.exp=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.exp(this.get(a,h)));return this},e.exp=function(a){return new o(a).exp()},e.prototype.expm1=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.expm1(this.get(a,h)));return this},e.expm1=function(a){return new o(a).expm1()},e.prototype.floor=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.floor(this.get(a,h)));return this},e.floor=function(a){return new o(a).floor()},e.prototype.fround=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.fround(this.get(a,h)));return this},e.fround=function(a){return new o(a).fround()},e.prototype.log=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.log(this.get(a,h)));return this},e.log=function(a){return new o(a).log()},e.prototype.log1p=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.log1p(this.get(a,h)));return this},e.log1p=function(a){return new o(a).log1p()},e.prototype.log10=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.log10(this.get(a,h)));return this},e.log10=function(a){return new o(a).log10()},e.prototype.log2=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.log2(this.get(a,h)));return this},e.log2=function(a){return new o(a).log2()},e.prototype.round=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.round(this.get(a,h)));return this},e.round=function(a){return new o(a).round()},e.prototype.sign=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.sign(this.get(a,h)));return this},e.sign=function(a){return new o(a).sign()},e.prototype.sin=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.sin(this.get(a,h)));return this},e.sin=function(a){return new o(a).sin()},e.prototype.sinh=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.sinh(this.get(a,h)));return this},e.sinh=function(a){return new o(a).sinh()},e.prototype.sqrt=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.sqrt(this.get(a,h)));return this},e.sqrt=function(a){return new o(a).sqrt()},e.prototype.tan=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.tan(this.get(a,h)));return this},e.tan=function(a){return new o(a).tan()},e.prototype.tanh=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.tanh(this.get(a,h)));return this},e.tanh=function(a){return new o(a).tanh()},e.prototype.trunc=function(){for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.set(a,h,Math.trunc(this.get(a,h)));return this},e.trunc=function(a){return new o(a).trunc()},e.pow=function(a,h){return new o(a).pow(h)},e.prototype.pow=function(a){return typeof a=="number"?this.powS(a):this.powM(a)},e.prototype.powS=function(a){for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,Math.pow(this.get(h,c),a));return this},e.prototype.powM=function(a){if(a=o.checkMatrix(a),this.rows!==a.rows||this.columns!==a.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let c=0;c<this.columns;c++)this.set(h,c,Math.pow(this.get(h,c),a.get(h,c)));return this}}function checkRowIndex(e,o,s){let a=s?e.rows:e.rows-1;if(o<0||o>a)throw new RangeError("Row index out of range")}function checkColumnIndex(e,o,s){let a=s?e.columns:e.columns-1;if(o<0||o>a)throw new RangeError("Column index out of range")}function checkRowVector(e,o){if(o.to1DArray&&(o=o.to1DArray()),o.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return o}function checkColumnVector(e,o){if(o.to1DArray&&(o=o.to1DArray()),o.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return o}function checkRowIndices(e,o){if(!isAnyArray(o))throw new TypeError("row indices must be an array");for(let s=0;s<o.length;s++)if(o[s]<0||o[s]>=e.rows)throw new RangeError("row indices are out of range")}function checkColumnIndices(e,o){if(!isAnyArray(o))throw new TypeError("column indices must be an array");for(let s=0;s<o.length;s++)if(o[s]<0||o[s]>=e.columns)throw new RangeError("column indices are out of range")}function checkRange(e,o,s,a,h){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",o),checkNumber("endRow",s),checkNumber("startColumn",a),checkNumber("endColumn",h),o>s||a>h||o<0||o>=e.rows||s<0||s>=e.rows||a<0||a>=e.columns||h<0||h>=e.columns)throw new RangeError("Submatrix indices are out of range")}function newArray$2(e,o=0){let s=[];for(let a=0;a<e;a++)s.push(o);return s}function checkNumber(e,o){if(typeof o!="number")throw new TypeError(`${e} must be a number`)}function checkNonEmpty(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}function sumByRow(e){let o=newArray$2(e.rows);for(let s=0;s<e.rows;++s)for(let a=0;a<e.columns;++a)o[s]+=e.get(s,a);return o}function sumByColumn(e){let o=newArray$2(e.columns);for(let s=0;s<e.rows;++s)for(let a=0;a<e.columns;++a)o[a]+=e.get(s,a);return o}function sumAll(e){let o=0;for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)o+=e.get(s,a);return o}function productByRow(e){let o=newArray$2(e.rows,1);for(let s=0;s<e.rows;++s)for(let a=0;a<e.columns;++a)o[s]*=e.get(s,a);return o}function productByColumn(e){let o=newArray$2(e.columns,1);for(let s=0;s<e.rows;++s)for(let a=0;a<e.columns;++a)o[a]*=e.get(s,a);return o}function productAll(e){let o=1;for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)o*=e.get(s,a);return o}function varianceByRow(e,o,s){const a=e.rows,h=e.columns,c=[];for(let d=0;d<a;d++){let g=0,b=0,_=0;for(let $=0;$<h;$++)_=e.get(d,$)-s[d],g+=_,b+=_*_;o?c.push((b-g*g/h)/(h-1)):c.push((b-g*g/h)/h)}return c}function varianceByColumn(e,o,s){const a=e.rows,h=e.columns,c=[];for(let d=0;d<h;d++){let g=0,b=0,_=0;for(let $=0;$<a;$++)_=e.get($,d)-s[d],g+=_,b+=_*_;o?c.push((b-g*g/a)/(a-1)):c.push((b-g*g/a)/a)}return c}function varianceAll(e,o,s){const a=e.rows,h=e.columns,c=a*h;let d=0,g=0,b=0;for(let _=0;_<a;_++)for(let $=0;$<h;$++)b=e.get(_,$)-s,d+=b,g+=b*b;return o?(g-d*d/c)/(c-1):(g-d*d/c)/c}function centerByRow(e,o){for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)e.set(s,a,e.get(s,a)-o[s])}function centerByColumn(e,o){for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)e.set(s,a,e.get(s,a)-o[a])}function centerAll(e,o){for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)e.set(s,a,e.get(s,a)-o)}function getScaleByRow(e){const o=[];for(let s=0;s<e.rows;s++){let a=0;for(let h=0;h<e.columns;h++)a+=Math.pow(e.get(s,h),2)/(e.columns-1);o.push(Math.sqrt(a))}return o}function scaleByRow(e,o){for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)e.set(s,a,e.get(s,a)/o[s])}function getScaleByColumn(e){const o=[];for(let s=0;s<e.columns;s++){let a=0;for(let h=0;h<e.rows;h++)a+=Math.pow(e.get(h,s),2)/(e.rows-1);o.push(Math.sqrt(a))}return o}function scaleByColumn(e,o){for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)e.set(s,a,e.get(s,a)/o[a])}function getScaleAll(e){const o=e.size-1;let s=0;for(let a=0;a<e.columns;a++)for(let h=0;h<e.rows;h++)s+=Math.pow(e.get(h,a),2)/o;return Math.sqrt(s)}function scaleAll(e,o){for(let s=0;s<e.rows;s++)for(let a=0;a<e.columns;a++)e.set(s,a,e.get(s,a)/o)}class AbstractMatrix{static from1DArray(o,s,a){if(o*s!==a.length)throw new RangeError("data length does not match given dimensions");let c=new Matrix$2(o,s);for(let d=0;d<o;d++)for(let g=0;g<s;g++)c.set(d,g,a[d*s+g]);return c}static rowVector(o){let s=new Matrix$2(1,o.length);for(let a=0;a<o.length;a++)s.set(0,a,o[a]);return s}static columnVector(o){let s=new Matrix$2(o.length,1);for(let a=0;a<o.length;a++)s.set(a,0,o[a]);return s}static zeros(o,s){return new Matrix$2(o,s)}static ones(o,s){return new Matrix$2(o,s).fill(1)}static rand(o,s,a={}){if(typeof a!="object")throw new TypeError("options must be an object");const{random:h=Math.random}=a;let c=new Matrix$2(o,s);for(let d=0;d<o;d++)for(let g=0;g<s;g++)c.set(d,g,h());return c}static randInt(o,s,a={}){if(typeof a!="object")throw new TypeError("options must be an object");const{min:h=0,max:c=1e3,random:d=Math.random}=a;if(!Number.isInteger(h))throw new TypeError("min must be an integer");if(!Number.isInteger(c))throw new TypeError("max must be an integer");if(h>=c)throw new RangeError("min must be smaller than max");let g=c-h,b=new Matrix$2(o,s);for(let _=0;_<o;_++)for(let $=0;$<s;$++){let j=h+Math.round(d()*g);b.set(_,$,j)}return b}static eye(o,s,a){s===void 0&&(s=o),a===void 0&&(a=1);let h=Math.min(o,s),c=this.zeros(o,s);for(let d=0;d<h;d++)c.set(d,d,a);return c}static diag(o,s,a){let h=o.length;s===void 0&&(s=h),a===void 0&&(a=s);let c=Math.min(h,s,a),d=this.zeros(s,a);for(let g=0;g<c;g++)d.set(g,g,o[g]);return d}static min(o,s){o=this.checkMatrix(o),s=this.checkMatrix(s);let a=o.rows,h=o.columns,c=new Matrix$2(a,h);for(let d=0;d<a;d++)for(let g=0;g<h;g++)c.set(d,g,Math.min(o.get(d,g),s.get(d,g)));return c}static max(o,s){o=this.checkMatrix(o),s=this.checkMatrix(s);let a=o.rows,h=o.columns,c=new this(a,h);for(let d=0;d<a;d++)for(let g=0;g<h;g++)c.set(d,g,Math.max(o.get(d,g),s.get(d,g)));return c}static checkMatrix(o){return AbstractMatrix.isMatrix(o)?o:new Matrix$2(o)}static isMatrix(o){return o!=null&&o.klass==="Matrix"}get size(){return this.rows*this.columns}apply(o){if(typeof o!="function")throw new TypeError("callback must be a function");for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)o.call(this,s,a);return this}to1DArray(){let o=[];for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)o.push(this.get(s,a));return o}to2DArray(){let o=[];for(let s=0;s<this.rows;s++){o.push([]);for(let a=0;a<this.columns;a++)o[s].push(this.get(s,a))}return o}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let o=0;o<this.rows;o++)for(let s=0;s<=o;s++)if(this.get(o,s)!==this.get(s,o))return!1;return!0}return!1}isEchelonForm(){let o=0,s=0,a=-1,h=!0,c=!1;for(;o<this.rows&&h;){for(s=0,c=!1;s<this.columns&&c===!1;)this.get(o,s)===0?s++:this.get(o,s)===1&&s>a?(c=!0,a=s):(h=!1,c=!0);o++}return h}isReducedEchelonForm(){let o=0,s=0,a=-1,h=!0,c=!1;for(;o<this.rows&&h;){for(s=0,c=!1;s<this.columns&&c===!1;)this.get(o,s)===0?s++:this.get(o,s)===1&&s>a?(c=!0,a=s):(h=!1,c=!0);for(let d=s+1;d<this.rows;d++)this.get(o,d)!==0&&(h=!1);o++}return h}echelonForm(){let o=this.clone(),s=0,a=0;for(;s<o.rows&&a<o.columns;){let h=s;for(let c=s;c<o.rows;c++)o.get(c,a)>o.get(h,a)&&(h=c);if(o.get(h,a)===0)a++;else{o.swapRows(s,h);let c=o.get(s,a);for(let d=a;d<o.columns;d++)o.set(s,d,o.get(s,d)/c);for(let d=s+1;d<o.rows;d++){let g=o.get(d,a)/o.get(s,a);o.set(d,a,0);for(let b=a+1;b<o.columns;b++)o.set(d,b,o.get(d,b)-o.get(s,b)*g)}s++,a++}}return o}reducedEchelonForm(){let o=this.echelonForm(),s=o.columns,a=o.rows,h=a-1;for(;h>=0;)if(o.maxRow(h)===0)h--;else{let c=0,d=!1;for(;c<a&&d===!1;)o.get(h,c)===1?d=!0:c++;for(let g=0;g<h;g++){let b=o.get(g,c);for(let _=c;_<s;_++){let $=o.get(g,_)-b*o.get(h,_);o.set(g,_,$)}}h--}return o}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(o={}){if(typeof o!="object")throw new TypeError("options must be an object");const{rows:s=1,columns:a=1}=o;if(!Number.isInteger(s)||s<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");let h=new Matrix$2(this.rows*s,this.columns*a);for(let c=0;c<s;c++)for(let d=0;d<a;d++)h.setSubMatrix(this,this.rows*c,this.columns*d);return h}fill(o){for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,o);return this}neg(){return this.mulS(-1)}getRow(o){checkRowIndex(this,o);let s=[];for(let a=0;a<this.columns;a++)s.push(this.get(o,a));return s}getRowVector(o){return Matrix$2.rowVector(this.getRow(o))}setRow(o,s){checkRowIndex(this,o),s=checkRowVector(this,s);for(let a=0;a<this.columns;a++)this.set(o,a,s[a]);return this}swapRows(o,s){checkRowIndex(this,o),checkRowIndex(this,s);for(let a=0;a<this.columns;a++){let h=this.get(o,a);this.set(o,a,this.get(s,a)),this.set(s,a,h)}return this}getColumn(o){checkColumnIndex(this,o);let s=[];for(let a=0;a<this.rows;a++)s.push(this.get(a,o));return s}getColumnVector(o){return Matrix$2.columnVector(this.getColumn(o))}setColumn(o,s){checkColumnIndex(this,o),s=checkColumnVector(this,s);for(let a=0;a<this.rows;a++)this.set(a,o,s[a]);return this}swapColumns(o,s){checkColumnIndex(this,o),checkColumnIndex(this,s);for(let a=0;a<this.rows;a++){let h=this.get(a,o);this.set(a,o,this.get(a,s)),this.set(a,s,h)}return this}addRowVector(o){o=checkRowVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+o[a]);return this}subRowVector(o){o=checkRowVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-o[a]);return this}mulRowVector(o){o=checkRowVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*o[a]);return this}divRowVector(o){o=checkRowVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/o[a]);return this}addColumnVector(o){o=checkColumnVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+o[s]);return this}subColumnVector(o){o=checkColumnVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-o[s]);return this}mulColumnVector(o){o=checkColumnVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*o[s]);return this}divColumnVector(o){o=checkColumnVector(this,o);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/o[s]);return this}mulRow(o,s){checkRowIndex(this,o);for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)*s);return this}mulColumn(o,s){checkColumnIndex(this,o);for(let a=0;a<this.rows;a++)this.set(a,o,this.get(a,o)*s);return this}max(o){if(this.isEmpty())return NaN;switch(o){case"row":{const s=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)>s[a]&&(s[a]=this.get(a,h));return s}case"column":{const s=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)>s[h]&&(s[h]=this.get(a,h));return s}case void 0:{let s=this.get(0,0);for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)>s&&(s=this.get(a,h));return s}default:throw new Error(`invalid option: ${o}`)}}maxIndex(){checkNonEmpty(this);let o=this.get(0,0),s=[0,0];for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)>o&&(o=this.get(a,h),s[0]=a,s[1]=h);return s}min(o){if(this.isEmpty())return NaN;switch(o){case"row":{const s=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)<s[a]&&(s[a]=this.get(a,h));return s}case"column":{const s=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)<s[h]&&(s[h]=this.get(a,h));return s}case void 0:{let s=this.get(0,0);for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)<s&&(s=this.get(a,h));return s}default:throw new Error(`invalid option: ${o}`)}}minIndex(){checkNonEmpty(this);let o=this.get(0,0),s=[0,0];for(let a=0;a<this.rows;a++)for(let h=0;h<this.columns;h++)this.get(a,h)<o&&(o=this.get(a,h),s[0]=a,s[1]=h);return s}maxRow(o){if(checkRowIndex(this,o),this.isEmpty())return NaN;let s=this.get(o,0);for(let a=1;a<this.columns;a++)this.get(o,a)>s&&(s=this.get(o,a));return s}maxRowIndex(o){checkRowIndex(this,o),checkNonEmpty(this);let s=this.get(o,0),a=[o,0];for(let h=1;h<this.columns;h++)this.get(o,h)>s&&(s=this.get(o,h),a[1]=h);return a}minRow(o){if(checkRowIndex(this,o),this.isEmpty())return NaN;let s=this.get(o,0);for(let a=1;a<this.columns;a++)this.get(o,a)<s&&(s=this.get(o,a));return s}minRowIndex(o){checkRowIndex(this,o),checkNonEmpty(this);let s=this.get(o,0),a=[o,0];for(let h=1;h<this.columns;h++)this.get(o,h)<s&&(s=this.get(o,h),a[1]=h);return a}maxColumn(o){if(checkColumnIndex(this,o),this.isEmpty())return NaN;let s=this.get(0,o);for(let a=1;a<this.rows;a++)this.get(a,o)>s&&(s=this.get(a,o));return s}maxColumnIndex(o){checkColumnIndex(this,o),checkNonEmpty(this);let s=this.get(0,o),a=[0,o];for(let h=1;h<this.rows;h++)this.get(h,o)>s&&(s=this.get(h,o),a[0]=h);return a}minColumn(o){if(checkColumnIndex(this,o),this.isEmpty())return NaN;let s=this.get(0,o);for(let a=1;a<this.rows;a++)this.get(a,o)<s&&(s=this.get(a,o));return s}minColumnIndex(o){checkColumnIndex(this,o),checkNonEmpty(this);let s=this.get(0,o),a=[0,o];for(let h=1;h<this.rows;h++)this.get(h,o)<s&&(s=this.get(h,o),a[0]=h);return a}diag(){let o=Math.min(this.rows,this.columns),s=[];for(let a=0;a<o;a++)s.push(this.get(a,a));return s}norm(o="frobenius"){switch(o){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${o}`)}}cumulativeSum(){let o=0;for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)o+=this.get(s,a),this.set(s,a,o);return this}dot(o){AbstractMatrix.isMatrix(o)&&(o=o.to1DArray());let s=this.to1DArray();if(s.length!==o.length)throw new RangeError("vectors do not have the same size");let a=0;for(let h=0;h<s.length;h++)a+=s[h]*o[h];return a}mmul(o){o=Matrix$2.checkMatrix(o);let s=this.rows,a=this.columns,h=o.columns,c=new Matrix$2(s,h),d=new Float64Array(a);for(let g=0;g<h;g++){for(let b=0;b<a;b++)d[b]=o.get(b,g);for(let b=0;b<s;b++){let _=0;for(let $=0;$<a;$++)_+=this.get(b,$)*d[$];c.set(b,g,_)}}return c}strassen2x2(o){o=Matrix$2.checkMatrix(o);let s=new Matrix$2(2,2);const a=this.get(0,0),h=o.get(0,0),c=this.get(0,1),d=o.get(0,1),g=this.get(1,0),b=o.get(1,0),_=this.get(1,1),$=o.get(1,1),j=(a+_)*(h+$),_e=(g+_)*h,et=a*(d-$),nt=_*(b-h),it=(a+c)*$,lt=(g-a)*(h+d),tt=(c-_)*(b+$),st=j+nt-it+tt,rt=et+it,ot=_e+nt,ut=j-_e+et+lt;return s.set(0,0,st),s.set(0,1,rt),s.set(1,0,ot),s.set(1,1,ut),s}strassen3x3(o){o=Matrix$2.checkMatrix(o);let s=new Matrix$2(3,3);const a=this.get(0,0),h=this.get(0,1),c=this.get(0,2),d=this.get(1,0),g=this.get(1,1),b=this.get(1,2),_=this.get(2,0),$=this.get(2,1),j=this.get(2,2),_e=o.get(0,0),et=o.get(0,1),nt=o.get(0,2),it=o.get(1,0),lt=o.get(1,1),tt=o.get(1,2),st=o.get(2,0),rt=o.get(2,1),ot=o.get(2,2),ut=(a+h+c-d-g-$-j)*lt,gt=(a-d)*(-et+lt),pt=g*(-_e+et+it-lt-tt-st+ot),ht=(-a+d+g)*(_e-et+lt),ct=(d+g)*(-_e+et),at=a*_e,ft=(-a+_+$)*(_e-nt+tt),mt=(-a+_)*(nt-tt),xt=(_+$)*(-_e+nt),bt=(a+h+c-g-b-_-$)*tt,Et=$*(-_e+nt+it-lt-tt-st+rt),Bt=(-c+$+j)*(lt+st-rt),Nt=(c-j)*(lt-rt),vt=c*st,St=($+j)*(-st+rt),kt=(-c+g+b)*(tt+st-ot),$t=(c-b)*(tt-ot),Pt=(g+b)*(-st+ot),It=h*it,Dt=b*rt,At=d*nt,Rt=_*et,Ot=j*ot,en=at+vt+It,Gt=ut+ht+ct+at+Bt+vt+St,Qt=at+ft+xt+bt+vt+kt+Pt,tn=gt+pt+ht+at+vt+kt+$t,un=gt+ht+ct+at+Dt,nn=vt+kt+$t+Pt+At,Lt=at+ft+mt+Et+Bt+Nt+vt,Ct=Bt+Nt+vt+St+Rt,rn=at+ft+mt+xt+Ot;return s.set(0,0,en),s.set(0,1,Gt),s.set(0,2,Qt),s.set(1,0,tn),s.set(1,1,un),s.set(1,2,nn),s.set(2,0,Lt),s.set(2,1,Ct),s.set(2,2,rn),s}mmulStrassen(o){o=Matrix$2.checkMatrix(o);let s=this.clone(),a=s.rows,h=s.columns,c=o.rows,d=o.columns;h!==c&&console.warn(`Multiplying ${a} x ${h} and ${c} x ${d} matrix: dimensions do not match.`);function g(j,_e,et){let nt=j.rows,it=j.columns;if(nt===_e&&it===et)return j;{let lt=AbstractMatrix.zeros(_e,et);return lt=lt.setSubMatrix(j,0,0),lt}}let b=Math.max(a,c),_=Math.max(h,d);s=g(s,b,_),o=g(o,b,_);function $(j,_e,et,nt){if(et<=512||nt<=512)return j.mmul(_e);et%2===1&&nt%2===1?(j=g(j,et+1,nt+1),_e=g(_e,et+1,nt+1)):et%2===1?(j=g(j,et+1,nt),_e=g(_e,et+1,nt)):nt%2===1&&(j=g(j,et,nt+1),_e=g(_e,et,nt+1));let it=parseInt(j.rows/2,10),lt=parseInt(j.columns/2,10),tt=j.subMatrix(0,it-1,0,lt-1),st=_e.subMatrix(0,it-1,0,lt-1),rt=j.subMatrix(0,it-1,lt,j.columns-1),ot=_e.subMatrix(0,it-1,lt,_e.columns-1),ut=j.subMatrix(it,j.rows-1,0,lt-1),gt=_e.subMatrix(it,_e.rows-1,0,lt-1),pt=j.subMatrix(it,j.rows-1,lt,j.columns-1),ht=_e.subMatrix(it,_e.rows-1,lt,_e.columns-1),ct=$(AbstractMatrix.add(tt,pt),AbstractMatrix.add(st,ht),it,lt),at=$(AbstractMatrix.add(ut,pt),st,it,lt),ft=$(tt,AbstractMatrix.sub(ot,ht),it,lt),mt=$(pt,AbstractMatrix.sub(gt,st),it,lt),xt=$(AbstractMatrix.add(tt,rt),ht,it,lt),bt=$(AbstractMatrix.sub(ut,tt),AbstractMatrix.add(st,ot),it,lt),Et=$(AbstractMatrix.sub(rt,pt),AbstractMatrix.add(gt,ht),it,lt),Bt=AbstractMatrix.add(ct,mt);Bt.sub(xt),Bt.add(Et);let Nt=AbstractMatrix.add(ft,xt),vt=AbstractMatrix.add(at,mt),St=AbstractMatrix.sub(ct,at);St.add(ft),St.add(bt);let kt=AbstractMatrix.zeros(2*Bt.rows,2*Bt.columns);return kt=kt.setSubMatrix(Bt,0,0),kt=kt.setSubMatrix(Nt,Bt.rows,0),kt=kt.setSubMatrix(vt,0,Bt.columns),kt=kt.setSubMatrix(St,Bt.rows,Bt.columns),kt.subMatrix(0,et-1,0,nt-1)}return $(s,o,b,_)}scaleRows(o={}){if(typeof o!="object")throw new TypeError("options must be an object");const{min:s=0,max:a=1}=o;if(!Number.isFinite(s))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(s>=a)throw new RangeError("min must be smaller than max");let h=new Matrix$2(this.rows,this.columns);for(let c=0;c<this.rows;c++){const d=this.getRow(c);d.length>0&&rescale(d,{min:s,max:a,output:d}),h.setRow(c,d)}return h}scaleColumns(o={}){if(typeof o!="object")throw new TypeError("options must be an object");const{min:s=0,max:a=1}=o;if(!Number.isFinite(s))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(s>=a)throw new RangeError("min must be smaller than max");let h=new Matrix$2(this.rows,this.columns);for(let c=0;c<this.columns;c++){const d=this.getColumn(c);d.length&&rescale(d,{min:s,max:a,output:d}),h.setColumn(c,d)}return h}flipRows(){const o=Math.ceil(this.columns/2);for(let s=0;s<this.rows;s++)for(let a=0;a<o;a++){let h=this.get(s,a),c=this.get(s,this.columns-1-a);this.set(s,a,c),this.set(s,this.columns-1-a,h)}return this}flipColumns(){const o=Math.ceil(this.rows/2);for(let s=0;s<this.columns;s++)for(let a=0;a<o;a++){let h=this.get(a,s),c=this.get(this.rows-1-a,s);this.set(a,s,c),this.set(this.rows-1-a,s,h)}return this}kroneckerProduct(o){o=Matrix$2.checkMatrix(o);let s=this.rows,a=this.columns,h=o.rows,c=o.columns,d=new Matrix$2(s*h,a*c);for(let g=0;g<s;g++)for(let b=0;b<a;b++)for(let _=0;_<h;_++)for(let $=0;$<c;$++)d.set(h*g+_,c*b+$,this.get(g,b)*o.get(_,$));return d}kroneckerSum(o){if(o=Matrix$2.checkMatrix(o),!this.isSquare()||!o.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let s=this.rows,a=o.rows,h=this.kroneckerProduct(Matrix$2.eye(a,a)),c=Matrix$2.eye(s,s).kroneckerProduct(o);return h.add(c)}transpose(){let o=new Matrix$2(this.columns,this.rows);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)o.set(a,s,this.get(s,a));return o}sortRows(o=compareNumbers){for(let s=0;s<this.rows;s++)this.setRow(s,this.getRow(s).sort(o));return this}sortColumns(o=compareNumbers){for(let s=0;s<this.columns;s++)this.setColumn(s,this.getColumn(s).sort(o));return this}subMatrix(o,s,a,h){checkRange(this,o,s,a,h);let c=new Matrix$2(s-o+1,h-a+1);for(let d=o;d<=s;d++)for(let g=a;g<=h;g++)c.set(d-o,g-a,this.get(d,g));return c}subMatrixRow(o,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.columns-1),s>a||s<0||s>=this.columns||a<0||a>=this.columns)throw new RangeError("Argument out of range");let h=new Matrix$2(o.length,a-s+1);for(let c=0;c<o.length;c++)for(let d=s;d<=a;d++){if(o[c]<0||o[c]>=this.rows)throw new RangeError(`Row index out of range: ${o[c]}`);h.set(c,d-s,this.get(o[c],d))}return h}subMatrixColumn(o,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.rows-1),s>a||s<0||s>=this.rows||a<0||a>=this.rows)throw new RangeError("Argument out of range");let h=new Matrix$2(a-s+1,o.length);for(let c=0;c<o.length;c++)for(let d=s;d<=a;d++){if(o[c]<0||o[c]>=this.columns)throw new RangeError(`Column index out of range: ${o[c]}`);h.set(d-s,c,this.get(d,o[c]))}return h}setSubMatrix(o,s,a){if(o=Matrix$2.checkMatrix(o),o.isEmpty())return this;let h=s+o.rows-1,c=a+o.columns-1;checkRange(this,s,h,a,c);for(let d=0;d<o.rows;d++)for(let g=0;g<o.columns;g++)this.set(s+d,a+g,o.get(d,g));return this}selection(o,s){checkRowIndices(this,o),checkColumnIndices(this,s);let a=new Matrix$2(o.length,s.length);for(let h=0;h<o.length;h++){let c=o[h];for(let d=0;d<s.length;d++){let g=s[d];a.set(h,d,this.get(c,g))}}return a}trace(){let o=Math.min(this.rows,this.columns),s=0;for(let a=0;a<o;a++)s+=this.get(a,a);return s}clone(){let o=new Matrix$2(this.rows,this.columns);for(let s=0;s<this.rows;s++)for(let a=0;a<this.columns;a++)o.set(s,a,this.get(s,a));return o}sum(o){switch(o){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${o}`)}}product(o){switch(o){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${o}`)}}mean(o){const s=this.sum(o);switch(o){case"row":{for(let a=0;a<this.rows;a++)s[a]/=this.columns;return s}case"column":{for(let a=0;a<this.columns;a++)s[a]/=this.rows;return s}case void 0:return s/this.size;default:throw new Error(`invalid option: ${o}`)}}variance(o,s={}){if(typeof o=="object"&&(s=o,o=void 0),typeof s!="object")throw new TypeError("options must be an object");const{unbiased:a=!0,mean:h=this.mean(o)}=s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(o){case"row":{if(!isAnyArray(h))throw new TypeError("mean must be an array");return varianceByRow(this,a,h)}case"column":{if(!isAnyArray(h))throw new TypeError("mean must be an array");return varianceByColumn(this,a,h)}case void 0:{if(typeof h!="number")throw new TypeError("mean must be a number");return varianceAll(this,a,h)}default:throw new Error(`invalid option: ${o}`)}}standardDeviation(o,s){typeof o=="object"&&(s=o,o=void 0);const a=this.variance(o,s);if(o===void 0)return Math.sqrt(a);for(let h=0;h<a.length;h++)a[h]=Math.sqrt(a[h]);return a}center(o,s={}){if(typeof o=="object"&&(s=o,o=void 0),typeof s!="object")throw new TypeError("options must be an object");const{center:a=this.mean(o)}=s;switch(o){case"row":{if(!isAnyArray(a))throw new TypeError("center must be an array");return centerByRow(this,a),this}case"column":{if(!isAnyArray(a))throw new TypeError("center must be an array");return centerByColumn(this,a),this}case void 0:{if(typeof a!="number")throw new TypeError("center must be a number");return centerAll(this,a),this}default:throw new Error(`invalid option: ${o}`)}}scale(o,s={}){if(typeof o=="object"&&(s=o,o=void 0),typeof s!="object")throw new TypeError("options must be an object");let a=s.scale;switch(o){case"row":{if(a===void 0)a=getScaleByRow(this);else if(!isAnyArray(a))throw new TypeError("scale must be an array");return scaleByRow(this,a),this}case"column":{if(a===void 0)a=getScaleByColumn(this);else if(!isAnyArray(a))throw new TypeError("scale must be an array");return scaleByColumn(this,a),this}case void 0:{if(a===void 0)a=getScaleAll(this);else if(typeof a!="number")throw new TypeError("scale must be a number");return scaleAll(this,a),this}default:throw new Error(`invalid option: ${o}`)}}toString(o){return inspectMatrixWithOptions(this,o)}}AbstractMatrix.prototype.klass="Matrix";typeof Symbol<"u"&&(AbstractMatrix.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix);function compareNumbers(e,o){return e-o}function isArrayOfNumbers(e){return e.every(o=>typeof o=="number")}AbstractMatrix.random=AbstractMatrix.rand;AbstractMatrix.randomInt=AbstractMatrix.randInt;AbstractMatrix.diagonal=AbstractMatrix.diag;AbstractMatrix.prototype.diagonal=AbstractMatrix.prototype.diag;AbstractMatrix.identity=AbstractMatrix.eye;AbstractMatrix.prototype.negate=AbstractMatrix.prototype.neg;AbstractMatrix.prototype.tensorProduct=AbstractMatrix.prototype.kroneckerProduct;let Matrix$2=class Yn extends AbstractMatrix{constructor(o,s){if(super(),Yn.isMatrix(o))return o.clone();if(Number.isInteger(o)&&o>=0)if(this.data=[],Number.isInteger(s)&&s>=0)for(let a=0;a<o;a++)this.data.push(new Float64Array(s));else throw new TypeError("nColumns must be a positive integer");else if(isAnyArray(o)){const a=o;if(o=a.length,s=o?a[0].length:0,typeof s!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let h=0;h<o;h++){if(a[h].length!==s)throw new RangeError("Inconsistent array dimensions");if(!isArrayOfNumbers(a[h]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(a[h]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=o,this.columns=s}set(o,s,a){return this.data[o][s]=a,this}get(o,s){return this.data[o][s]}removeRow(o){return checkRowIndex(this,o),this.data.splice(o,1),this.rows-=1,this}addRow(o,s){return s===void 0&&(s=o,o=this.rows),checkRowIndex(this,o,!0),s=Float64Array.from(checkRowVector(this,s)),this.data.splice(o,0,s),this.rows+=1,this}removeColumn(o){checkColumnIndex(this,o);for(let s=0;s<this.rows;s++){const a=new Float64Array(this.columns-1);for(let h=0;h<o;h++)a[h]=this.data[s][h];for(let h=o+1;h<this.columns;h++)a[h-1]=this.data[s][h];this.data[s]=a}return this.columns-=1,this}addColumn(o,s){typeof s>"u"&&(s=o,o=this.columns),checkColumnIndex(this,o,!0),s=checkColumnVector(this,s);for(let a=0;a<this.rows;a++){const h=new Float64Array(this.columns+1);let c=0;for(;c<o;c++)h[c]=this.data[a][c];for(h[c++]=s[a];c<this.columns+1;c++)h[c]=this.data[a][c-1];this.data[a]=h}return this.columns+=1,this}};installMathOperations(AbstractMatrix,Matrix$2);class BaseView extends AbstractMatrix{constructor(o,s,a){super(),this.matrix=o,this.rows=s,this.columns=a}}class MatrixColumnView extends BaseView{constructor(o,s){checkColumnIndex(o,s),super(o,o.rows,1),this.column=s}set(o,s,a){return this.matrix.set(o,this.column,a),this}get(o){return this.matrix.get(o,this.column)}}class MatrixColumnSelectionView extends BaseView{constructor(o,s){checkColumnIndices(o,s),super(o,o.rows,s.length),this.columnIndices=s}set(o,s,a){return this.matrix.set(o,this.columnIndices[s],a),this}get(o,s){return this.matrix.get(o,this.columnIndices[s])}}class MatrixFlipColumnView extends BaseView{constructor(o){super(o,o.rows,o.columns)}set(o,s,a){return this.matrix.set(o,this.columns-s-1,a),this}get(o,s){return this.matrix.get(o,this.columns-s-1)}}class MatrixFlipRowView extends BaseView{constructor(o){super(o,o.rows,o.columns)}set(o,s,a){return this.matrix.set(this.rows-o-1,s,a),this}get(o,s){return this.matrix.get(this.rows-o-1,s)}}class MatrixRowView extends BaseView{constructor(o,s){checkRowIndex(o,s),super(o,1,o.columns),this.row=s}set(o,s,a){return this.matrix.set(this.row,s,a),this}get(o,s){return this.matrix.get(this.row,s)}}class MatrixRowSelectionView extends BaseView{constructor(o,s){checkRowIndices(o,s),super(o,s.length,o.columns),this.rowIndices=s}set(o,s,a){return this.matrix.set(this.rowIndices[o],s,a),this}get(o,s){return this.matrix.get(this.rowIndices[o],s)}}class MatrixSelectionView extends BaseView{constructor(o,s,a){checkRowIndices(o,s),checkColumnIndices(o,a),super(o,s.length,a.length),this.rowIndices=s,this.columnIndices=a}set(o,s,a){return this.matrix.set(this.rowIndices[o],this.columnIndices[s],a),this}get(o,s){return this.matrix.get(this.rowIndices[o],this.columnIndices[s])}}class MatrixSubView extends BaseView{constructor(o,s,a,h,c){checkRange(o,s,a,h,c),super(o,a-s+1,c-h+1),this.startRow=s,this.startColumn=h}set(o,s,a){return this.matrix.set(this.startRow+o,this.startColumn+s,a),this}get(o,s){return this.matrix.get(this.startRow+o,this.startColumn+s)}}let MatrixTransposeView$1=class extends BaseView{constructor(o){super(o,o.columns,o.rows)}set(o,s,a){return this.matrix.set(s,o,a),this}get(o,s){return this.matrix.get(s,o)}};class WrapperMatrix1D extends AbstractMatrix{constructor(o,s={}){const{rows:a=1}=s;if(o.length%a!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=a,this.columns=o.length/a,this.data=o}set(o,s,a){let h=this._calculateIndex(o,s);return this.data[h]=a,this}get(o,s){let a=this._calculateIndex(o,s);return this.data[a]}_calculateIndex(o,s){return o*this.columns+s}}class WrapperMatrix2D extends AbstractMatrix{constructor(o){super(),this.data=o,this.rows=o.length,this.columns=o[0].length}set(o,s,a){return this.data[o][s]=a,this}get(o,s){return this.data[o][s]}}function wrap(e,o){if(isAnyArray(e))return e[0]&&isAnyArray(e[0])?new WrapperMatrix2D(e):new WrapperMatrix1D(e,o);throw new Error("the argument is not an array")}class LuDecomposition{constructor(o){o=WrapperMatrix2D.checkMatrix(o);let s=o.clone(),a=s.rows,h=s.columns,c=new Float64Array(a),d=1,g,b,_,$,j,_e,et,nt,it;for(g=0;g<a;g++)c[g]=g;for(nt=new Float64Array(a),b=0;b<h;b++){for(g=0;g<a;g++)nt[g]=s.get(g,b);for(g=0;g<a;g++){for(it=Math.min(g,b),j=0,_=0;_<it;_++)j+=s.get(g,_)*nt[_];nt[g]-=j,s.set(g,b,nt[g])}for($=b,g=b+1;g<a;g++)Math.abs(nt[g])>Math.abs(nt[$])&&($=g);if($!==b){for(_=0;_<h;_++)_e=s.get($,_),s.set($,_,s.get(b,_)),s.set(b,_,_e);et=c[$],c[$]=c[b],c[b]=et,d=-d}if(b<a&&s.get(b,b)!==0)for(g=b+1;g<a;g++)s.set(g,b,s.get(g,b)/s.get(b,b))}this.LU=s,this.pivotVector=c,this.pivotSign=d}isSingular(){let o=this.LU,s=o.columns;for(let a=0;a<s;a++)if(o.get(a,a)===0)return!0;return!1}solve(o){o=Matrix$2.checkMatrix(o);let s=this.LU;if(s.rows!==o.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let h=o.columns,c=o.subMatrixRow(this.pivotVector,0,h-1),d=s.columns,g,b,_;for(_=0;_<d;_++)for(g=_+1;g<d;g++)for(b=0;b<h;b++)c.set(g,b,c.get(g,b)-c.get(_,b)*s.get(g,_));for(_=d-1;_>=0;_--){for(b=0;b<h;b++)c.set(_,b,c.get(_,b)/s.get(_,_));for(g=0;g<_;g++)for(b=0;b<h;b++)c.set(g,b,c.get(g,b)-c.get(_,b)*s.get(g,_))}return c}get determinant(){let o=this.LU;if(!o.isSquare())throw new Error("Matrix must be square");let s=this.pivotSign,a=o.columns;for(let h=0;h<a;h++)s*=o.get(h,h);return s}get lowerTriangularMatrix(){let o=this.LU,s=o.rows,a=o.columns,h=new Matrix$2(s,a);for(let c=0;c<s;c++)for(let d=0;d<a;d++)c>d?h.set(c,d,o.get(c,d)):c===d?h.set(c,d,1):h.set(c,d,0);return h}get upperTriangularMatrix(){let o=this.LU,s=o.rows,a=o.columns,h=new Matrix$2(s,a);for(let c=0;c<s;c++)for(let d=0;d<a;d++)c<=d?h.set(c,d,o.get(c,d)):h.set(c,d,0);return h}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function hypotenuse$1(e,o){let s=0;return Math.abs(e)>Math.abs(o)?(s=o/e,Math.abs(e)*Math.sqrt(1+s*s)):o!==0?(s=e/o,Math.abs(o)*Math.sqrt(1+s*s)):0}class QrDecomposition{constructor(o){o=WrapperMatrix2D.checkMatrix(o);let s=o.clone(),a=o.rows,h=o.columns,c=new Float64Array(h),d,g,b,_;for(b=0;b<h;b++){let $=0;for(d=b;d<a;d++)$=hypotenuse$1($,s.get(d,b));if($!==0){for(s.get(b,b)<0&&($=-$),d=b;d<a;d++)s.set(d,b,s.get(d,b)/$);for(s.set(b,b,s.get(b,b)+1),g=b+1;g<h;g++){for(_=0,d=b;d<a;d++)_+=s.get(d,b)*s.get(d,g);for(_=-_/s.get(b,b),d=b;d<a;d++)s.set(d,g,s.get(d,g)+_*s.get(d,b))}}c[b]=-$}this.QR=s,this.Rdiag=c}solve(o){o=Matrix$2.checkMatrix(o);let s=this.QR,a=s.rows;if(o.rows!==a)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let h=o.columns,c=o.clone(),d=s.columns,g,b,_,$;for(_=0;_<d;_++)for(b=0;b<h;b++){for($=0,g=_;g<a;g++)$+=s.get(g,_)*c.get(g,b);for($=-$/s.get(_,_),g=_;g<a;g++)c.set(g,b,c.get(g,b)+$*s.get(g,_))}for(_=d-1;_>=0;_--){for(b=0;b<h;b++)c.set(_,b,c.get(_,b)/this.Rdiag[_]);for(g=0;g<_;g++)for(b=0;b<h;b++)c.set(g,b,c.get(g,b)-c.get(_,b)*s.get(g,_))}return c.subMatrix(0,d-1,0,h-1)}isFullRank(){let o=this.QR.columns;for(let s=0;s<o;s++)if(this.Rdiag[s]===0)return!1;return!0}get upperTriangularMatrix(){let o=this.QR,s=o.columns,a=new Matrix$2(s,s),h,c;for(h=0;h<s;h++)for(c=0;c<s;c++)h<c?a.set(h,c,o.get(h,c)):h===c?a.set(h,c,this.Rdiag[h]):a.set(h,c,0);return a}get orthogonalMatrix(){let o=this.QR,s=o.rows,a=o.columns,h=new Matrix$2(s,a),c,d,g,b;for(g=a-1;g>=0;g--){for(c=0;c<s;c++)h.set(c,g,0);for(h.set(g,g,1),d=g;d<a;d++)if(o.get(g,g)!==0){for(b=0,c=g;c<s;c++)b+=o.get(c,g)*h.get(c,d);for(b=-b/o.get(g,g),c=g;c<s;c++)h.set(c,d,h.get(c,d)+b*o.get(c,g))}}return h}}class SingularValueDecomposition{constructor(o,s={}){if(o=WrapperMatrix2D.checkMatrix(o),o.isEmpty())throw new Error("Matrix must be non-empty");let a=o.rows,h=o.columns;const{computeLeftSingularVectors:c=!0,computeRightSingularVectors:d=!0,autoTranspose:g=!1}=s;let b=!!c,_=!!d,$=!1,j;if(a<h)if(!g)j=o.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{j=o.transpose(),a=j.rows,h=j.columns,$=!0;let at=b;b=_,_=at}else j=o.clone();let _e=Math.min(a,h),et=Math.min(a+1,h),nt=new Float64Array(et),it=new Matrix$2(a,_e),lt=new Matrix$2(h,h),tt=new Float64Array(h),st=new Float64Array(a),rt=new Float64Array(et);for(let at=0;at<et;at++)rt[at]=at;let ot=Math.min(a-1,h),ut=Math.max(0,Math.min(h-2,a)),gt=Math.max(ot,ut);for(let at=0;at<gt;at++){if(at<ot){nt[at]=0;for(let ft=at;ft<a;ft++)nt[at]=hypotenuse$1(nt[at],j.get(ft,at));if(nt[at]!==0){j.get(at,at)<0&&(nt[at]=-nt[at]);for(let ft=at;ft<a;ft++)j.set(ft,at,j.get(ft,at)/nt[at]);j.set(at,at,j.get(at,at)+1)}nt[at]=-nt[at]}for(let ft=at+1;ft<h;ft++){if(at<ot&&nt[at]!==0){let mt=0;for(let xt=at;xt<a;xt++)mt+=j.get(xt,at)*j.get(xt,ft);mt=-mt/j.get(at,at);for(let xt=at;xt<a;xt++)j.set(xt,ft,j.get(xt,ft)+mt*j.get(xt,at))}tt[ft]=j.get(at,ft)}if(b&&at<ot)for(let ft=at;ft<a;ft++)it.set(ft,at,j.get(ft,at));if(at<ut){tt[at]=0;for(let ft=at+1;ft<h;ft++)tt[at]=hypotenuse$1(tt[at],tt[ft]);if(tt[at]!==0){tt[at+1]<0&&(tt[at]=0-tt[at]);for(let ft=at+1;ft<h;ft++)tt[ft]/=tt[at];tt[at+1]+=1}if(tt[at]=-tt[at],at+1<a&&tt[at]!==0){for(let ft=at+1;ft<a;ft++)st[ft]=0;for(let ft=at+1;ft<a;ft++)for(let mt=at+1;mt<h;mt++)st[ft]+=tt[mt]*j.get(ft,mt);for(let ft=at+1;ft<h;ft++){let mt=-tt[ft]/tt[at+1];for(let xt=at+1;xt<a;xt++)j.set(xt,ft,j.get(xt,ft)+mt*st[xt])}}if(_)for(let ft=at+1;ft<h;ft++)lt.set(ft,at,tt[ft])}}let pt=Math.min(h,a+1);if(ot<h&&(nt[ot]=j.get(ot,ot)),a<pt&&(nt[pt-1]=0),ut+1<pt&&(tt[ut]=j.get(ut,pt-1)),tt[pt-1]=0,b){for(let at=ot;at<_e;at++){for(let ft=0;ft<a;ft++)it.set(ft,at,0);it.set(at,at,1)}for(let at=ot-1;at>=0;at--)if(nt[at]!==0){for(let ft=at+1;ft<_e;ft++){let mt=0;for(let xt=at;xt<a;xt++)mt+=it.get(xt,at)*it.get(xt,ft);mt=-mt/it.get(at,at);for(let xt=at;xt<a;xt++)it.set(xt,ft,it.get(xt,ft)+mt*it.get(xt,at))}for(let ft=at;ft<a;ft++)it.set(ft,at,-it.get(ft,at));it.set(at,at,1+it.get(at,at));for(let ft=0;ft<at-1;ft++)it.set(ft,at,0)}else{for(let ft=0;ft<a;ft++)it.set(ft,at,0);it.set(at,at,1)}}if(_)for(let at=h-1;at>=0;at--){if(at<ut&&tt[at]!==0)for(let ft=at+1;ft<h;ft++){let mt=0;for(let xt=at+1;xt<h;xt++)mt+=lt.get(xt,at)*lt.get(xt,ft);mt=-mt/lt.get(at+1,at);for(let xt=at+1;xt<h;xt++)lt.set(xt,ft,lt.get(xt,ft)+mt*lt.get(xt,at))}for(let ft=0;ft<h;ft++)lt.set(ft,at,0);lt.set(at,at,1)}let ht=pt-1,ct=Number.EPSILON;for(;pt>0;){let at,ft;for(at=pt-2;at>=-1&&at!==-1;at--){const mt=Number.MIN_VALUE+ct*Math.abs(nt[at]+Math.abs(nt[at+1]));if(Math.abs(tt[at])<=mt||Number.isNaN(tt[at])){tt[at]=0;break}}if(at===pt-2)ft=4;else{let mt;for(mt=pt-1;mt>=at&&mt!==at;mt--){let xt=(mt!==pt?Math.abs(tt[mt]):0)+(mt!==at+1?Math.abs(tt[mt-1]):0);if(Math.abs(nt[mt])<=ct*xt){nt[mt]=0;break}}mt===at?ft=3:mt===pt-1?ft=1:(ft=2,at=mt)}switch(at++,ft){case 1:{let mt=tt[pt-2];tt[pt-2]=0;for(let xt=pt-2;xt>=at;xt--){let bt=hypotenuse$1(nt[xt],mt),Et=nt[xt]/bt,Bt=mt/bt;if(nt[xt]=bt,xt!==at&&(mt=-Bt*tt[xt-1],tt[xt-1]=Et*tt[xt-1]),_)for(let Nt=0;Nt<h;Nt++)bt=Et*lt.get(Nt,xt)+Bt*lt.get(Nt,pt-1),lt.set(Nt,pt-1,-Bt*lt.get(Nt,xt)+Et*lt.get(Nt,pt-1)),lt.set(Nt,xt,bt)}break}case 2:{let mt=tt[at-1];tt[at-1]=0;for(let xt=at;xt<pt;xt++){let bt=hypotenuse$1(nt[xt],mt),Et=nt[xt]/bt,Bt=mt/bt;if(nt[xt]=bt,mt=-Bt*tt[xt],tt[xt]=Et*tt[xt],b)for(let Nt=0;Nt<a;Nt++)bt=Et*it.get(Nt,xt)+Bt*it.get(Nt,at-1),it.set(Nt,at-1,-Bt*it.get(Nt,xt)+Et*it.get(Nt,at-1)),it.set(Nt,xt,bt)}break}case 3:{const mt=Math.max(Math.abs(nt[pt-1]),Math.abs(nt[pt-2]),Math.abs(tt[pt-2]),Math.abs(nt[at]),Math.abs(tt[at])),xt=nt[pt-1]/mt,bt=nt[pt-2]/mt,Et=tt[pt-2]/mt,Bt=nt[at]/mt,Nt=tt[at]/mt,vt=((bt+xt)*(bt-xt)+Et*Et)/2,St=xt*Et*(xt*Et);let kt=0;(vt!==0||St!==0)&&(vt<0?kt=0-Math.sqrt(vt*vt+St):kt=Math.sqrt(vt*vt+St),kt=St/(vt+kt));let $t=(Bt+xt)*(Bt-xt)+kt,Pt=Bt*Nt;for(let It=at;It<pt-1;It++){let Dt=hypotenuse$1($t,Pt);Dt===0&&(Dt=Number.MIN_VALUE);let At=$t/Dt,Rt=Pt/Dt;if(It!==at&&(tt[It-1]=Dt),$t=At*nt[It]+Rt*tt[It],tt[It]=At*tt[It]-Rt*nt[It],Pt=Rt*nt[It+1],nt[It+1]=At*nt[It+1],_)for(let Ot=0;Ot<h;Ot++)Dt=At*lt.get(Ot,It)+Rt*lt.get(Ot,It+1),lt.set(Ot,It+1,-Rt*lt.get(Ot,It)+At*lt.get(Ot,It+1)),lt.set(Ot,It,Dt);if(Dt=hypotenuse$1($t,Pt),Dt===0&&(Dt=Number.MIN_VALUE),At=$t/Dt,Rt=Pt/Dt,nt[It]=Dt,$t=At*tt[It]+Rt*nt[It+1],nt[It+1]=-Rt*tt[It]+At*nt[It+1],Pt=Rt*tt[It+1],tt[It+1]=At*tt[It+1],b&&It<a-1)for(let Ot=0;Ot<a;Ot++)Dt=At*it.get(Ot,It)+Rt*it.get(Ot,It+1),it.set(Ot,It+1,-Rt*it.get(Ot,It)+At*it.get(Ot,It+1)),it.set(Ot,It,Dt)}tt[pt-2]=$t;break}case 4:{if(nt[at]<=0&&(nt[at]=nt[at]<0?-nt[at]:0,_))for(let mt=0;mt<=ht;mt++)lt.set(mt,at,-lt.get(mt,at));for(;at<ht&&!(nt[at]>=nt[at+1]);){let mt=nt[at];if(nt[at]=nt[at+1],nt[at+1]=mt,_&&at<h-1)for(let xt=0;xt<h;xt++)mt=lt.get(xt,at+1),lt.set(xt,at+1,lt.get(xt,at)),lt.set(xt,at,mt);if(b&&at<a-1)for(let xt=0;xt<a;xt++)mt=it.get(xt,at+1),it.set(xt,at+1,it.get(xt,at)),it.set(xt,at,mt);at++}pt--;break}}}if($){let at=lt;lt=it,it=at}this.m=a,this.n=h,this.s=nt,this.U=it,this.V=lt}solve(o){let s=o,a=this.threshold,h=this.s.length,c=Matrix$2.zeros(h,h);for(let _e=0;_e<h;_e++)Math.abs(this.s[_e])<=a?c.set(_e,_e,0):c.set(_e,_e,1/this.s[_e]);let d=this.U,g=this.rightSingularVectors,b=g.mmul(c),_=g.rows,$=d.rows,j=Matrix$2.zeros(_,$);for(let _e=0;_e<_;_e++)for(let et=0;et<$;et++){let nt=0;for(let it=0;it<h;it++)nt+=b.get(_e,it)*d.get(et,it);j.set(_e,et,nt)}return j.mmul(s)}solveForDiagonal(o){return this.solve(Matrix$2.diag(o))}inverse(){let o=this.V,s=this.threshold,a=o.rows,h=o.columns,c=new Matrix$2(a,this.s.length);for(let $=0;$<a;$++)for(let j=0;j<h;j++)Math.abs(this.s[j])>s&&c.set($,j,o.get($,j)/this.s[j]);let d=this.U,g=d.rows,b=d.columns,_=new Matrix$2(a,g);for(let $=0;$<a;$++)for(let j=0;j<g;j++){let _e=0;for(let et=0;et<b;et++)_e+=c.get($,et)*d.get(j,et);_.set($,j,_e)}return _}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let o=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,a=this.s;for(let h=0,c=a.length;h<c;h++)a[h]>o&&s++;return s}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix$2.diag(this.s)}}function inverse(e,o=!1){return e=WrapperMatrix2D.checkMatrix(e),o?new SingularValueDecomposition(e).inverse():solve(e,Matrix$2.eye(e.rows))}function solve(e,o,s=!1){return e=WrapperMatrix2D.checkMatrix(e),o=WrapperMatrix2D.checkMatrix(o),s?new SingularValueDecomposition(e).solve(o):e.isSquare()?new LuDecomposition(e).solve(o):new QrDecomposition(e).solve(o)}function determinant(e){if(e=Matrix$2.checkMatrix(e),e.isSquare()){if(e.columns===0)return 1;let o,s,a,h;if(e.columns===2)return o=e.get(0,0),s=e.get(0,1),a=e.get(1,0),h=e.get(1,1),o*h-s*a;if(e.columns===3){let c,d,g;return c=new MatrixSelectionView(e,[1,2],[1,2]),d=new MatrixSelectionView(e,[1,2],[0,2]),g=new MatrixSelectionView(e,[1,2],[0,1]),o=e.get(0,0),s=e.get(0,1),a=e.get(0,2),o*determinant(c)-s*determinant(d)+a*determinant(g)}else return new LuDecomposition(e).determinant}else throw Error("determinant can only be calculated for a square matrix")}function xrange(e,o){let s=[];for(let a=0;a<e;a++)a!==o&&s.push(a);return s}function dependenciesOneRow(e,o,s,a=1e-9,h=1e-9){if(e>h)return new Array(o.rows+1).fill(0);{let c=o.addRow(s,[0]);for(let d=0;d<c.rows;d++)Math.abs(c.get(d,0))<a&&c.set(d,0,0);return c.to1DArray()}}function linearDependencies(e,o={}){const{thresholdValue:s=1e-9,thresholdError:a=1e-9}=o;e=Matrix$2.checkMatrix(e);let h=e.rows,c=new Matrix$2(h,h);for(let d=0;d<h;d++){let g=Matrix$2.columnVector(e.getRow(d)),b=e.subMatrixRow(xrange(h,d)).transpose(),$=new SingularValueDecomposition(b).solve(g),j=Matrix$2.sub(g,b.mmul($)).abs().max();c.setRow(d,dependenciesOneRow(j,$,d,s,a))}return c}function pseudoInverse(e,o=Number.EPSILON){if(e=Matrix$2.checkMatrix(e),e.isEmpty())return e.transpose();let s=new SingularValueDecomposition(e,{autoTranspose:!0}),a=s.leftSingularVectors,h=s.rightSingularVectors,c=s.diagonal;for(let d=0;d<c.length;d++)Math.abs(c[d])>o?c[d]=1/c[d]:c[d]=0;return h.mmul(Matrix$2.diag(c).mmul(a.transpose()))}function covariance(e,o=e,s={}){e=new Matrix$2(e);let a=!1;if(typeof o=="object"&&!Matrix$2.isMatrix(o)&&!isAnyArray(o)?(s=o,o=e,a=!0):o=new Matrix$2(o),e.rows!==o.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:h=!0}=s;h&&(e=e.center("column"),a||(o=o.center("column")));const c=e.transpose().mmul(o);for(let d=0;d<c.rows;d++)for(let g=0;g<c.columns;g++)c.set(d,g,c.get(d,g)*(1/(e.rows-1)));return c}function correlation(e,o=e,s={}){e=new Matrix$2(e);let a=!1;if(typeof o=="object"&&!Matrix$2.isMatrix(o)&&!isAnyArray(o)?(s=o,o=e,a=!0):o=new Matrix$2(o),e.rows!==o.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:h=!0,scale:c=!0}=s;h&&(e.center("column"),a||o.center("column")),c&&(e.scale("column"),a||o.scale("column"));const d=e.standardDeviation("column",{unbiased:!0}),g=a?d:o.standardDeviation("column",{unbiased:!0}),b=e.transpose().mmul(o);for(let _=0;_<b.rows;_++)for(let $=0;$<b.columns;$++)b.set(_,$,b.get(_,$)*(1/(d[_]*g[$]))*(1/(e.rows-1)));return b}class EigenvalueDecomposition{constructor(o,s={}){const{assumeSymmetric:a=!1}=s;if(o=WrapperMatrix2D.checkMatrix(o),!o.isSquare())throw new Error("Matrix is not a square matrix");if(o.isEmpty())throw new Error("Matrix must be non-empty");let h=o.columns,c=new Matrix$2(h,h),d=new Float64Array(h),g=new Float64Array(h),b=o,_,$,j=!1;if(a?j=!0:j=o.isSymmetric(),j){for(_=0;_<h;_++)for($=0;$<h;$++)c.set(_,$,b.get(_,$));tred2(h,g,d,c),tql2(h,g,d,c)}else{let _e=new Matrix$2(h,h),et=new Float64Array(h);for($=0;$<h;$++)for(_=0;_<h;_++)_e.set(_,$,b.get(_,$));orthes(h,_e,et,c),hqr2(h,g,d,c,_e)}this.n=h,this.e=g,this.d=d,this.V=c}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let o=this.n,s=this.e,a=this.d,h=new Matrix$2(o,o),c,d;for(c=0;c<o;c++){for(d=0;d<o;d++)h.set(c,d,0);h.set(c,c,a[c]),s[c]>0?h.set(c,c+1,s[c]):s[c]<0&&h.set(c,c-1,s[c])}return h}}function tred2(e,o,s,a){let h,c,d,g,b,_,$,j;for(b=0;b<e;b++)s[b]=a.get(e-1,b);for(g=e-1;g>0;g--){for(j=0,d=0,_=0;_<g;_++)j=j+Math.abs(s[_]);if(j===0)for(o[g]=s[g-1],b=0;b<g;b++)s[b]=a.get(g-1,b),a.set(g,b,0),a.set(b,g,0);else{for(_=0;_<g;_++)s[_]/=j,d+=s[_]*s[_];for(h=s[g-1],c=Math.sqrt(d),h>0&&(c=-c),o[g]=j*c,d=d-h*c,s[g-1]=h-c,b=0;b<g;b++)o[b]=0;for(b=0;b<g;b++){for(h=s[b],a.set(b,g,h),c=o[b]+a.get(b,b)*h,_=b+1;_<=g-1;_++)c+=a.get(_,b)*s[_],o[_]+=a.get(_,b)*h;o[b]=c}for(h=0,b=0;b<g;b++)o[b]/=d,h+=o[b]*s[b];for($=h/(d+d),b=0;b<g;b++)o[b]-=$*s[b];for(b=0;b<g;b++){for(h=s[b],c=o[b],_=b;_<=g-1;_++)a.set(_,b,a.get(_,b)-(h*o[_]+c*s[_]));s[b]=a.get(g-1,b),a.set(g,b,0)}}s[g]=d}for(g=0;g<e-1;g++){if(a.set(e-1,g,a.get(g,g)),a.set(g,g,1),d=s[g+1],d!==0){for(_=0;_<=g;_++)s[_]=a.get(_,g+1)/d;for(b=0;b<=g;b++){for(c=0,_=0;_<=g;_++)c+=a.get(_,g+1)*a.get(_,b);for(_=0;_<=g;_++)a.set(_,b,a.get(_,b)-c*s[_])}}for(_=0;_<=g;_++)a.set(_,g+1,0)}for(b=0;b<e;b++)s[b]=a.get(e-1,b),a.set(e-1,b,0);a.set(e-1,e-1,1),o[0]=0}function tql2(e,o,s,a){let h,c,d,g,b,_,$,j,_e,et,nt,it,lt,tt,st,rt;for(d=1;d<e;d++)o[d-1]=o[d];o[e-1]=0;let ot=0,ut=0,gt=Number.EPSILON;for(_=0;_<e;_++){for(ut=Math.max(ut,Math.abs(s[_])+Math.abs(o[_])),$=_;$<e&&!(Math.abs(o[$])<=gt*ut);)$++;if($>_)do{for(h=s[_],j=(s[_+1]-h)/(2*o[_]),_e=hypotenuse$1(j,1),j<0&&(_e=-_e),s[_]=o[_]/(j+_e),s[_+1]=o[_]*(j+_e),et=s[_+1],c=h-s[_],d=_+2;d<e;d++)s[d]-=c;for(ot=ot+c,j=s[$],nt=1,it=nt,lt=nt,tt=o[_+1],st=0,rt=0,d=$-1;d>=_;d--)for(lt=it,it=nt,rt=st,h=nt*o[d],c=nt*j,_e=hypotenuse$1(j,o[d]),o[d+1]=st*_e,st=o[d]/_e,nt=j/_e,j=nt*s[d]-st*h,s[d+1]=c+st*(nt*h+st*s[d]),b=0;b<e;b++)c=a.get(b,d+1),a.set(b,d+1,st*a.get(b,d)+nt*c),a.set(b,d,nt*a.get(b,d)-st*c);j=-st*rt*lt*tt*o[_]/et,o[_]=st*j,s[_]=nt*j}while(Math.abs(o[_])>gt*ut);s[_]=s[_]+ot,o[_]=0}for(d=0;d<e-1;d++){for(b=d,j=s[d],g=d+1;g<e;g++)s[g]<j&&(b=g,j=s[g]);if(b!==d)for(s[b]=s[d],s[d]=j,g=0;g<e;g++)j=a.get(g,d),a.set(g,d,a.get(g,b)),a.set(g,b,j)}}function orthes(e,o,s,a){let h=0,c=e-1,d,g,b,_,$,j,_e;for(j=h+1;j<=c-1;j++){for(_e=0,_=j;_<=c;_++)_e=_e+Math.abs(o.get(_,j-1));if(_e!==0){for(b=0,_=c;_>=j;_--)s[_]=o.get(_,j-1)/_e,b+=s[_]*s[_];for(g=Math.sqrt(b),s[j]>0&&(g=-g),b=b-s[j]*g,s[j]=s[j]-g,$=j;$<e;$++){for(d=0,_=c;_>=j;_--)d+=s[_]*o.get(_,$);for(d=d/b,_=j;_<=c;_++)o.set(_,$,o.get(_,$)-d*s[_])}for(_=0;_<=c;_++){for(d=0,$=c;$>=j;$--)d+=s[$]*o.get(_,$);for(d=d/b,$=j;$<=c;$++)o.set(_,$,o.get(_,$)-d*s[$])}s[j]=_e*s[j],o.set(j,j-1,_e*g)}}for(_=0;_<e;_++)for($=0;$<e;$++)a.set(_,$,_===$?1:0);for(j=c-1;j>=h+1;j--)if(o.get(j,j-1)!==0){for(_=j+1;_<=c;_++)s[_]=o.get(_,j-1);for($=j;$<=c;$++){for(g=0,_=j;_<=c;_++)g+=s[_]*a.get(_,$);for(g=g/s[j]/o.get(j,j-1),_=j;_<=c;_++)a.set(_,$,a.get(_,$)+g*s[_])}}}function hqr2(e,o,s,a,h){let c=e-1,d=0,g=e-1,b=Number.EPSILON,_=0,$=0,j=0,_e=0,et=0,nt=0,it=0,lt=0,tt,st,rt,ot,ut,gt,pt,ht,ct,at,ft,mt,xt,bt,Et;for(tt=0;tt<e;tt++)for((tt<d||tt>g)&&(s[tt]=h.get(tt,tt),o[tt]=0),st=Math.max(tt-1,0);st<e;st++)$=$+Math.abs(h.get(tt,st));for(;c>=d;){for(ot=c;ot>d&&(nt=Math.abs(h.get(ot-1,ot-1))+Math.abs(h.get(ot,ot)),nt===0&&(nt=$),!(Math.abs(h.get(ot,ot-1))<b*nt));)ot--;if(ot===c)h.set(c,c,h.get(c,c)+_),s[c]=h.get(c,c),o[c]=0,c--,lt=0;else if(ot===c-1){if(pt=h.get(c,c-1)*h.get(c-1,c),j=(h.get(c-1,c-1)-h.get(c,c))/2,_e=j*j+pt,it=Math.sqrt(Math.abs(_e)),h.set(c,c,h.get(c,c)+_),h.set(c-1,c-1,h.get(c-1,c-1)+_),ht=h.get(c,c),_e>=0){for(it=j>=0?j+it:j-it,s[c-1]=ht+it,s[c]=s[c-1],it!==0&&(s[c]=ht-pt/it),o[c-1]=0,o[c]=0,ht=h.get(c,c-1),nt=Math.abs(ht)+Math.abs(it),j=ht/nt,_e=it/nt,et=Math.sqrt(j*j+_e*_e),j=j/et,_e=_e/et,st=c-1;st<e;st++)it=h.get(c-1,st),h.set(c-1,st,_e*it+j*h.get(c,st)),h.set(c,st,_e*h.get(c,st)-j*it);for(tt=0;tt<=c;tt++)it=h.get(tt,c-1),h.set(tt,c-1,_e*it+j*h.get(tt,c)),h.set(tt,c,_e*h.get(tt,c)-j*it);for(tt=d;tt<=g;tt++)it=a.get(tt,c-1),a.set(tt,c-1,_e*it+j*a.get(tt,c)),a.set(tt,c,_e*a.get(tt,c)-j*it)}else s[c-1]=ht+j,s[c]=ht+j,o[c-1]=it,o[c]=-it;c=c-2,lt=0}else{if(ht=h.get(c,c),ct=0,pt=0,ot<c&&(ct=h.get(c-1,c-1),pt=h.get(c,c-1)*h.get(c-1,c)),lt===10){for(_+=ht,tt=d;tt<=c;tt++)h.set(tt,tt,h.get(tt,tt)-ht);nt=Math.abs(h.get(c,c-1))+Math.abs(h.get(c-1,c-2)),ht=ct=.75*nt,pt=-.4375*nt*nt}if(lt===30&&(nt=(ct-ht)/2,nt=nt*nt+pt,nt>0)){for(nt=Math.sqrt(nt),ct<ht&&(nt=-nt),nt=ht-pt/((ct-ht)/2+nt),tt=d;tt<=c;tt++)h.set(tt,tt,h.get(tt,tt)-nt);_+=nt,ht=ct=pt=.964}for(lt=lt+1,ut=c-2;ut>=ot&&(it=h.get(ut,ut),et=ht-it,nt=ct-it,j=(et*nt-pt)/h.get(ut+1,ut)+h.get(ut,ut+1),_e=h.get(ut+1,ut+1)-it-et-nt,et=h.get(ut+2,ut+1),nt=Math.abs(j)+Math.abs(_e)+Math.abs(et),j=j/nt,_e=_e/nt,et=et/nt,!(ut===ot||Math.abs(h.get(ut,ut-1))*(Math.abs(_e)+Math.abs(et))<b*(Math.abs(j)*(Math.abs(h.get(ut-1,ut-1))+Math.abs(it)+Math.abs(h.get(ut+1,ut+1))))));)ut--;for(tt=ut+2;tt<=c;tt++)h.set(tt,tt-2,0),tt>ut+2&&h.set(tt,tt-3,0);for(rt=ut;rt<=c-1&&(bt=rt!==c-1,rt!==ut&&(j=h.get(rt,rt-1),_e=h.get(rt+1,rt-1),et=bt?h.get(rt+2,rt-1):0,ht=Math.abs(j)+Math.abs(_e)+Math.abs(et),ht!==0&&(j=j/ht,_e=_e/ht,et=et/ht)),ht!==0);rt++)if(nt=Math.sqrt(j*j+_e*_e+et*et),j<0&&(nt=-nt),nt!==0){for(rt!==ut?h.set(rt,rt-1,-nt*ht):ot!==ut&&h.set(rt,rt-1,-h.get(rt,rt-1)),j=j+nt,ht=j/nt,ct=_e/nt,it=et/nt,_e=_e/j,et=et/j,st=rt;st<e;st++)j=h.get(rt,st)+_e*h.get(rt+1,st),bt&&(j=j+et*h.get(rt+2,st),h.set(rt+2,st,h.get(rt+2,st)-j*it)),h.set(rt,st,h.get(rt,st)-j*ht),h.set(rt+1,st,h.get(rt+1,st)-j*ct);for(tt=0;tt<=Math.min(c,rt+3);tt++)j=ht*h.get(tt,rt)+ct*h.get(tt,rt+1),bt&&(j=j+it*h.get(tt,rt+2),h.set(tt,rt+2,h.get(tt,rt+2)-j*et)),h.set(tt,rt,h.get(tt,rt)-j),h.set(tt,rt+1,h.get(tt,rt+1)-j*_e);for(tt=d;tt<=g;tt++)j=ht*a.get(tt,rt)+ct*a.get(tt,rt+1),bt&&(j=j+it*a.get(tt,rt+2),a.set(tt,rt+2,a.get(tt,rt+2)-j*et)),a.set(tt,rt,a.get(tt,rt)-j),a.set(tt,rt+1,a.get(tt,rt+1)-j*_e)}}}if($!==0){for(c=e-1;c>=0;c--)if(j=s[c],_e=o[c],_e===0)for(ot=c,h.set(c,c,1),tt=c-1;tt>=0;tt--){for(pt=h.get(tt,tt)-j,et=0,st=ot;st<=c;st++)et=et+h.get(tt,st)*h.get(st,c);if(o[tt]<0)it=pt,nt=et;else if(ot=tt,o[tt]===0?h.set(tt,c,pt!==0?-et/pt:-et/(b*$)):(ht=h.get(tt,tt+1),ct=h.get(tt+1,tt),_e=(s[tt]-j)*(s[tt]-j)+o[tt]*o[tt],gt=(ht*nt-it*et)/_e,h.set(tt,c,gt),h.set(tt+1,c,Math.abs(ht)>Math.abs(it)?(-et-pt*gt)/ht:(-nt-ct*gt)/it)),gt=Math.abs(h.get(tt,c)),b*gt*gt>1)for(st=tt;st<=c;st++)h.set(st,c,h.get(st,c)/gt)}else if(_e<0)for(ot=c-1,Math.abs(h.get(c,c-1))>Math.abs(h.get(c-1,c))?(h.set(c-1,c-1,_e/h.get(c,c-1)),h.set(c-1,c,-(h.get(c,c)-j)/h.get(c,c-1))):(Et=cdiv(0,-h.get(c-1,c),h.get(c-1,c-1)-j,_e),h.set(c-1,c-1,Et[0]),h.set(c-1,c,Et[1])),h.set(c,c-1,0),h.set(c,c,1),tt=c-2;tt>=0;tt--){for(at=0,ft=0,st=ot;st<=c;st++)at=at+h.get(tt,st)*h.get(st,c-1),ft=ft+h.get(tt,st)*h.get(st,c);if(pt=h.get(tt,tt)-j,o[tt]<0)it=pt,et=at,nt=ft;else if(ot=tt,o[tt]===0?(Et=cdiv(-at,-ft,pt,_e),h.set(tt,c-1,Et[0]),h.set(tt,c,Et[1])):(ht=h.get(tt,tt+1),ct=h.get(tt+1,tt),mt=(s[tt]-j)*(s[tt]-j)+o[tt]*o[tt]-_e*_e,xt=(s[tt]-j)*2*_e,mt===0&&xt===0&&(mt=b*$*(Math.abs(pt)+Math.abs(_e)+Math.abs(ht)+Math.abs(ct)+Math.abs(it))),Et=cdiv(ht*et-it*at+_e*ft,ht*nt-it*ft-_e*at,mt,xt),h.set(tt,c-1,Et[0]),h.set(tt,c,Et[1]),Math.abs(ht)>Math.abs(it)+Math.abs(_e)?(h.set(tt+1,c-1,(-at-pt*h.get(tt,c-1)+_e*h.get(tt,c))/ht),h.set(tt+1,c,(-ft-pt*h.get(tt,c)-_e*h.get(tt,c-1))/ht)):(Et=cdiv(-et-ct*h.get(tt,c-1),-nt-ct*h.get(tt,c),it,_e),h.set(tt+1,c-1,Et[0]),h.set(tt+1,c,Et[1]))),gt=Math.max(Math.abs(h.get(tt,c-1)),Math.abs(h.get(tt,c))),b*gt*gt>1)for(st=tt;st<=c;st++)h.set(st,c-1,h.get(st,c-1)/gt),h.set(st,c,h.get(st,c)/gt)}for(tt=0;tt<e;tt++)if(tt<d||tt>g)for(st=tt;st<e;st++)a.set(tt,st,h.get(tt,st));for(st=e-1;st>=d;st--)for(tt=d;tt<=g;tt++){for(it=0,rt=d;rt<=Math.min(st,g);rt++)it=it+a.get(tt,rt)*h.get(rt,st);a.set(tt,st,it)}}}function cdiv(e,o,s,a){let h,c;return Math.abs(s)>Math.abs(a)?(h=a/s,c=s+h*a,[(e+h*o)/c,(o-h*e)/c]):(h=s/a,c=a+h*s,[(h*e+o)/c,(h*o-e)/c])}class CholeskyDecomposition{constructor(o){if(o=WrapperMatrix2D.checkMatrix(o),!o.isSymmetric())throw new Error("Matrix is not symmetric");let s=o,a=s.rows,h=new Matrix$2(a,a),c=!0,d,g,b;for(g=0;g<a;g++){let _=0;for(b=0;b<g;b++){let $=0;for(d=0;d<b;d++)$+=h.get(b,d)*h.get(g,d);$=(s.get(g,b)-$)/h.get(b,b),h.set(g,b,$),_=_+$*$}for(_=s.get(g,g)-_,c&=_>0,h.set(g,g,Math.sqrt(Math.max(_,0))),b=g+1;b<a;b++)h.set(g,b,0)}this.L=h,this.positiveDefinite=!!c}isPositiveDefinite(){return this.positiveDefinite}solve(o){o=WrapperMatrix2D.checkMatrix(o);let s=this.L,a=s.rows;if(o.rows!==a)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let h=o.columns,c=o.clone(),d,g,b;for(b=0;b<a;b++)for(g=0;g<h;g++){for(d=0;d<b;d++)c.set(b,g,c.get(b,g)-c.get(d,g)*s.get(b,d));c.set(b,g,c.get(b,g)/s.get(b,b))}for(b=a-1;b>=0;b--)for(g=0;g<h;g++){for(d=b+1;d<a;d++)c.set(b,g,c.get(b,g)-c.get(d,g)*s.get(d,b));c.set(b,g,c.get(b,g)/s.get(b,b))}return c}get lowerTriangularMatrix(){return this.L}}class nipals{constructor(o,s={}){o=WrapperMatrix2D.checkMatrix(o);let{Y:a}=s;const{scaleScores:h=!1,maxIterations:c=1e3,terminationCriteria:d=1e-10}=s;let g;if(a){if(isAnyArray(a)&&typeof a[0]=="number"?a=Matrix$2.columnVector(a):a=WrapperMatrix2D.checkMatrix(a),a.rows!==o.rows)throw new Error("Y should have the same number of rows as X");g=a.getColumnVector(0)}else g=o.getColumnVector(0);let b=1,_,$,j,_e;for(let et=0;et<c&&b>d;et++)j=o.transpose().mmul(g).div(g.transpose().mmul(g).get(0,0)),j=j.div(j.norm()),_=o.mmul(j).div(j.transpose().mmul(j).get(0,0)),et>0&&(b=_.clone().sub(_e).pow(2).sum()),_e=_.clone(),a?($=a.transpose().mmul(_).div(_.transpose().mmul(_).get(0,0)),$=$.div($.norm()),g=a.mmul($).div($.transpose().mmul($).get(0,0))):g=_;if(a){let et=o.transpose().mmul(_).div(_.transpose().mmul(_).get(0,0));et=et.div(et.norm());let nt=o.clone().sub(_.clone().mmul(et.transpose())),it=g.transpose().mmul(_).div(_.transpose().mmul(_).get(0,0)),lt=a.clone().sub(_.clone().mulS(it.get(0,0)).mmul($.transpose()));this.t=_,this.p=et.transpose(),this.w=j.transpose(),this.q=$,this.u=g,this.s=_.transpose().mmul(_),this.xResidual=nt,this.yResidual=lt,this.betas=it}else this.w=j.transpose(),this.s=_.transpose().mmul(_).sqrt(),h?this.t=_.clone().div(this.s.get(0,0)):this.t=_,this.xResidual=o.sub(_.mmul(j.transpose()))}}const src$1=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix,CHO:CholeskyDecomposition,CholeskyDecomposition,EVD:EigenvalueDecomposition,EigenvalueDecomposition,LU:LuDecomposition,LuDecomposition,Matrix:Matrix$2,MatrixColumnSelectionView,MatrixColumnView,MatrixFlipColumnView,MatrixFlipRowView,MatrixRowSelectionView,MatrixRowView,MatrixSelectionView,MatrixSubView,MatrixTransposeView:MatrixTransposeView$1,NIPALS:nipals,Nipals:nipals,QR:QrDecomposition,QrDecomposition,SVD:SingularValueDecomposition,SingularValueDecomposition,WrapperMatrix1D,WrapperMatrix2D,correlation,covariance,default:Matrix$2,determinant,inverse,linearDependencies,pseudoInverse,solve,wrap},Symbol.toStringTag,{value:"Module"}));function getSeparatedKernel(e){const o=new SingularValueDecomposition(e,{autoTranspose:!0});if(o.rank!==1)return null;const s=Math.sqrt(o.s[0]),a=o.U.to2DArray().map(c=>c[0]*s),h=o.V.to2DArray().map(c=>c[0]*s);return[a,h]}function convolution(e,o={}){let{channels:s,bitDepth:a,normalize:h=!1,divisor:c=1,border:d="copy",algorithm:g="auto"}=o,b={};a&&(b.bitDepth=a);let _=Image.createFrom(this,b);if(s=validateArrayOfChannels(this,s),g!=="separable")({kernel:e}=validateKernel(e));else if(!Array.isArray(e)||e.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(g==="auto"){let ot=getSeparatedKernel(e);ot!==null?(g="separable",e=ot):(e.length>9||e[0].length>9)&&this.width<=4096&&this.height<=4096?g="fft":g="direct"}let $,j;g==="separable"?($=Math.floor(e[0].length/2),j=Math.floor(e[1].length/2)):($=Math.floor(e.length/2),j=Math.floor(e[0].length/2));let _e=_.isClamped,et=new Array(this.height*this.width),nt,it,lt,tt,st,rt;for(tt=0;tt<s.length;tt++){for(st=s[tt],lt=0;lt<this.height;lt++)for(it=0;it<this.width;it++)nt=lt*this.width+it,et[nt]=this.data[nt*this.channels+st];if(g==="direct")rt=src$2.direct(et,e,{rows:this.height,cols:this.width,normalize:h,divisor:c});else if(g==="separable"){if(rt=convolutionSeparable(et,e,this.width,this.height),h){c=0;for(let ot=0;ot<e[0].length;ot++)for(let ut=0;ut<e[1].length;ut++)c+=e[0][ot]*e[1][ut]}if(c!==1)for(let ot=0;ot<rt.length;ot++)rt[ot]/=c}else rt=src$2.fft(et,e,{rows:this.height,cols:this.width,normalize:h,divisor:c});for(lt=0;lt<this.height;lt++)for(it=0;it<this.width;it++)nt=lt*this.width+it,_e?_.data[nt*this.channels+st]=clamp(rt[nt],_):_.data[nt*this.channels+st]=rt[nt]}if(this.alpha&&!s.includes(this.channels))for(it=this.components;it<this.data.length;it=it+this.channels)_.data[it]=this.data[it];return d!=="periodic"&&_.setBorder({size:[j,$],algorithm:d}),_}function gradientFilter(e={}){let{direction:o="xy",border:s="copy",kernelX:a,kernelY:h,channels:c,bitDepth:d=this.bitDepth}=e;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),o){case"x":if(!a)throw new Error("kernelX option is missing");return convolution.call(this,a,{channels:c,border:s,bitDepth:d});case"y":if(!h)throw new Error("kernelY option is missing");return convolution.call(this,h,{channels:c,border:s,bitDepth:d});case"xy":{if(!a)throw new Error("kernelX option is missing");if(!h)throw new Error("kernelY option is missing");const g=convolution.call(this,a,{channels:c,border:s,bitDepth:32}),b=convolution.call(this,h,{channels:c,border:s,bitDepth:32});return g.hypotenuse(b,{bitDepth:d,channels:c})}default:throw new Error(`Unknown parameter direction: ${o}`)}}function sobelFilter(e){return gradientFilter.call(this,Object.assign({},e,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(e){return gradientFilter.call(this,Object.assign({},e,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1=newArray;function newArray(e,o){e=e||0;for(var s=new Array(e),a=0;a<e;a++)s[a]=o;return s}const newArray$1=getDefaultExportFromCjs(newArray_1);function level(e={}){let{algorithm:o="range",channels:s,min:a=this.min,max:h=this.max}=e;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),s=validateArrayOfChannels(this,{channels:s}),s.length!==this.channel&&(Array.isArray(a)&&a.length===this.channels&&(a=a.filter((c,d)=>s.includes(d))),Array.isArray(h)&&h.length===this.channels&&(h=h.filter((c,d)=>s.includes(d)))),o){case"range":a<0&&(a=0),h>this.maxValue&&(h=this.maxValue),Array.isArray(a)||(a=newArray$1(s.length,a)),Array.isArray(h)||(h=newArray$1(s.length,h)),processImage(this,a,h,s);break;default:throw new Error(`level: algorithm not implement: ${o}`)}return this}function processImage(e,o,s,a){let h=1e-5,c=new Array(a.length);for(let d=0;d<a.length;d++)o[d]===0&&s[d]===e.maxValue||s[d]===o[d]?c[d]=0:c[d]=(e.maxValue+1-h)/(s[d]-o[d]),o[d]+=(.5-h/2)/c[d];for(let d=0;d<a.length;d++){let g=a[d];if(c[d]!==0)for(let b=0;b<e.data.length;b+=e.channels)e.data[b+g]=Math.min(Math.max(0,(e.data[b+g]-o[d])*c[d]+.5|0),e.maxValue)}}var toString=Object.prototype.toString,isArrayType=function e(o){return toString.call(o).substr(-6,5)==="Array"};const isArray=getDefaultExportFromCjs(isArrayType);function checkNumberArray(e){if(isNaN(e)){if(e instanceof Image)return e.data;if(!isArray(e))throw new Error("checkNumberArray: the value should be either a number, array or Image");return e}else{if(e<=0)throw new Error("checkNumberArray: the value must be greater than 0");return e}}function add(e,o={}){let{channels:s}=o;if(this.checkProcessable("add",{bitDepth:[8,16]}),s=validateArrayOfChannels(this,{channels:s}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("add: the data size is different");for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.max(0,Math.min(this.maxValue,this.data[c+h]+e[c+h]>>0))}}else for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.min(this.maxValue,this.data[c+h]+e>>0)}return this}function subtract(e,o={}){let{channels:s}=o;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),s=validateArrayOfChannels(this,{channels:s}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("subtract: the data size is different");for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.max(0,Math.min(this.maxValue,this.data[c+h]-e[c+h]>>0))}}else for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.max(0,this.data[c+h]-e>>0)}return this}function subtractImage(e,o={}){let{channels:s,absolute:a=!1}=o;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==e.width||this.height!==e.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("subtractImage: both images must have the same number of channels");let h=this.clone();s=validateArrayOfChannels(this,{channels:s});for(let c=0;c<s.length;c++){let d=s[c];for(let g=d;g<this.data.length;g+=this.channels){let b=this.data[g]-e.data[g];a?h.data[g]=Math.abs(b):h.data[g]=Math.max(b,0)}}return h}function hypotenuse(e,o={}){let{bitDepth:s=this.bitDepth,channels:a}=o;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==e.width||this.height!==e.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("hypotenuse: both images must have the same number of channels");let h=Image.createFrom(this,{bitDepth:s});a=validateArrayOfChannels(this,{channels:a});let c=h.isClamped;for(let d=0;d<a.length;d++){let g=a[d];for(let b=g;b<this.data.length;b+=this.channels){let _=Math.hypot(this.data[b],e.data[b]);c?h.data[b]=Math.min(Math.max(Math.round(_),0),h.maxValue):h.data[b]=_}}return h}function multiply(e,o={}){let{channels:s}=o;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),e<=0)throw new Error("multiply: the value must be greater than 0");if(s=validateArrayOfChannels(this,{channels:s}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("multiply: the data size is different");for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.max(0,Math.min(this.maxValue,this.data[c+h]*e[c+h]>>0))}}else for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.min(this.maxValue,this.data[c+h]*e>>0)}return this}function divide(e,o={}){let{channels:s}=o;if(this.checkProcessable("divide",{bitDepth:[8,16]}),s=validateArrayOfChannels(this,{channels:s}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("divide: the: the data size is different");for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.max(0,Math.min(this.maxValue,this.data[c+h]/e[c+h]>>0))}}else for(let a=0;a<s.length;a++){let h=s[a];for(let c=0;c<this.data.length;c+=this.channels)this.data[c+h]=Math.min(this.maxValue,this.data[c+h]/e>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(o){if(typeof o=="number")return this._predict(o);if(isAnyArray(o)){const s=[];for(let a=0;a<o.length;a++)s.push(this._predict(o[a]));return s}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(o,s){if(!isAnyArray(o)||!isAnyArray(s)||o.length!==s.length)throw new Error("x and y must be arrays of the same length");const a=o.length,h=new Array(a);for(let et=0;et<a;et++)h[et]=this._predict(o[et]);let c=0,d=0,g=0,b=0,_=0,$=0,j=0;for(let et=0;et<a;et++)c+=h[et],d+=s[et],_+=h[et]*h[et],$+=s[et]*s[et],j+=h[et]*s[et],s[et]!==0&&(g+=(s[et]-h[et])*(s[et]-h[et])/s[et]),b+=(s[et]-h[et])*(s[et]-h[et]);const _e=(a*j-c*d)/Math.sqrt((a*_-c*c)*(a*$-d*d));return{r:_e,r2:_e*_e,chi2:g,rmsd:Math.sqrt(b/a)}}}const require$$0$1=getAugmentedNamespace(src$1);function squaredEuclidean$4(e,o){let s=0;for(let a=0;a<e.length;a++)s+=(e[a]-o[a])*(e[a]-o[a]);return s}function euclidean$2(e,o){return Math.sqrt(squaredEuclidean$4(e,o))}const euclidean$3=Object.freeze(Object.defineProperty({__proto__:null,euclidean:euclidean$2,squaredEuclidean:squaredEuclidean$4},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$3),{squaredEuclidean:squaredEuclidean$3}=require$$0,defaultOptions$b={sigma:1};let GaussianKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$b,o),this.sigma=o.sigma,this.divisor=2*o.sigma*o.sigma}compute(o,s){const a=squaredEuclidean$3(o,s);return Math.exp(-a/this.divisor)}};var gaussianKernel=GaussianKernel$1;const defaultOptions$a={degree:1,constant:1,scale:1};let PolynomialKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$a,o),this.degree=o.degree,this.constant=o.constant,this.scale=o.scale}compute(o,s){for(var a=0,h=0;h<o.length;h++)a+=o[h]*s[h];return Math.pow(this.scale*a+this.constant,this.degree)}};var polynomialKernel=PolynomialKernel$1;const defaultOptions$9={alpha:.01,constant:-Math.E};let SigmoidKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$9,o),this.alpha=o.alpha,this.constant=o.constant}compute(o,s){for(var a=0,h=0;h<o.length;h++)a+=o[h]*s[h];return Math.tanh(this.alpha*a+this.constant)}};var sigmoidKernel=SigmoidKernel$1;const defaultOptions$8={sigma:1,degree:1};let ANOVAKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$8,o),this.sigma=o.sigma,this.degree=o.degree}compute(o,s){for(var a=0,h=Math.min(o.length,s.length),c=1;c<=h;++c)a+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(o[c-1],c)-Math.pow(s[c-1],c),2)),this.degree);return a}};var anovaKernel=ANOVAKernel$1;const{squaredEuclidean:squaredEuclidean$2}=require$$0,defaultOptions$7={sigma:1};let CauchyKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$7,o),this.sigma=o.sigma}compute(o,s){return 1/(1+squaredEuclidean$2(o,s)/(this.sigma*this.sigma))}};var cauchyKernel=CauchyKernel$1;const{euclidean:euclidean$1}=require$$0,defaultOptions$6={sigma:1};let ExponentialKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$6,o),this.sigma=o.sigma,this.divisor=2*o.sigma*o.sigma}compute(o,s){const a=euclidean$1(o,s);return Math.exp(-a/this.divisor)}};var exponentialKernel=ExponentialKernel$1;class HistogramIntersectionKernel{compute(o,s){for(var a=Math.min(o.length,s.length),h=0,c=0;c<a;++c)h+=Math.min(o[c],s[c]);return h}}var histogramIntersectionKernel=HistogramIntersectionKernel;const{euclidean}=require$$0,defaultOptions$5={sigma:1};let LaplacianKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$5,o),this.sigma=o.sigma}compute(o,s){const a=euclidean(o,s);return Math.exp(-a/this.sigma)}};var laplacianKernel=LaplacianKernel$1;const{squaredEuclidean:squaredEuclidean$1}=require$$0,defaultOptions$4={constant:1};let MultiquadraticKernel$1=class{constructor(o){o=Object.assign({},defaultOptions$4,o),this.constant=o.constant}compute(o,s){return Math.sqrt(squaredEuclidean$1(o,s)+this.constant*this.constant)}};var multiquadraticKernel=MultiquadraticKernel$1;const{squaredEuclidean}=require$$0,defaultOptions$3={constant:1};class RationalQuadraticKernel{constructor(o){o=Object.assign({},defaultOptions$3,o),this.constant=o.constant}compute(o,s){const a=squaredEuclidean(o,s);return 1-a/(a+this.constant)}}var rationalQuadraticKernel=RationalQuadraticKernel;const{Matrix:Matrix$1,MatrixTransposeView}=require$$0$1,GaussianKernel=gaussianKernel,PolynomialKernel=polynomialKernel,SigmoidKernel=sigmoidKernel,ANOVAKernel=anovaKernel,CauchyKernel=cauchyKernel,ExponentialKernel=exponentialKernel,HistogramKernel=histogramIntersectionKernel,LaplacianKernel=laplacianKernel,MultiquadraticKernel=multiquadraticKernel,RationalKernel=rationalQuadraticKernel,kernelType={gaussian:GaussianKernel,rbf:GaussianKernel,polynomial:PolynomialKernel,poly:PolynomialKernel,anova:ANOVAKernel,cauchy:CauchyKernel,exponential:ExponentialKernel,histogram:HistogramKernel,min:HistogramKernel,laplacian:LaplacianKernel,multiquadratic:MultiquadraticKernel,rational:RationalKernel,sigmoid:SigmoidKernel,mlp:SigmoidKernel};class Kernel{constructor(o,s){if(this.kernelType=o,o!=="linear")if(typeof o=="string"){o=o.toLowerCase();var a=kernelType[o];if(a)this.kernelFunction=new a(s);else throw new Error(`unsupported kernel type: ${o}`)}else if(typeof o=="object"&&typeof o.compute=="function")this.kernelFunction=o;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(o,s){if(o=Matrix$1.checkMatrix(o),s===void 0?s=o:s=Matrix$1.checkMatrix(s),this.kernelType==="linear")return o.mmul(new MatrixTransposeView(s));const a=new Matrix$1(o.rows,s.rows);if(o===s)for(let h=0;h<o.rows;h++)for(let c=h;c<o.rows;c++){const d=this.kernelFunction.compute(o.getRow(h),o.getRow(c));a.set(h,c,d),a.set(c,h,d)}else for(let h=0;h<o.rows;h++)for(let c=0;c<s.rows;c++)a.set(h,c,this.kernelFunction.compute(o.getRow(h),s.getRow(c)));return a}}var kernel=Kernel;const Kernel$1=getDefaultExportFromCjs(kernel),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(o,s,a){if(super(),o===!0)this.alpha=s.alpha,this.inputs=s.inputs,this.kernelType=s.kernelType,this.kernelOptions=s.kernelOptions,this.kernel=new Kernel$1(s.kernelType,s.kernelOptions);else{o=Matrix$2.checkMatrix(o),a=Object.assign({},defaultOptions$2,a);const h=new Kernel$1(a.kernelType,a.kernelOptions),c=h.compute(o),d=o.rows;c.add(Matrix$2.eye(d,d).mul(a.lambda)),this.alpha=solve(c,s),this.inputs=o,this.kernelType=a.kernelType,this.kernelOptions=a.kernelOptions,this.kernel=h}}_predict(o){return this.kernel.compute([o],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(o){if(o.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,o)}}function background$1(e,o,s){const a=new KernelRidgeRegression(e,o,s),h=new Array(this.size);for(let g=0;g<this.width;g++)for(let b=0;b<this.height;b++)h[b*this.width+g]=[g,b];const c=a.predict(h),d=Image.createFrom(this);for(let g=0;g<this.size;g++)d.data[g]=Math.min(this.maxValue,Math.max(0,c[g][0]));return d}function dilate(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let a=!0;e:for(const c of o)for(const d of c)if(d!==1){a=!1;break e}let h=this;for(let c=0;c<s;c++)if(this.bitDepth===1)if(a){const d=h.clone();h=dilateOnceBinaryOnlyOnes(h,d,o.length,o[0].length)}else{const d=Image.createFrom(h);h=dilateOnceBinary(h,d,o)}else if(a){const d=Image.createFrom(h);h=dilateOnceGreyOnlyOnes(h,d,o.length,o[0].length)}else{const d=Image.createFrom(h);h=dilateOnceGrey(h,d,o)}return h}function dilateOnceGrey(e,o,s){const a=s.length,h=s[0].length;let c=(a-1)/2,d=(h-1)/2;for(let g=0;g<e.height;g++)for(let b=0;b<e.width;b++){let _=0;for(let $=0;$<h;$++)for(let j=0;j<a;j++){if(s[j][$]!==1)continue;let _e=j-c+b,et=$-d+g;if(_e<0||et<0||_e>=e.width||et>=e.height)continue;const nt=e.getValueXY(_e,et,0);nt>_&&(_=nt)}o.setValueXY(b,g,0,_)}return o}function dilateOnceGreyOnlyOnes(e,o,s,a){const h=(s-1)/2,c=(a-1)/2,d=[];for(let g=0;g<e.width;g++)d.push(0);for(let g=0;g<e.height;g++){for(let b=0;b<e.width;b++){let _=0;for(let $=Math.max(0,g-c);$<Math.min(e.height,g+c+1);$++){const j=e.getValueXY(b,$,0);j>_&&(_=j)}d[b]=_}for(let b=0;b<e.width;b++){let _=0;for(let $=Math.max(0,b-h);$<Math.min(e.width,b+h+1);$++)d[$]>_&&(_=d[$]);o.setValueXY(b,g,0,_)}}return o}function dilateOnceBinary(e,o,s){const a=s.length,h=s[0].length;let c=(a-1)/2,d=(h-1)/2;for(let g=0;g<e.height;g++)for(let b=0;b<e.width;b++){let _=0;e:for(let $=0;$<h;$++)for(let j=0;j<a;j++){if(s[j][$]!==1)continue;let _e=j-c+b,et=$-d+g;if(et<0||_e<0||_e>=e.width||et>=e.height)continue;if(e.getBitXY(_e,et)===1){_=1;break e}}_===1&&o.setBitXY(b,g)}return o}function dilateOnceBinaryOnlyOnes(e,o,s,a){const h=(s-1)/2,c=(a-1)/2,d=[];for(let g=0;g<e.width;g++)d.push(1);for(let g=0;g<e.height;g++){for(let b=0;b<e.width;b++){d[b]=0;for(let _=Math.max(0,g-c);_<Math.min(e.height,g+c+1);_++)if(e.getBitXY(b,_)===1){d[b]=1;break}}for(let b=0;b<e.width;b++)if(o.getBitXY(b,g)!==1){for(let _=Math.max(0,b-h);_<Math.min(e.width,b+h+1);_++)if(d[_]===1){o.setBitXY(b,g);break}}}return o}function erode(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let a=!0;e:for(const c of o)for(const d of c)if(d!==1){a=!1;break e}let h=this;for(let c=0;c<s;c++)if(this.bitDepth===1)if(a){const d=h.clone();h=erodeOnceBinaryOnlyOnes(h,d,o.length,o[0].length)}else{const d=Image.createFrom(h);h=erodeOnceBinary(h,d,o)}else if(a){const d=Image.createFrom(h);h=erodeOnceGreyOnlyOnes(h,d,o.length,o[0].length)}else{const d=Image.createFrom(h);h=erodeOnceGrey(h,d,o)}return h}function erodeOnceGrey(e,o,s){const a=s.length,h=s[0].length;let c=(a-1)/2,d=(h-1)/2;for(let g=0;g<e.height;g++)for(let b=0;b<e.width;b++){let _=e.maxValue;for(let $=0;$<h;$++)for(let j=0;j<a;j++){if(s[j][$]!==1)continue;let _e=j-c+b,et=$-d+g;if(_e<0||et<0||_e>=e.width||et>=e.height)continue;const nt=e.getValueXY(_e,et,0);nt<_&&(_=nt)}o.setValueXY(b,g,0,_)}return o}function erodeOnceGreyOnlyOnes(e,o,s,a){const h=(s-1)/2,c=(a-1)/2,d=[];for(let g=0;g<e.width;g++)d.push(0);for(let g=0;g<e.height;g++){for(let b=0;b<e.width;b++){let _=e.maxValue;for(let $=Math.max(0,g-c);$<Math.min(e.height,g+c+1);$++){const j=e.getValueXY(b,$,0);j<_&&(_=j)}d[b]=_}for(let b=0;b<e.width;b++){let _=e.maxValue;for(let $=Math.max(0,b-h);$<Math.min(e.width,b+h+1);$++)d[$]<_&&(_=d[$]);o.setValueXY(b,g,0,_)}}return o}function erodeOnceBinary(e,o,s){const a=s.length,h=s[0].length;let c=(a-1)/2,d=(h-1)/2;for(let g=0;g<e.height;g++)for(let b=0;b<e.width;b++){let _=1;e:for(let $=0;$<h;$++)for(let j=0;j<a;j++){if(s[j][$]!==1)continue;let _e=j-c+b,et=$-d+g;if(et<0||_e<0||_e>=e.width||et>=e.height)continue;if(e.getBitXY(_e,et)===0){_=0;break e}}_===1&&o.setBitXY(b,g)}return o}function erodeOnceBinaryOnlyOnes(e,o,s,a){const h=(s-1)/2,c=(a-1)/2,d=[];for(let g=0;g<e.width;g++)d.push(0);for(let g=0;g<e.height;g++){for(let b=0;b<e.width;b++){d[b]=1;for(let _=Math.max(0,g-c);_<Math.min(e.height,g+c+1);_++)if(e.getBitXY(b,_)===0){d[b]=0;break}}for(let b=0;b<e.width;b++)if(o.getBitXY(b,g)!==0){for(let _=Math.max(0,b-h);_<Math.min(e.width,b+h+1);_++)if(d[_]===0){o.clearBitXY(b,g);break}}}return o}function open(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let a=this;for(let h=0;h<s;h++)a=a.erode({kernel:o}),a=a.dilate({kernel:o});return a}function close(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let a=this;for(let h=0;h<s;h++)a=a.dilate({kernel:o}).erode({kernel:o});return a}function topHat(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),o.length%2===0||o[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let a=this;for(let h=0;h<s;h++)a=a.open({kernel:o}).subtractImage(a,{absolute:!0});return a}function blackHat(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let a=this;for(let h=0;h<s;h++)a=a.close({kernel:o}).subtractImage(a,{absolute:!0});return a}function morphologicalGradient(e={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:s=1}=e;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let a=this;for(let h=0;h<s;h++){let c=a.dilate({kernel:o}),d=a.erode({kernel:o});a=c.subtractImage(d,{absolute:!0})}return a}function order4Points(e){let o=0,s=0,a=0,h=0,c=e[0][0],d=0;for(let _=1;_<e.length;_++)e[_][0]<c&&(c=e[_][0],d=_);let g=e[(d+1)%e.length][0],b=(d+1)%e.length;for(let _=1;_<e.length;_++)e[_][0]<g&&_!==d&&(g=e[_][0],b=_);return e[b][1]<e[d][1]?(o=e[b],h=e[d],d!==(b+1)%4?(s=e[(b+1)%4],a=e[(b+2)%4]):(s=e[(b+2)%4],a=e[(b+3)%4])):(h=e[b],o=e[d],b!==(d+1)%4?(s=e[(d+1)%4],a=e[(d+2)%4]):(s=e[(d+2)%4],a=e[(d+3)%4])),[o,s,a,h]}function distance2Points(e,o){return Math.sqrt(Math.pow(e[0]-o[0],2)+Math.pow(e[1]-o[1],2))}function crossVect(e,o){return[e[1]*o[2]-e[2]*o[1],e[2]*o[0]-e[0]*o[2],e[0]*o[1]-e[1]*o[0]]}function dotVect(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]}function computeWidthAndHeigth(e,o,s,a,h,c){let d=Math.max(distance2Points(e,o),distance2Points(a,s)),g=Math.max(distance2Points(e,a),distance2Points(o,s)),b=0,_=0,$=Math.ceil(h/2),j=Math.ceil(c/2),_e=d/g,et=[e[0],e[1],1],nt=[o[0],o[1],1],it=[a[0],a[1],1],lt=[s[0],s[1],1],tt=dotVect(crossVect(et,lt),it)/dotVect(crossVect(nt,lt),it),st=dotVect(crossVect(et,lt),nt)/dotVect(crossVect(it,lt),nt),rt=[tt*nt[0]-et[0],tt*nt[1]-et[1],tt*nt[2]-et[2]],ot=[st*it[0]-et[0],st*it[1]-et[1],st*it[2]-et[2]],ut=rt[0],gt=rt[1],pt=rt[2],ht=ot[0],ct=ot[1],at=ot[2],ft=1/(pt*at)*(ut*ht-(ut*at+pt*ht)*$+pt*at*$*$+(gt*ct-(gt*at+pt*ct)*j+pt*at*j*j));ft>=0?ft=Math.sqrt(ft):ft=Math.sqrt(-ft);let mt=new Matrix$2([[ft,0,$],[0,ft,j],[0,0,1]]),xt=mt.transpose(),bt=inverse(xt),Et=inverse(mt),Bt=Matrix$2.rowVector(rt),Nt=Matrix$2.rowVector(ot),vt=Math.sqrt(dotVect(Bt.mmul(bt).mmul(Et).to1DArray(),rt)/dotVect(Nt.mmul(bt).mmul(Et).to1DArray(),ot));return vt===0||_e===0?(b=Math.ceil(d),_=Math.ceil(g)):vt<_e?(b=Math.ceil(d),_=Math.ceil(b/vt)):(_=Math.ceil(g),b=Math.ceil(vt*_)),[b,_]}function projectionPoint(e,o,s,a,h,c,d,g,b,_,$,j){let[_e,et]=[(s*e+a*o+h)/(b*e+_*o+1),(c*e+d*o+g)/(b*e+_*o+1)];return $.getValueXY(Math.floor(_e),Math.floor(et),j)}function warpingFourPoints(e,o={}){let{calculateRatio:s=!0}=o;if(e.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${e.length} elements`);let[a,h,c,d]=e,g=[a,h,c,d],[b,_,$,j]=order4Points(g),_e,et;s?[_e,et]=computeWidthAndHeigth(b,_,$,j,this.width,this.height):(_e=Math.ceil(Math.max(distance2Points(b,_),distance2Points(j,$))),et=Math.ceil(Math.max(distance2Points(b,j),distance2Points(_,$))));let nt=Image.createFrom(this,{width:_e,height:et}),[it,lt]=b,[tt,st]=_,[rt,ot]=$,[ut,gt]=j,[pt,ht]=[0,0],[ct,at]=[0,_e-1],[ft,mt]=[et-1,_e-1],[xt,bt]=[et-1,0],Et=new Matrix$2([[pt,ht,1,0,0,0,-pt*it,-ht*it],[ct,at,1,0,0,0,-ct*tt,-at*tt],[ft,mt,1,0,0,0,-ft*rt,-ht*rt],[xt,bt,1,0,0,0,-xt*ut,-bt*ut],[0,0,0,pt,ht,1,-pt*lt,-ht*lt],[0,0,0,ct,at,1,-ct*st,-at*st],[0,0,0,ft,mt,1,-ft*ot,-mt*ot],[0,0,0,xt,bt,1,-xt*gt,-bt*gt]]),Bt=Matrix$2.columnVector([it,tt,rt,ut,lt,st,ot,gt]),vt=new SingularValueDecomposition(Et).solve(Bt),[St,kt,$t,Pt,It,Dt,At,Rt]=vt.to1DArray(),Ot=new Matrix$2(et,_e);for(let en=0;en<this.channels;en++){for(let Gt=0;Gt<et;Gt++)for(let Qt=0;Qt<_e;Qt++)Ot.set(Gt,Qt,projectionPoint(Gt,Qt,St,kt,$t,Pt,It,Dt,At,Rt,this,en));nt.setMatrix(Ot,{channel:en})}return nt}function crop(e={}){let{x:o=0,y:s=0,width:a=this.width-o,height:h=this.height-s}=e;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),o=Math.round(o),s=Math.round(s),a=Math.round(a),h=Math.round(h),o>this.width-1||s>this.height-1)throw new RangeError(`crop: origin (x:${o}, y:${s}) out of range (${this.width-1}; ${this.height-1})`);if(a<=0||h<=0)throw new RangeError(`crop: width and height (width:${a}; height:${h}) must be positive numbers`);if(o<0||s<0)throw new RangeError(`crop: x and y (x:${o}, y:${s}) must be positive numbers`);if(a>this.width-o||h>this.height-s)throw new RangeError(`crop: (x: ${o}, y:${s}, width:${a}, height:${h}) size is out of range`);let c=this;if(this.bitDepth===1){const d=new Image(a,h,{kind:"BINARY",parent:this});c=cropBinary(this,d,o,s,a,h)}else{const d=Image.createFrom(this,{width:a,height:h,position:[o,s]});c=cropDefault(this,d,o,s,a,h)}return c}function cropDefault(e,o,s,a,h,c){let d=h*e.channels,g=a+c,b=0,_=s*e.channels;for(let $=a;$<g;$++){let j=$*e.width*e.channels+_,_e=j+d;for(;j<_e;j++)o.data[b++]=e.data[j]}return o}function cropBinary(e,o,s,a,h,c){let d=h*e.channels,g=a+c,b=0,_=s*e.channels;for(let $=a;$<g;$++){let j=$*e.width*e.channels+_,_e=j+d;for(;j<_e;j++)e.getBit(j)&&o.setBit(b),++b}return o}function cropAlpha(e={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:o=this.maxValue}=e;let s=findLeft(this,o,this.components);if(s===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let a=findTop(this,o,this.components,s),h=findBottom(this,o,this.components,s),c=findRight(this,o,this.components,s,a,h);return this.crop({x:s,y:a,width:c-s+1,height:h-a+1})}function findLeft(e,o,s){for(let a=0;a<e.width;a++)for(let h=0;h<e.height;h++)if(e.getValueXY(a,h,s)>=o)return a;return-1}function findTop(e,o,s,a){for(let h=0;h<e.height;h++)for(let c=a;c<e.width;c++)if(e.getValueXY(c,h,s)>=o)return h;return-1}function findBottom(e,o,s,a){for(let h=e.height-1;h>=0;h--)for(let c=a;c<e.width;c++)if(e.getValueXY(c,h,s)>=o)return h;return-1}function findRight(e,o,s,a,h,c){for(let d=e.width-1;d>=a;d--)for(let g=h;g<=c;g++)if(e.getValueXY(d,g,s)>=o)return d;return-1}function getFactor(e){if(typeof e=="string"){const o=e[e.length-1];e=parseFloat(e),o==="%"&&(e/=100)}return e}function getThreshold$1(e,o){if(!o)throw Error("getThreshold : the maxValue should be specified");if(typeof e=="string"){if(e[e.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(e)/100*o}else{if(typeof e=="number")return e<1?e*o:e;throw Error("getThreshold : the value is not valid")}}function factorDimensions(e,o,s){e=getFactor(e);let a=Math.round(e*o),h=Math.round(e*s);return a<=0&&(a=1),h<=0&&(h=1),{width:a,height:h}}function checkRow(e,o){if(o<0||o>=e.height)throw new RangeError(`row must be included between 0 and ${e.height-1}. Current value: ${o}`)}function checkColumn(e,o){if(o<0||o>=e.width)throw new RangeError(`column must be included between 0 and ${e.width-1}. Current value: ${o}`)}function checkChannel(e,o){if(o<0||o>=e.channels)throw new RangeError(`channel must be included between 0 and ${e.channels-1}. Current value: ${o}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(e){if(typeof e!="string")throw new TypeError("interpolation must be a string");if(e=e.toLowerCase(),!validInterpolations[e])throw new RangeError(`invalid interpolation algorithm: ${e}`);return validInterpolations[e]}function nearestNeighbor(e,o,s){const a=this.width/o,h=this.height/s;if(this.bitDepth>1)for(let c=0;c<o;c++){const d=Math.floor((c+.5)*a);for(let g=0;g<s;g++){const b=Math.floor((g+.5)*h);for(let _=0;_<this.channels;_++)e.setValueXY(c,g,_,this.getValueXY(d,b,_))}}else for(let c=0;c<o;c++){const d=Math.floor((c+.5)*a);for(let g=0;g<s;g++){const b=Math.floor((g+.5)*h);this.getBitXY(d,b)&&e.setBitXY(c,g)}}}function resize(e={}){const{factor:o=1,interpolation:s=validInterpolations.nearestneighbor,preserveAspectRatio:a=!0}=e,h=checkInterpolation(s);let c=e.width,d=e.height;if(c||(d&&a?c=Math.round(d*(this.width/this.height)):c=this.width),d||(a?d=Math.round(c*(this.height/this.width)):d=this.height),{width:c,height:d}=factorDimensions(o,c,d),c===this.width&&d===this.height){const $=this.clone();return $.position=[0,0],$}let g=Math.round((this.width-c)/2),b=Math.round((this.height-d)/2);const _=Image.createFrom(this,{width:c,height:d,position:[g,b]});switch(h){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,_,c,d);break;default:throw new Error(`unsupported resize interpolation: ${h}`)}return _}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let e=Image.createFrom(this,{colorModel:HSV}),o=0,s=this.data;for(let a=0;a<s.length;a+=this.channels){let h=s[a],c=s[a+1],d=s[a+2],g=Math.min(h,c,d),b=Math.max(h,c,d),_=b-g,$=0,j=b===0?0:_/b,_e=b;if(b!==g){switch(b){case h:$=(c-d)/_+(c<d?6:0);break;case c:$=(d-h)/_+2;break;case d:$=(h-c)/_+4;break;default:throw new Error("unreachable")}$/=6}e.data[o++]=$*this.maxValue,e.data[o++]=j*this.maxValue,e.data[o++]=_e,this.alpha&&(e.data[o++]=s[a+3])}return e}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let e=Image.createFrom(this,{colorModel:HSL}),o=Math.floor(this.maxValue/2),s=0,a=this.data;for(let h=0;h<a.length;h+=this.channels){let c=a[h],d=a[h+1],g=a[h+2],b=Math.max(c,d,g),_=Math.min(c,d,g),$=0,j=0,_e=(b+_)/2;if(b!==_){let et=b-_;switch(j=_e>o?et/(2-b-_):et/(b+_),b){case c:$=(d-g)/et+(d<g?6:0);break;case d:$=(g-c)/et+2;break;case g:$=(c-d)/et+4;break;default:throw new Error("unreachable")}$/=6}e.data[s++]=$*this.maxValue,e.data[s++]=j*this.maxValue,e.data[s++]=_e,this.alpha&&(e.data[s++]=a[h+3])}return e}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let e=Image.createFrom(this,{components:4,colorModel:CMYK$1}),o=0,s=this.data;for(let a=0;a<s.length;a+=this.channels){let h=s[a],c=s[a+1],d=s[a+2],g=Math.min(this.maxValue-h,this.maxValue-c,this.maxValue-d),b=(this.maxValue-h-g)/(1-g/this.maxValue),_=(this.maxValue-c-g)/(1-g/this.maxValue),$=(this.maxValue-d-g)/(1-g/this.maxValue);e.data[o++]=Math.round(b),e.data[o++]=Math.round(_),e.data[o++]=Math.round($),e.data[o++]=Math.round(g),this.alpha&&(e.data[o++]=s[a+3])}return e}function rgba8(){return new Image(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(e,o,s){return e*6966+o*23436+s*2366>>15},luma601(e,o,s){return e*9798+o*19235+s*3735>>15},maximum(e,o,s){return Math.max(e,o,s)},minimum(e,o,s){return Math.min(e,o,s)},average(e,o,s){return(e+o+s)/3>>0},minmax(e,o,s){return(Math.max(e,o,s)+Math.min(e,o,s))/2},red(e){return e},green(e,o){return o},blue(e,o,s){return s},cyan(e,o,s,a){let h=methods$1.black(e,o,s,a);return(a.maxValue-e-h)/(1-h/a.maxValue)>>0},magenta(e,o,s,a){let h=methods$1.black(e,o,s,a);return(a.maxValue-o-h)/(1-h/a.maxValue)>>0},yellow(e,o,s,a){let h=methods$1.black(e,o,s,a);return(a.maxValue-s-h)/(1-h/a.maxValue)>>0},black(e,o,s,a){return Math.min(a.maxValue-e,a.maxValue-o,a.maxValue-s)},hue(e,o,s,a){let h=methods$1.min(e,o,s),c=methods$1.max(e,o,s);if(c===h)return 0;let d=0,g=c-h;switch(c){case e:d=(o-s)/g+(o<s?6:0);break;case o:d=(s-e)/g+2;break;case s:d=(e-o)/g+4;break;default:throw new Error("unreachable")}return d/6*a.maxValue>>0},saturation(e,o,s,a){let h=methods$1.min(e,o,s),c=methods$1.max(e,o,s),d=c-h;return c===0?0:d/c*a.maxValue},lightness(e,o,s){let a=methods$1.min(e,o,s);return(methods$1.max(e,o,s)+a)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(e=>{});function grey(e={}){let{algorithm:o="luma709",keepAlpha:s=!1,mergeAlpha:a=!0}=e;if(typeof o!="string"&&typeof o!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(o="red"),s&=this.alpha,a&=this.alpha,s&&(a=!1);let h=getOutputImage(this,e,{components:1,alpha:s,colorModel:GREY$1}),c;if(typeof o=="function")c=o;else if(c=methods$1[o.toLowerCase()],!c)throw new Error(`unsupported grey algorithm: ${o}`);let d=0;for(let g=0;g<this.data.length;g+=this.channels)a?h.data[d++]=clamp(c(this.data[g],this.data[g+1],this.data[g+2],this)*this.data[g+this.components]/this.maxValue,this):(h.data[d++]=clamp(c(this.data[g],this.data[g+1],this.data[g+2],this),this),h.alpha&&(h.data[d++]=this.data[g+this.components]));return h}function huang(e){let o=0;for(let $=0;$<e.length;$++)if(e[$]!==0){o=$;break}let s=e.length-1;for(let $=e.length-1;$>=o;$--)if(e[$]!==0){s=$;break}let a=1/(s-o),h=new Array(e.length),c=0,d=0;for(let $=o;$<e.length;$++)c+=$*e[$],d+=e[$],h[$]=c/d;let g=new Array(e.length);c=d=0;for(let $=s;$>0;$--)c+=$*e[$],d+=e[$],g[$-1]=c/d;let b=-1,_=Number.MAX_VALUE;for(let $=0;$<e.length;$++){let j=0,_e;for(let et=0;et<=$;et++)_e=1/(1+a*Math.abs(et-h[$])),_e<1e-6||_e>.999999||(j+=e[et]*(-_e*Math.log(_e)-(1-_e)*Math.log(1-_e)));for(let et=$+1;et<e.length;et++)_e=1/(1+a*Math.abs(et-g[$])),_e<1e-6||_e>.999999||(j+=e[et]*(-_e*Math.log(_e)-(1-_e)*Math.log(1-_e)));j<_&&(_=j,b=$)}return b}function intermodes(e){let o=e.slice(),s=0;for(;!bimodalTest$1(o);){let h=0,c=0,d=o[0];for(let g=0;g<e.length-1;g++)h=c,c=d,d=o[g+1],o[g]=(h+c+d)/3;if(o[e.length-1]=(c+d)/3,s++,s>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let a=0;for(let h=1;h<e.length-1;h++)o[h-1]<o[h]&&o[h+1]<o[h]&&(a+=h);return Math.floor(a/2)}function bimodalTest$1(e){let o=!1,s=0;for(let a=1;a<e.length-1;a++)if(e[a-1]<e[a]&&e[a+1]<e[a]&&(s++,s>2))return!1;return s===2&&(o=!0),o}function isodata(e){let o,s,a,h,c=0;for(let d=1;d<e.length;d++)if(e[d]>0){c=d+1;break}for(;;){o=0,a=0;for(let d=0;d<c;d++)a=a+e[d],o=o+e[d]*d;h=0,s=0;for(let d=c+1;d<e.length;d++)s+=e[d],h+=e[d]*d;if(a>0&&s>0&&(o/=a,h/=s,c===Math.round((o+h)/2)))break;if(c++,c>e.length-2)throw new Error("Threshold not found")}return c}function li(e,o){let s,a,h,c,d,g,b,_,$,j,_e,et;_e=.5,j=0;for(let nt=0;nt<e.length;nt++)j+=nt*e[nt];j/=o,b=j;do{g=b,s=g+.5|0,a=0,c=0;for(let nt=0;nt<=s;nt++)a+=nt*e[nt],c+=e[nt];_=c===0?0:a/c,h=0,d=0;for(let nt=s+1;nt<e.length;nt++)h+=nt*e[nt],d+=e[nt];$=d===0?0:h/d,et=(_-$)/(Math.log(_)-Math.log($)),et<-Number.EPSILON?b=et-.5|0:b=et+.5|0}while(Math.abs(b-g)>_e);return s}function maxEntropy(e,o){let s=new Array(e.length);for(let _e=0;_e<e.length;_e++)s[_e]=e[_e]/o;let a=new Array(e.length),h=new Array(e.length);a[0]=s[0],h[0]=1-a[0];for(let _e=1;_e<e.length;_e++)a[_e]=a[_e-1]+s[_e],h[_e]=1-a[_e];let c=0;for(let _e=0;_e<e.length;_e++)if(Math.abs(a[_e])>=Number.EPSILON){c=_e;break}let d=e.length-1;for(let _e=e.length-1;_e>=c;_e--)if(Math.abs(h[_e])>=Number.EPSILON){d=_e;break}let g=-1,b,_=Number.MIN_VALUE,$,j;for(let _e=c;_e<=d;_e++){$=0;for(let et=0;et<=_e;et++)e[et]!==0&&($-=s[et]/a[_e]*Math.log(s[et]/a[_e]));j=0;for(let et=_e+1;et<e.length;et++)e[et]!==0&&(j-=s[et]/h[_e]*Math.log(s[et]/h[_e]));b=$+j,_<b&&(_=b,g=_e)}return g}function mean$1(e,o){let s=0;for(let a=0;a<e.length;a++)s+=a*e[a];return Math.floor(s/o)}function minError(e,o){let s,a=-2,h,c,d,g,b,_,$,j,_e,et,nt,it=0;for(let lt=0;lt<e.length;lt++)it+=lt*e[lt];for(it/=o,s=it;s!==a;){let lt=sumA(e,s),tt=sumA(e,e.length-1),st=sumB(e,s),rt=sumB(e,e.length-1),ot=sumC(e,s),ut=sumC(e,e.length-1);if(h=st/lt,c=(rt-st)/(tt-lt),d=lt/tt,g=(tt-lt)/tt,b=ot/lt-h*h,_=(ut-ot)/(tt-lt)-c*c,$=1/b-1/_,j=h/b-c/_,_e=h*h/b-c*c/_+Math.log10(b*(g*g)/(_*(d*d))),et=j*j-$*_e,et<0)return s;a=s,nt=(j+Math.sqrt(et))/$,isNaN(nt)?s=a:s=Math.floor(nt)}return s}function sumA(e,o){let s=0;for(let a=0;a<=o;a++)s+=e[a];return s}function sumB(e,o){let s=0;for(let a=0;a<=o;a++)s+=a*e[a];return s}function sumC(e,o){let s=0;for(let a=0;a<=o;a++)s+=a*a*e[a];return s}function minimum(e){if(e.length<2)return 0;let o=0,s=-1,a=-1,h=new Array(e.length);for(let c=0;c<e.length;c++)h[c]=e[c],e[c]>0&&(a=c);for(;!bimodalTest(h);)if(h=smoothed(h),o++,o>1e4)return s;return s=minimumBetweenPeeks(h,a),s}function smoothed(e){let o=new Array(e.length);for(let s=1;s<e.length-1;s++)o[s]=(e[s-1]+e[s]+e[s+1])/3;return o[0]=(e[0]+e[1])/3,o[e.length-1]=(e[e.length-2]+e[e.length-1])/3,o}function minimumBetweenPeeks(e,o){let s;for(let a=1;a<o;a++)if(e[a-1]>e[a]&&e[a+1]>=e[a]){s=a;break}return s}function bimodalTest(e){let o=e.length,s=!1,a=0;for(let h=1;h<o-1;h++)if(e[h-1]<e[h]&&e[h+1]<e[h]&&(a++,a>2))return!1;return a===2&&(s=!0),s}function moments(e,o){let s=1,a=0,h=0,c=0,d=0,g,b,_,$,j,_e,et=-1,nt=e.length,it=new Array(nt);for(let lt=0;lt<nt;lt++)it[lt]=e[lt]/o;for(let lt=0;lt<nt;lt++)a+=lt*it[lt],h+=lt*lt*it[lt],c+=lt*lt*lt*it[lt];b=s*h-a*a,_=(-h*h+a*c)/b,$=(s*-c+h*a)/b,j=.5*(-$-Math.sqrt($*$-4*_)),_e=.5*(-$+Math.sqrt($*$-4*_)),g=(_e-a)/(_e-j);for(let lt=0;lt<nt;lt++)if(d+=it[lt],d>g){et=lt;break}return et}function otsu(e,o){let s=0,a=0,h=0,c=0,d=0;for(let g=0;g<e.length;g++)d+=g*e[g];for(let g=0;g<e.length;g++){a=a+e[g];const b=o-a;if(a===0||b===0)continue;s=s+g*e[g];const _=(d-s)/b,$=a*b*(s/a-_)*(s/a-_);$>=h&&(c=g,h=$)}return c}function percentile(e){let o=-1,s=.5,a=new Array(e.length),h=partialSum(e,e.length-1),c=1;for(let d=0;d<e.length;d++)a[d]=Math.abs(partialSum(e,d)/h-s),a[d]<c&&(c=a[d],o=d);return o}function partialSum(e,o){let s=0;for(let a=0;a<=o;a++)s+=e[a];return s}function renyiEntropy(e,o){let s,a,h,c=new Array(e.length),d=new Array(e.length),g=new Array(e.length),b=0,_=0,$=0,j=0,_e=0,et=0,it=1/(1-.5),tt=1/(1-2);for(let ut=0;ut<e.length;ut++)c[ut]=e[ut]/o;d[0]=c[0],g[0]=1-d[0];for(let ut=1;ut<e.length;ut++)d[ut]=d[ut-1]+c[ut],g[ut]=1-d[ut];a=0;for(let ut=0;ut<e.length;ut++)if(Math.abs(d[ut])>=Number.EPSILON){a=ut;break}h=e.length-1;for(let ut=e.length-1;ut>=a;ut--)if(Math.abs(g[ut])>=Number.EPSILON){h=ut;break}for(let ut=a;ut<=h;ut++){let gt=0,pt=0,ht=0;for(let Et=0;Et<=ut;Et++)e[Et]!==0&&(gt-=c[Et]/d[ut]*Math.log(c[Et]/d[ut])),pt+=Math.sqrt(c[Et]/d[ut]),ht+=c[Et]*c[Et]/(d[ut]*d[ut]);let ct=0,at=0,ft=0;for(let Et=ut+1;Et<e.length;Et++)e[Et]!==0&&(ct-=c[Et]/g[ut]*Math.log(c[Et]/g[ut])),at+=Math.sqrt(c[Et]/g[ut]),ft+=c[Et]*c[Et]/(g[ut]*g[ut]);let mt=gt+ct,xt=it*(pt*at>0?Math.log(pt*at):0),bt=tt*(ht*ft>0?Math.log(ht*ft):0);mt>j&&(j=mt,b=ut),xt>_e&&(_e=xt,_=ut),bt>et&&(et=bt,$=ut)}let st=[b,_,$];st.sort((ut,gt)=>ut-gt);let rt;Math.abs(st[0]-st[1])<=5?Math.abs(st[1]-st[2])<=5?rt=[1,2,1]:rt=[0,1,3]:Math.abs(st[1]-st[2])<=5?rt=[3,1,0]:rt=[1,2,1];let ot=d[st[2]]-d[st[0]];return s=Math.round(st[0]*(d[st[0]]+.25*ot*rt[0])+.25*st[1]*ot*rt[1]+st[2]*(g[st[2]]+.25*ot*rt[2])),s}function shanbhag(e,o){let s=new Array(e.length);for(let et=0;et<e.length;et++)s[et]=e[et]/o;let a=new Array(e.length),h=new Array(e.length);a[0]=s[0],h[0]=1-a[0];for(let et=1;et<e.length;et++)a[et]=a[et-1]+s[et],h[et]=1-a[et];let c=0;for(let et=0;et<e.length;et++)if(Math.abs(a[et])>=Number.EPSILON){c=et;break}let d=e.length-1;for(let et=e.length-1;et>=c;et--)if(Math.abs(h[et])>=Number.EPSILON){d=et;break}let g=-1,b=Number.MAX_VALUE,_,$,j,_e;for(let et=c;et<=d;et++){j=0,_=.5/a[et];for(let nt=1;nt<=et;nt++)j-=s[nt]*Math.log(1-_*a[nt-1]);j*=_,_e=0,_=.5/h[et];for(let nt=et+1;nt<e.length;nt++)_e-=s[nt]*Math.log(1-_*h[nt]);_e*=_,$=Math.abs(j-_e),$<b&&(b=$,g=et)}return g}function triangle$1(e){let o=0,s=0,a=0,h=0;for(let j=0;j<e.length;j++)if(e[j]>0){o=j;break}o>0&&o--;for(let j=e.length-1;j>0;j--)if(e[j]>0){h=j;break}h<e.length-1&&h++;for(let j=0;j<e.length;j++)e[j]>s&&(a=j,s=e[j]);let c=!1;if(a-o<h-a){c=!0;let j=0,_e=e.length-1;for(;j<_e;){let et=e[j];e[j]=e[_e],e[_e]=et,j++,_e--}o=e.length-1-h,a=e.length-1-a}if(o===a)return o;let d,g,b;d=e[a],g=o-a,b=Math.sqrt(d*d+g*g),d/=b,g/=b,b=d*o+g*e[o];let _=o,$=0;for(let j=o+1;j<=a;j++){let _e=d*j+g*e[j]-b;_e>$&&(_=j,$=_e)}if(_--,c){let j=0,_e=e.length-1;for(;j<_e;){let et=e[j];e[j]=e[_e],e[_e]=et,j++,_e--}return e.length-1-_}else return _}function yen(e,o){let s=new Array(e.length);for(let _=0;_<e.length;_++)s[_]=e[_]/o;let a=new Array(e.length);a[0]=s[0];for(let _=1;_<e.length;_++)a[_]=a[_-1]+s[_];let h=new Array(e.length);h[0]=s[0]*s[0];for(let _=1;_<e.length;_++)h[_]=h[_-1]+s[_]*s[_];let c=new Array(e.length);c[e.length-1]=0;for(let _=e.length-2;_>=0;_--)c[_]=c[_+1]+s[_+1]*s[_+1];let d=-1,g=Number.MIN_VALUE,b;for(let _=0;_<e.length;_++)b=-1*(h[_]*c[_]>0?Math.log(h[_]*c[_]):0)+2*(a[_]*(1-a[_])>0?Math.log(a[_]*(1-a[_])):0),b>g&&(g=b,d=_);return d}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(e=>{names[e]=e});function getThreshold(e={}){let{algorithm:o=names.otsu}=e;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let s=methods[o.toLowerCase()];if(s){let a=this.getHistogram();return s(a,this.size)}else throw new Error(`unknown thresholding algorithm: ${o}`)}const THRESHOLD="threshold";function mask(e={}){let{algorithm:o=THRESHOLD,threshold:s=.5,useAlpha:a=!0,invert:h=!1}=e;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),o===THRESHOLD?s=getThreshold$1(s,this.maxValue):s=getThreshold.call(this,e);let c=new Image(this.width,this.height,{kind:"BINARY",parent:this}),d=0;if(this.alpha&&a)for(let g=0;g<this.data.length;g+=this.channels){let b=this.data[g]+(this.maxValue-this.data[g])*(this.maxValue-this.data[g+1])/this.maxValue;(h&&b<=s||!h&&b>=s)&&c.setBit(d),d++}else for(let g=0;g<this.data.length;g+=this.channels)(h&&this.data[g]<=s||!h&&this.data[g]>=s)&&c.setBit(d),d++;return c}function copyImage(e,o,s,a){let h=e.width,c=e.height,d=o.width,g=e.channels;for(let b=0;b<h;b++)for(let _=0;_<c;_++)for(let $=0;$<g;$++){let j=(_*h+b)*g+$,_e=((a+_)*d+s+b)*g+$;o.data[_e]=e.data[j]}}function pad(e={}){let{size:o=0,algorithm:s="copy",color:a}=e;if(this.checkProcessable("pad",{bitDepth:[8,16]}),s==="set"){if(a.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let b=0;b<a.length;b++)a[b]===0&&(a[b]=.001)}else a=newArray$1(this.channels,null);Array.isArray(o)||(o=[o,o]);let h=this.width+o[0]*2,c=this.height+o[1]*2,d=this.channels,g=Image.createFrom(this,{width:h,height:c});copyImage(this,g,o[0],o[1]);for(let b=o[0];b<h-o[0];b++)for(let _=0;_<d;_++){let $=a[_]||g.data[(o[1]*h+b)*d+_];for(let j=0;j<o[1];j++)g.data[(j*h+b)*d+_]=$;$=a[_]||g.data[((c-o[1]-1)*h+b)*d+_];for(let j=c-o[1];j<c;j++)g.data[(j*h+b)*d+_]=$}for(let b=0;b<c;b++)for(let _=0;_<d;_++){let $=a[_]||g.data[(b*h+o[0])*d+_];for(let j=0;j<o[0];j++)g.data[(b*h+j)*d+_]=$;$=a[_]||g.data[(b*h+h-o[0]-1)*d+_];for(let j=h-o[0];j<h;j++)g.data[(b*h+j)*d+_]=$}return g}function colorDepth(e=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(e))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===e)return this.clone();let o=Image.createFrom(this,{bitDepth:e});switch(e){case 8:if(this.bitDepth===1)for(let s=0;s<this.size;s++)this.getBit(s)&&(o.data[s]=255);else for(let s=0;s<this.data.length;s++)o.data[s]=this.data[s]>>8;break;case 16:if(this.bitDepth===1)for(let s=0;s<this.size;s++)this.getBit(s)&&(o.data[s]=65535);else for(let s=0;s<this.data.length;s++)o.data[s]=this.data[s]<<8|this.data[s];break;default:throw new Error("colorDepth conversion unexpected case")}return o}function rotateFree(e,o={}){const{interpolation:s=validInterpolations.nearestneighbor,width:a=this.width,height:h=this.height}=o;if(typeof e!="number")throw new TypeError("degrees must be a number");const c=checkInterpolation(s),d=e*Math.PI/180,g=Math.floor(Math.abs(a*Math.cos(d))+Math.abs(h*Math.sin(d))),b=Math.floor(Math.abs(h*Math.cos(d))+Math.abs(a*Math.sin(d))),_=Math.cos(-d),$=Math.sin(-d);let j=g/2,_e=b/2;g%2===0?(j=j-.5,b%2===0?_e=_e-.5:_e=Math.floor(_e)):(j=Math.floor(j),b%2===0?_e=_e-.5:_e=Math.floor(_e));const et=Math.floor(a/2-j),nt=Math.floor(h/2-_e);if(this.bitDepth===1){const it=new Image(g,b,{kind:"BINARY",parent:this});switch(c){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,it,et,nt,j,_e,_,$);case validInterpolations.bilinear:return rotateBinaryBilinear(this,it,et,nt,j,_e,_,$);default:throw new Error(`unsupported rotate interpolation: ${c}`)}}else{const it=Image.createFrom(this,{width:g,height:b});switch(c){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,it,et,nt,j,_e,_,$);case validInterpolations.bilinear:return rotateBilinear(this,it,et,nt,j,_e,_,$);default:throw new Error(`unsupported rotate interpolation: ${c}`)}}}function rotateNearestNeighbor(e,o,s,a,h,c,d,g){for(let b=0;b<o.width;b+=1)for(let _=0;_<o.height;_+=1)for(let $=0;$<e.channels;$++){let j=Math.round((b-h)*d-(_-c)*g+h)+s,_e=Math.round((_-c)*d+(b-h)*g+c)+a;j<0||j>=e.width||_e<0||_e>=e.height?e.alpha===1&&$===e.channels-1?o.setValueXY(b,_,$,0):o.setValueXY(b,_,$,e.maxValue):o.setValueXY(b,_,$,e.getValueXY(j,_e,$))}return o}function rotateBinaryNearestNeighbor(e,o,s,a,h,c,d,g){for(let b=0;b<o.width;b+=1)for(let _=0;_<o.height;_+=1){let $=Math.round((b-h)*d-(_-c)*g+h)+s,j=Math.round((_-c)*d+(b-h)*g+c)+a;($<0||$>=e.width||j<0||j>=e.height||e.getBitXY($,j))&&o.setBitXY(b,_)}return o}function rotateBilinear(e,o,s,a,h,c,d,g){let b=e.width*e.channels;for(let _=0;_<o.height;_++)for(let $=0;$<o.width;$++){let j=($-h)*d-(_-c)*g+h+s,_e=(_-c)*d+($-h)*g+c+a,et=j|0,nt=_e|0,it=j-et,lt=_e-nt;for(let tt=0;tt<e.channels;tt++)if(j<0||j>=e.width||_e<0||_e>=e.height)e.alpha===1&&tt===e.channels-1?o.setValueXY($,_,tt,0):o.setValueXY($,_,tt,e.maxValue);else{let st=(nt*e.width+et)*e.channels+tt,rt=e.data[st],ot=e.data[st+e.channels],ut=e.data[st+b],gt=e.data[st+b+e.channels],pt=rt+it*(ot-rt)+lt*(ut-rt)+it*lt*(rt-ot-ut+gt)|0;o.setValueXY($,_,tt,pt)}}return o}function rotateBinaryBilinear(e,o,s,a,h,c,d,g){let b=e.width;for(let _=0;_<o.height;_++)for(let $=0;$<o.width;$++){let j=($-h)*d-(_-c)*g+h+s,_e=(_-c)*d+($-h)*g+c+a,et=j|0,nt=_e|0,it=j-et,lt=_e-nt;if(j<0||j>=e.width||_e<0||_e>=e.height)o.setBitXY($,_);else{let tt=nt*e.width+et,st=e.getBit(tt),rt=e.getBit(tt+1),ot=e.getBit(tt+b),ut=e.getBit(tt+1+b);(st|it&rt-st|lt&ot-st|it&lt&st-rt-ot+ut)>0&&o.setBitXY($,_)}}return o}function rotate$1(e,o){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof e!="number")throw new TypeError("angle must be a number");switch(e<0&&(e=Math.ceil(-e/360)*360+e),e%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,e,o)}}function rotateLeft(){if(this.bitDepth===1){const e=new Image(this.height,this.width,{kind:"BINARY",parent:this}),o=e.height-1;for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++)this.getBitXY(a,s)&&e.setBitXY(s,o-a);return e}else{const e=Image.createFrom(this,{width:this.height,height:this.width}),o=e.height-1;for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++)for(let h=0;h<this.channels;h++)e.setValueXY(s,o-a,h,this.getValueXY(a,s,h));return e}}function rotateRight(){if(this.bitDepth===1){const e=new Image(this.height,this.width,{kind:"BINARY",parent:this}),o=e.width-1;for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++)this.getBitXY(a,s)&&e.setBitXY(o-s,a);return e}else{const e=Image.createFrom(this,{width:this.height,height:this.width}),o=e.width-1;for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++)for(let h=0;h<this.channels;h++)e.setValueXY(o-s,a,h,this.getValueXY(a,s,h));return e}}function rotate180(){if(this.bitDepth===1){const e=new Image(this.width,this.height,{kind:"BINARY",parent:this}),o=e.width-1,s=e.height-1;for(let a=0;a<this.height;a++)for(let h=0;h<this.width;h++)this.getBitXY(h,a)&&e.setBitXY(o-h,s-a);return e}else{const e=Image.createFrom(this),o=e.width-1,s=e.height-1;for(let a=0;a<this.height;a++)for(let h=0;h<this.width;h++)for(let c=0;c<this.channels;c++)e.setValueXY(o-h,s-a,c,this.getValueXY(h,a,c));return e}}function insert(e,o={}){const s=getImageParameters(e);this.checkProcessable("insert",s);let{x:a=0,y:h=0}=o;const c=getOutputImageOrInPlace(this,o,{copy:!0}),d=Math.min(c.height,h+e.height),g=Math.min(c.width,a+e.width);if(c.bitDepth===1)for(let b=h;b<d;b++)for(let _=a;_<g;_++)e.getBitXY(_-a,b-h)?c.setBitXY(_,b):c.clearBitXY(_,b);else for(let b=h;b<d;b++)for(let _=a;_<g;_++)c.setPixelXY(_,b,e.getPixelXY(_-a,b-h));return c}function setBorder(e={}){let{size:o=0,algorithm:s="copy",color:a}=e;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),s==="set"){if(a.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let g=0;g<a.length;g++)a[g]===0&&(a[g]=.001)}else a=newArray$1(this.channels,null);Array.isArray(o)||(o=[o,o]);let h=o[0],c=o[1],d=this.channels;for(let g=h;g<this.width-h;g++)for(let b=0;b<d;b++){let _=a[b]||this.data[(g+this.width*c)*d+b];for(let $=0;$<c;$++)this.data[($*this.width+g)*d+b]=_;_=a[b]||this.data[(g+this.width*(this.height-c-1))*d+b];for(let $=this.height-c;$<this.height;$++)this.data[($*this.width+g)*d+b]=_}for(let g=0;g<this.height;g++)for(let b=0;b<d;b++){let _=a[b]||this.data[(g*this.width+h)*d+b];for(let $=0;$<h;$++)this.data[(g*this.width+$)*d+b]=_;_=a[b]||this.data[(g*this.width+this.width-h-1)*d+b];for(let $=this.width-h;$<this.width;$++)this.data[(g*this.width+$)*d+b]=_}return this}function split(e={}){let{preserveAlpha:o=!0}=e;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let s=new Stack,a=this.data;if(this.alpha&&o)for(let h=0;h<this.components;h++){let c=Image.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),d=0;for(let g=0;g<a.length;g+=this.channels)c.data[d++]=a[g+h],c.data[d++]=a[g+this.components];s.push(c)}else for(let h=0;h<this.channels;h++){let c=Image.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),d=0;for(let g=0;g<a.length;g+=this.channels)c.data[d++]=a[g+h];s.push(c)}return s}function getChannel(e,o={}){let{keepAlpha:s=!1,mergeAlpha:a=!1}=o;s&=this.alpha,a&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),e=validateChannel(this,e);let h=Image.createFrom(this,{components:1,alpha:s,colorModel:GREY$1}),c=0;for(let d=0;d<this.data.length;d+=this.channels)a?h.data[c++]=this.data[d+e]*this.data[d+this.components]/this.maxValue:(h.data[c++]=this.data[d+e],s&&(h.data[c++]=this.data[d+this.components]));return h}function combineChannels(e=defaultCombineMethod,o={}){let{mergeAlpha:s=!1,keepAlpha:a=!1}=o;s&=this.alpha,a&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let h=Image.createFrom(this,{components:1,alpha:a,colorModel:GREY$1}),c=0;for(let d=0;d<this.size;d++){let g=e(this.getPixel(d));s?h.data[c++]=g*this.data[d*this.channels+this.components]/this.maxValue:(h.data[c++]=g,a&&(h.data[c++]=this.data[d*this.channels+this.components]))}return h}function defaultCombineMethod(e){return(e[0]+e[1]+e[2])/3}function setChannel(e,o){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),o.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),o.width!==this.width||o.height!==this.height)throw new Error("Images must have exactly the same width and height");e=validateChannel(this,e);let s=e;for(let a=0;a<o.data.length;a++)this.data[s]=o.data[a],s+=this.channels;return this}function getSimilarity(e,o={}){let{shift:s=[0,0],average:a,channels:h,defaultAlpha:c,normalize:d,border:g=[0,0]}=o;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(g)||(g=[g,g]),h=validateArrayOfChannels(this,{channels:h,defaultAlpha:c}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");typeof a>"u"&&(a=!0);let b=Math.max(g[0],-s[0]),_=Math.min(this.width-g[0],this.width-s[0]),$=Math.max(g[1],-s[1]),j=Math.min(this.height-g[1],this.height-s[1]),_e=newArray$1(h.length,0);for(let et=0;et<h.length;et++){let nt=h[et],it=d?this.sum[nt]:Math.max(this.sum[nt],e.sum[nt]),lt=d?e.sum[nt]:Math.max(this.sum[nt],e.sum[nt]);if(it!==0&&lt!==0)for(let tt=b;tt<_;tt++)for(let st=$;st<j;st++){let rt=tt*this.multiplierX+st*this.multiplierY+nt,ot=rt+s[0]*this.multiplierX+s[1]*this.multiplierY;_e[et]+=Math.min(this.data[rt]/it,e.data[ot]/lt)}}return a?_e.reduce((et,nt)=>et+nt)/_e.length:_e}function getPixelsGrid(e={}){let{sampling:o=[10,10],painted:s=!1,mask:a}=e;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(o)||(o=[o,o]);const h=o[0],c=o[1],d=[],g=[],b=this.width/h,_=this.height/c;let $=Math.floor(b/2);for(let _e=0;_e<h;_e++){let et=Math.floor(_/2);for(let nt=0;nt<c;nt++){let it=Math.round($),lt=Math.round(et);(!a||a.getBitXY(it,lt))&&(d.push([it,lt]),g.push(this.getPixelXY(it,lt))),et+=_}$+=b}const j={xyS:d,zS:g};return s&&(j.painted=this.rgba8().paintPoints(d)),j}function Matrix(e,o,s){const a=new Array(e);for(let h=0;h<e;h++)a[h]=new Array(o);if(s)for(let h=0;h<e;h++)for(let c=0;c<o;c++)a[h][c]=s;return a.width=e,a.height=o,Object.setPrototypeOf(a,Matrix.prototype),a}Matrix.prototype.localMin=function(e,o){let s=this[e][o],a=[e,o];for(let h=Math.max(0,e-1);h<Math.min(this.length,e+2);h++)for(let c=Math.max(0,o-1);c<Math.min(this[0].length,o+2);c++)this[h][c]<s&&(s=this[h][c],a=[h,c]);return{position:a,value:s}};Matrix.prototype.localMax=function(e,o){let s=this[e][o],a=[e,o];for(let h=Math.max(0,e-1);h<Math.min(this.length,e+2);h++)for(let c=Math.max(0,o-1);c<Math.min(this[0].length,o+2);c++)this[h][c]>s&&(s=this[h][c],a=[h,c]);return{position:a,value:s}};Matrix.prototype.localSearch=function(e,o,s){let a=[];for(let h=Math.max(0,e-1);h<Math.min(this.length,e+2);h++)for(let c=Math.max(0,o-1);c<Math.min(this[0].length,o+2);c++)this[h][c]===s&&a.push([h,c]);return a};function getBestMatch(e,o={}){let{border:s}=o;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");let a=new Matrix(e.width,e.height,-1/0),h=Math.floor(e.width/2),c=Math.floor(e.height/2),d=h,g=c,b=!1;for(;!b;){let _=a.localSearch(h,c,-1/0);for(let j=0;j<_.length;j++){let _e=_[j],et=this.getSimilarity(e,{border:s,shift:[d-_e[0],g-_e[1]]});a[_e[0]][_e[1]]=et}let $=a.localMax(h,c);$.position[0]!==h||$.position[1]!==c?(h=$.position[0],c=$.position[1]):b=!0}return[h-d,c-g]}function getRow(e,o=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,e),checkChannel(this,o);let s=new Array(this.width),a=0,h=e*this.width*this.channels+o,c=h+this.width*this.channels;for(let d=h;d<c;d+=this.channels)s[a++]=this.data[d];return s}function getColumn(e,o=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,e),checkChannel(this,o);let s=new Array(this.height),a=0,h=this.width*this.channels;for(let c=o+e*this.channels;c<this.data.length;c+=h)s[a++]=this.data[c];return s}function getMatrix(e={}){let{channel:o}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),o===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");o=0}let s=new Matrix$2(this.height,this.width);for(let a=0;a<this.height;a++)for(let h=0;h<this.width;h++)s.set(a,h,this.getValueXY(h,a,o));return s}function setMatrix(e,o={}){e=new Matrix$2(e);let{channel:s}=o;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),s===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");s=0}if(this.width!==e.columns||this.height!==e.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let a=0;a<this.height;a++)for(let h=0;h<this.width;h++)this.setValueXY(h,a,s,e.get(a,h));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let e=new Array(this.size),o=0;for(let s=0;s<this.data.length;s+=this.channels){let a=new Array(this.components);for(let h=0;h<this.components;h++)a[h]=this.data[s+h];e[o++]=a}return e}function getIntersection(e){let o=this,s=o.getClosestCommonParent(e),a=o.getRelativePosition(s,{defaultFurther:!0}),h=getRelativePositionForAllPixels(o,a),c=e.getRelativePosition(s,{defaultFurther:!0}),d=getRelativePositionForAllPixels(e,c),g=getCommonSurface(h,d),b={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let _=0;_<g.length;_++){let $=g[_],j=[$[0]-a[0],$[1]-a[1]],_e=[$[0]-c[0],$[1]-c[1]],et=o.getBitXY(j[0],j[1]),nt=e.getBitXY(_e[0],_e[1]);et===1&&nt===1&&b.commonWhitePixels.push($)}for(let _=0;_<h.length;_++){let $,j;_!==0&&($=Math.floor(_/o.width),j=_%o.width),o.getBitXY($,j)===1&&b.whitePixelsMask1.push(h[_])}for(let _=0;_<d.length;_++){let $=0,j=0;_!==0&&($=Math.floor(_/e.width),j=_%e.width),e.getBitXY($,j)===1&&b.whitePixelsMask2.push(d[_])}return b}function getRelativePositionForAllPixels(e,o){let s=[];for(let a=0;a<e.height;a++)for(let h=0;h<e.width;h++){let c=[a,h];s.push([c[0]+o[0],c[1]+o[1]])}return s}function getCommonSurface(e,o){let s=0,a=0,h=[];for(;s<e.length&&a<o.length;)e[s][0]===o[a][0]&&e[s][1]===o[a][1]?(h.push(e[s]),s++,a++):e[s][0]<o[a][0]||e[s][0]===o[a][0]&&e[s][1]<o[a][1]?s++:a++;return h}function getClosestCommonParent(e){let o=getDepth(this),s=getDepth(e),a;if(o>=s?a=getFurthestParent(this,o):a=getFurthestParent(e,s),o===0||s===0)return a;let h=this,c=e;for(;o!==s;)if(o>s){if(h=h.parent,h===null)return a;o=o-1}else{if(c=c.parent,c===null)return a;s=s-1}for(;h!==c&&h!==null&&c!==null;)if(h=h.parent,c=c.parent,h===null||c===null)return a;return h!==c?a:h}function getDepth(e){let o=0,s=e;for(;s.parent!=null;)s=s.parent,o++;return o}function getFurthestParent(e,o){let s=e;for(;o>0;)s=s.parent,o=o-1;return s}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(e,o){e.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),o=Object.assign({},defaultOptions$1,o);const s=e.width,a=e.height,h=e.maxValue,c={sigma:o.gaussianBlur,radius:3},d=e.gaussianFilter(c),g=d.convolution(Gy,convOptions),b=d.convolution(Gx,convOptions),_=b.hypotenuse(g),$=e.constructor,j=new $(s,a,{kind:"GREY",bitDepth:32}),_e=new $(s,a,{kind:"GREY",bitDepth:32}),et=new $(s,a,{kind:"GREY"});for(var nt=1;nt<s-1;nt++)for(var it=1;it<a-1;it++){var lt=(Math.round(Math.atan2(b.getValueXY(nt,it,0),g.getValueXY(nt,it,0))*(5/Math.PI))+5)%5;lt===0&&(_.getValueXY(nt,it,0)<=_.getValueXY(nt,it-1,0)||_.getValueXY(nt,it,0)<=_.getValueXY(nt,it+1,0))||lt===1&&(_.getValueXY(nt,it,0)<=_.getValueXY(nt-1,it+1,0)||_.getValueXY(nt,it,0)<=_.getValueXY(nt+1,it-1,0))||lt===2&&(_.getValueXY(nt,it,0)<=_.getValueXY(nt-1,it,0)||_.getValueXY(nt,it,0)<=_.getValueXY(nt+1,it,0))||lt===3&&(_.getValueXY(nt,it,0)<=_.getValueXY(nt-1,it-1,0)||_.getValueXY(nt,it,0)<=_.getValueXY(nt+1,it+1,0))||j.setValueXY(nt,it,0,_.getValueXY(nt,it,0))}for(nt=0;nt<s*a;++nt){var tt=j.data[nt],st=0;tt>o.highThreshold&&(st++,et.data[nt]=h),tt>o.lowThreshold&&st++,_e.data[nt]=st}var rt=[];for(nt=1;nt<s-1;++nt)for(it=1;it<a-1;++it)if(_e.getValueXY(nt,it,0)===1){e:for(var ot=nt-1;ot<nt+2;++ot)for(var ut=it-1;ut<it+2;++ut)if(_e.getValueXY(ot,ut,0)===2){rt.push([nt,it]),et.setValueXY(nt,it,0,h);break e}}for(;rt.length>0;){var gt=[];for(nt=0;nt<rt.length;++nt)for(it=-1;it<2;++it)for(ot=-1;ot<2;++ot)if(!(it===0&&ot===0)){var pt=rt[nt][0]+it,ht=rt[nt][1]+ot;_e.getValueXY(pt,ht,0)===1&&et.getValueXY(pt,ht,0)===0&&(gt.push([pt,ht]),et.setValueXY(pt,ht,0,h))}rt=gt}return et}function cannyEdge(e){return cannyEdgeDetector(this,e)}function extract(e,o={}){let{position:s}=o;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!s&&(s=e.getRelativePosition(this),!s))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let a=Image.createFrom(this,{width:e.width,height:e.height,alpha:1,position:s,parent:this});for(let h=0;h<e.width;h++)for(let c=0;c<e.height;c++){for(let d=0;d<this.channels;d++){let g=this.getValueXY(h+s[0],c+s[1],d);a.setValueXY(h,c,d,g)}e.getBitXY(h,c)||a.setValueXY(h,c,this.components,0)}return a}else{let a=Image.createFrom(this,{width:e.width,height:e.height,position:s,parent:this});for(let h=0;h<e.height;h++)for(let c=0;c<e.width;c++)e.getBitXY(c,h)&&this.getBitXY(c+s[0],h+s[1])&&a.setBitXY(c,h);return a}}var fastList={exports:{}};(function(e,o){(function(){function s(h,c,d){this.next=d,d&&(d.prev=this),this.prev=c,c&&(c.next=this),this.data=h}function a(){if(!(this instanceof a))return new a;this._head=null,this._tail=null,this.length=0}a.prototype={push:function(h){this._tail=new s(h,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var h=this._tail;return this._tail=h.prev,h.prev&&(h.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),h.data}},unshift:function(h){this._head=new s(h,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var h=this._head;return this._head=h.next,h.next&&(h.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),h.data}},item:function(h){h<0&&(h=this.length+h);for(var c=this._head;h-- >0&&c;)c=c.next;return c?c.data:void 0},slice:function(h,c){if(h||(h=0),c||(c=this.length),c<0&&(c=this.length+c),h<0&&(h=this.length+h),c===h)return[];if(c<h)throw new Error("invalid offset: "+h+","+c+" (length="+this.length+")");for(var d=c-h,g=new Array(d),b=0,_=this._head;h-- >0&&_;)_=_.next;for(;b<d&&_;)g[b++]=_.data,_=_.next;return g},drop:function(){a.call(this)},forEach:function(h,c){for(var d=this._head,g=0,b=this.length;g<b&&d;)h.call(c||this,d.data,g,this),d=d.next,g++},map:function(h,c){var d=new a;return this.forEach(function(g,b,_){d.push(h.call(c||_,g,b,_))}),d},filter:function(h,c){var d=new a;return this.forEach(function(g,b,_){h.call(c||_,g,b,_)&&d.push(g)}),d},reduce:function(h,c,d){var g=0,b=this._head,_=this.length;for(c||(g=1,c=b&&b.data,b=b&&b.next);g<_&&b;)c=h.call(d||this,c,b.data,this),g++,b=b.next;return c}},e.exports=a})()})(fastList);var fastListExports=fastList.exports;const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(e={}){const{x:o=0,y:s=0,inPlace:a=!0}=e,h=a?this:Image.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(o,s))return h;const d=new LinkedList;for(d.push(new Node(o,s));d.length>0;){const g=d.shift();h.setBitXY(g.x,g.y);for(let b=g.x+1;b<this.width&&(!h.getBitXY(b,g.y)&&!this.getBitXY(b,g.y));b++)h.setBitXY(b,g.y),g.y+1<this.height&&!this.getBitXY(b,g.y+1)&&d.push(new Node(b,g.y+1)),g.y-1>=0&&!this.getBitXY(b,g.y-1)&&d.push(new Node(b,g.y-1));for(let b=g.x-1;b>=0&&(!h.getBitXY(b,g.y)&&!this.getBitXY(b,g.y));b++)h.setBitXY(b,g.y),g.y+1<this.height&&!this.getBitXY(b,g.y+1)&&d.push(new Node(b,g.y+1)),g.y-1>=0&&!this.getBitXY(b,g.y-1)&&d.push(new Node(b,g.y-1))}return h}function Node(e,o){this.x=e,this.y=o}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends.apply(this,arguments)}function hsv2rgb(e,o,s){o=o/100,s=s/100;var a=[],h=s*o,c=e/60,d=h*(1-Math.abs(c%2-1)),g=s-h;return c>=0&&c<1?a=[h,d,0]:c>=1&&c<2?a=[d,h,0]:c>=2&&c<3?a=[0,h,d]:e>=3&&c<4?a=[0,d,h]:e>=4&&c<5?a=[d,0,h]:e>=5&&c<=6?a=[h,0,d]:a=[0,0,0],{r:Math.round(255*(a[0]+g)),g:Math.round(255*(a[1]+g)),b:Math.round(255*(a[2]+g))}}function hsl2hsv(e,o,s){return o*=(s<50?s:100-s)/100,{h:e,s:2*o/(s+o)*100,v:s+o}}function hsl2rgb$1(e,o,s){var a=hsl2hsv(e,o,s);return hsv2rgb(a.h,a.s,a.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse(e){return named(e)||hex3(e)||hex6(e)||rgb(e)||rgba$1(e)||hsl(e)||hsla(e)}function named(e){var o=colors[e.toLowerCase()];if(o)return{r:o[0],g:o[1],b:o[2],a:100}}function rgb(e){var o=e.match(/rgb\(([^)]+)\)/);if(o){var s=o[1].split(/ *, */).map(Number);return{r:s[0],g:s[1],b:s[2],a:100}}}function rgba$1(e){var o=e.match(/rgba\(([^)]+)\)/);if(o){var s=o[1].split(/ *, */).map(Number);return{r:s[0],g:s[1],b:s[2],a:s[3]*100}}}function hex6(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:100}}function hex3(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:100}}function hsl(e){var o=e.match(/hsl\(([^)]+)\)/);if(o){var s=o[1].split(/ *, */),a=parseInt(s[0],10),h=parseInt(s[1],10),c=parseInt(s[2],10),d=hsl2rgb$1(a,h,c);return _extends({},d,{a:100})}}function hsla(e){var o=e.match(/hsla\(([^)]+)\)/);if(o){var s=o[1].split(/ *, */),a=parseInt(s[0],10),h=parseInt(s[1],10),c=parseInt(s[2],10),d=parseInt(parseFloat(s[3])*100,10),g=hsl2rgb$1(a,h,c);return _extends({},g,{a:d})}}function css2array(e){let o=parse(e);return[o.r,o.g,o.b,Math.round(o.a*255/100)]}function hue2rgb(e,o,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(o-e)*6*s:s<1/2?o:s<2/3?e+(o-e)*(2/3-s)*6:e}function hsl2rgb(e,o,s){let a,h,c,d,g,b;return o/=100,s/=100,o===0?d=g=b=s*255:(s<=.5?h=s*(o+1):h=s+o-s*o,a=s*2-h,c=e/360,d=hue2rgb(a,h,c+1/3),g=hue2rgb(a,h,c),b=hue2rgb(a,h,c-1/3)),{r:d,g,b}}function getDistinctColors(e){let o=new Array(e),s=0;for(let a=0;a<360;a+=360/e){s++;let h=hsl2rgb(a,100,30+s%4*15);o[s-1]=[Math.round(h.r*255),Math.round(h.g*255),Math.round(h.b*255)]}return o}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(e){let{color:o,colors:s,randomColors:a,numberColors:h=50}=e;if(o&&!Array.isArray(o)&&(o=css2array(o)),o)return[o];if(s)return s=s.map(function(c){return Array.isArray(c)?c:css2array(c)}),s;if(a){s=new Array(h);for(let c=0;c<h;c++)s[c]=getRandomColor()}return getDistinctColors(h)}function paintLabels(e,o,s={}){let{color:a="blue",colors:h,font:c="12px Helvetica",rotate:d=0}=s;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(e))throw Error("paintLabels: labels must be an array");if(!Array.isArray(o))throw Error("paintLabels: positions must be an array");if(a&&!Array.isArray(a)&&(a=css2array(a)),h?h=h.map(function(_){return Array.isArray(_)?_:css2array(_)}):h=[a],e.length!==o.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(c)||(c=[c]),Array.isArray(d)||(d=[d]);let b=this.getCanvas().getContext("2d");for(let _=0;_<e.length;_++){b.save();let $=h[_%h.length];b.fillStyle=`rgba(${$[0]},${$[1]},${$[2]},${$[3]/this.maxValue})`,b.font=c[_%c.length];let j=o[_];b.translate(j[0],j[1]),b.rotate(d[_%d.length]/180*Math.PI),b.fillText(e[_],0,0),b.restore()}return this.data=Uint8Array.from(b.getImageData(0,0,this.width,this.height).data),this}function paintMasks(e,o={}){let{alpha:s=255,labels:a=[],labelsPosition:h=[],labelColor:c="blue",labelFont:d="12px Helvetica"}=o;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let g=getColors(Object.assign({},o,{numberColors:e.length}));Array.isArray(e)||(e=[e]);for(let b=0;b<e.length;b++){let _=e[b],$=g[b%g.length];for(let j=0;j<_.width;j++)for(let _e=0;_e<_.height;_e++)if(_.getBitXY(j,_e))for(let et=0;et<Math.min(this.components,$.length);et++)if(s===255)this.setValueXY(j+_.position[0],_e+_.position[1],et,$[et]);else{let nt=this.getValueXY(j+_.position[0],_e+_.position[1],et);nt=Math.round((nt*(255-s)+$[et]*s)/255),this.setValueXY(j+_.position[0],_e+_.position[1],et,nt)}}if(Array.isArray(a)&&a.length>0){let _=this.getCanvas().getContext("2d");_.fillStyle=c,_.font=d;for(let $=0;$<Math.min(e.length,a.length);$++){let j=h[$]?h[$]:e[$].position;_.fillText(a[$],j[0],j[1])}this.data=Uint8Array.from(_.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(e,o){let s=new Array(e);for(let a=0;a<e;a++)s[a]=new Array(o).fill(0);return s}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(o={}){let{kind:s="cross",shape:a,size:h,width:c,height:d,filled:g=!0}=o;if(h&&(c=h,d=h),a)switch(a.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(c,d,{filled:g});break;case"circle":case"ellipse":this.matrix=ellipse(c,d,{filled:g});break;case"triangle":this.matrix=triangle(c,d,{filled:g});break;default:throw new Error(`Shape: unexpected shape: ${a}`)}else if(s)switch(s.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${s}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let o=this.matrix,s=[];for(let a=0;a<o.length;a++)for(let h=0;h<o[0].length;h++)o[a][h]&&s.push([h-this.halfWidth,a-this.halfHeight]);return s}getMask(){let o=new Image(this.width,this.height,{kind:BINARY});for(let s=0;s<this.matrix.length;s++)for(let a=0;a<this.matrix[0].length;a++)this.matrix[s][a]&&o.setBitXY(a,s);return o}}function rectangle(e,o,s){const a=zerosMatrix(o,e);if(s.filled)for(let h=0;h<o;h++)for(let c=0;c<e;c++)a[h][c]=1;else{for(let h of[0,o-1])for(let c=0;c<e;c++)a[h][c]=1;for(let h=0;h<o;h++)for(let c of[0,e-1])a[h][c]=1}return a}function ellipse(e,o,s){const a=zerosMatrix(o,e);let h=1-o%2,c=1-e%2,d=Math.floor((e-1)/2),g=Math.floor((o-1)/2),b=d*d,_=g*g;if(s.filled)for(let $=0;$<=g;$++){let j=Math.floor(Math.sqrt(b-b*$*$/_));for(let _e=d-j;_e<=d;_e++)a[g-$][_e]=1,a[g+$+h][_e]=1,a[g-$][e-_e-1]=1,a[g+$+h][e-_e-1]=1}else{for(let $=0;$<=g;$++){let j=Math.floor(Math.sqrt(b-b*$*$/_)),_e=d-j;a[g-$][_e]=1,a[g+$+h][_e]=1,a[g-$][e-_e-1]=1,a[g+$+h][e-_e-1]=1}for(let $=0;$<=d;$++){let j=Math.floor(Math.sqrt(_-_*$*$/b)),_e=g-j;a[_e][d-$]=1,a[_e][d+$+c]=1,a[o-_e-1][d-$]=1,a[o-_e-1][d+$+c]=1}}return a}function triangle(e,o,s){if(!s.filled)throw new Error("Non filled triangle is not implemented");const a=zerosMatrix(o,e);for(let h=0;h<o;h++){let c=Math.floor((1-h/o)*e/2);for(let d=c;d<e-c;d++)a[h][d]=1}return a}function paintPoints(e,o={}){let{shape:s}=o;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let a=getColors(Object.assign({},o,{numberColors:e.length})),h=new Shape(s).getPoints(),c=Math.min(this.channels,a[0].length);for(let d=0;d<e.length;d++){let g=a[d%a.length],b=e[d][0],_=e[d][1];for(let $=0;$<h.length;$++){let j=h[$][0],_e=h[$][1];if(b+j>=0&&_+_e>=0&&b+j<this.width&&_+_e<this.height){let et=(b+j+(_+_e)*this.width)*this.channels;for(let nt=0;nt<c;nt++)this.data[et+nt]=g[nt]}}}return this}function paintPolyline(e,o={}){let{color:s=[this.maxValue,0,0],closed:a=!1}=o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let h=Math.min(this.channels,s.length);for(let c=0;c<e.length-1+a;c++){let d=e[c],g=e[(c+1)%e.length],b=g[0]-d[0],_=g[1]-d[1],$=Math.max(Math.abs(b),Math.abs(_)),j=b/$,_e=_/$,et=d[0],nt=d[1];for(let it=0;it<=$;it++){let lt=Math.round(et),tt=Math.round(nt);if(lt>=0&&tt>=0&&lt<this.width&&tt<this.height)if(this.bitDepth===1)this.setBitXY(lt,tt);else{let st=(lt+tt*this.width)*this.channels;for(let rt=0;rt<h;rt++)this.data[st+rt]=s[rt]}et=et+j,nt=nt+_e}}return this}function paintPolylines(e,o={}){let s=Object.assign({},o);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let a=getColors(Object.assign({},o,{numberColors:e.length}));for(let h=0;h<e.length;h++)s.color=a[h%a.length],this.paintPolyline(e[h],s);return this}function paintPolygon(e,o={}){let{color:s=[this.maxValue,0,0],filled:a=!1}=o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),o.closed=!0;let h=deleteDouble(e);if(a===!1)return this.paintPolyline(e,o);{let c=Array(this.height);for(let d=0;d<this.height;d++){c[d]=[];for(let g=0;g<this.width;g++)c[d].push(0)}for(let d=0;d<h.length;d++){const g=lineBetweenTwoPoints(h[d],h[(d+1)%h.length]);for(let b=0;b<this.height;b++)for(let _=0;_<this.width;_++)isAtTheRightOfTheLine(_,b,g,this.height)&&(c[b][_]=c[b][_]===0?1:0)}for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)if(c[d][g]===1)if(this.bitDepth===1)this.setBitXY(g,d);else{let b=Math.min(this.channels,s.length),_=(g+d*this.width)*this.channels;for(let $=0;$<b;$++)this.data[_+$]=s[$]}return this.paintPolyline(e,o)}}function deleteDouble(e){let o=[];for(let s=0;s<e.length;s++)if(!(e[s][0]===e[(s+1)%e.length][0]&&e[s][1]===e[(s+1)%e.length][1])){if(e[s][0]===e[(s-1+e.length)%e.length][0]&&e[s][1]===e[(s-1+e.length)%e.length][1])continue;if(e[(s+1)%e.length][0]===e[(s-1+e.length)%e.length][0]&&e[(s-1+e.length)%e.length][1]===e[(s+1)%e.length][1])continue;o.push(e[s])}return o}function lineBetweenTwoPoints(e,o){if(e[0]===o[0])return{a:0,b:e[0],vertical:!0};{const s=(o[1]-e[1])/(o[0]-e[0]),a=e[1]-s*e[0];return{a:s,b:a,vertical:!1}}}function isAtTheRightOfTheLine(e,o,s,a){if(s.vertical===!0)return s.b<=e;if(s.a===0)return!1;{const h=(o-s.b)/s.a;return h<e&&h>=0&&h<=a}}function paintPolygons(e,o={}){let s=Object.assign({},o);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let a=getColors(Object.assign({},o,{numberColors:e.length}));for(let h=0;h<e.length;h++)s.color=a[h%a.length],this.paintPolygon(e[h],s);return this}function getHistogram(e={}){let{maxSlots:o=256,channel:s,useAlpha:a=!0}=e;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),s===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");s=0}return getChannelHistogram.call(this,s,{useAlpha:a,maxSlots:o})}function getHistograms(e={}){const{maxSlots:o=256,useAlpha:s=!0}=e;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let a=new Array(s?this.components:this.channels);for(let h=0;h<a.length;h++)a[h]=getChannelHistogram.call(this,h,{useAlpha:s,maxSlots:o});return a}function getChannelHistogram(e,o){let{useAlpha:s,maxSlots:a}=o;if(this.bitDepth===1){let b=[0,0];for(let _=0;_<this.height;_++)for(let $=0;$<this.width;$++){let j=this.getBitXY(_,$);j===0?b[0]+=1:j===1&&(b[1]+=1)}return b}let h=Math.log2(a);if(!isInteger$1(h))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let c=0;this.bitDepth>h&&(c=this.bitDepth-h);let d=this.data,g=newArray$1(Math.pow(2,Math.min(this.bitDepth,h)),0);if(s&&this.alpha){let b=this.channels-e-1;for(let _=e;_<d.length;_+=this.channels)g[d[_]>>c]+=d[_+b]/this.maxValue}else for(let b=e;b<d.length;b+=this.channels)g[d[b]>>c]++;return g}function getColorHistogram(e={}){let{useAlpha:o=!0,nbSlots:s=512}=e;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let a=Math.log(s)/Math.log(8);if(a!==Math.floor(a))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let h=this.bitDepth-a,c=this.data,d=newArray$1(Math.pow(8,a),0),g=Math.pow(2,a*2),b=Math.pow(2,a);for(let _=0;_<c.length;_+=this.channels){let $=(c[_]>>h)*g+(c[_+1]>>h)*b+(c[_+2]>>h);o&&this.alpha?d[$]+=c[_+this.channels-1]/this.maxValue:d[$]++}return d}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let e=newArray$1(this.channels,1/0);for(let o=0;o<this.data.length;o+=this.channels)for(let s=0;s<this.channels;s++)this.data[o+s]<e[s]&&(e[s]=this.data[o+s]);return e}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let e=newArray$1(this.channels,-1/0);for(let o=0;o<this.data.length;o+=this.channels)for(let s=0;s<this.channels;s++)this.data[o+s]>e[s]&&(e[s]=this.data[o+s]);return e}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let e=newArray$1(this.channels,0);for(let o=0;o<this.data.length;o+=this.channels)for(let s=0;s<this.channels;s++)e[s]+=this.data[o+s];return e}function getMoment(e=0,o=0){this.checkProcessable("getMoment",{bitDepth:[1]});let s=0;for(let a=0;a<this.width;a++)for(let h=0;h<this.height;h++)this.getBitXY(a,h)===1&&(s+=a**e*h**o);return s}function localMaxima(e={}){let{mask:o,region:s=3,removeClosePoints:a=0,invert:h=!1,maxEquals:c=2}=e,d=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),s*=4;let g=h?0:1,b=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],_=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],$=s<=8?1:2,j=[];for(let _e=$;_e<d.height-$;_e++)for(let et=$;et<d.width-$;et++){if(o&&o.getBitXY(et,_e)!==g)continue;let nt=0,it=0,lt=d.data[et+_e*d.width];for(let tt=0;tt<s;tt++)h?d.data[et+b[tt]+(_e+_[tt])*d.width]>lt&&nt++:d.data[et+b[tt]+(_e+_[tt])*d.width]<lt&&nt++,d.data[et+b[tt]+(_e+_[tt])*d.width]===lt&&it++;nt+it===s&&it<=c&&j.push([et,_e])}if(a>0)for(let _e=0;_e<j.length;_e++)for(let et=_e+1;et<j.length;et++)Math.sqrt(Math.pow(j[_e][0]-j[et][0],2)+Math.pow(j[_e][1]-j[et][1],2))<a&&(j[_e][0]=j[_e][0]+j[et][0]>>1,j[_e][1]=j[_e][1]+j[et][1]>>1,j.splice(et,1),et--);return j}function mean(){let e=this.getHistograms({maxSlots:this.maxValue+1}),o=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o[s]=mean$2(a)}return o}function median(){let e=this.getHistograms({maxSlots:this.maxValue+1}),o=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o[s]=median$2(a)}return o}function points(){this.checkProcessable("points",{bitDepth:[1]});const e=[];for(let o=0;o<this.width;o++)for(let s=0;s<this.height;s++)this.getBitXY(o,s)===1&&e.push([o,s]);return e}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const e=[];for(let o=0;o<this.height;o++)for(let s=0;s<this.width;s++)if(this.getBitXY(s,o)===1)for(e.push([s,o]),this.getBitXY(s+1,o)!==1?(e.push([s+1,o]),e.push([s+1,o+1]),this.getBitXY(s,o+1)!==1&&e.push([s,o+1])):this.getBitXY(s,o+1)!==1&&(e.push([s,o+1]),e.push([s+1,o+1]));s<this.width-2&&this.getBitXY(s+1,o)===1&&this.getBitXY(s+2,o)===1;)s++;return e}function getRelativePosition(e,o={}){if(this===e)return[0,0];let s=[0,0],a=this;for(;a;){if(a===e)return s;a.position&&(s[0]+=a.position[0],s[1]+=a.position[1]),a=a.parent}return o.defaultFurther?s:!1}function countAlphaPixels(e={}){let{alpha:o=1}=e;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let s=0;if(o!==void 0){for(let a=this.components;a<this.data.length;a+=this.channels)this.data[a]===o&&s++;return s}else return this.size}function monotoneChainConvexHull$1(e,o={}){const{sorted:s}=o;s||(e=e.slice().sort(byXThenY));const a=e.length,h=new Array(a*2);let c=0;for(let g=0;g<a;g++){const b=e[g];for(;c>=2&&cw(h[c-2],h[c-1],b)<=0;)c--;h[c++]=b}const d=c+1;for(let g=a-2;g>=0;g--){const b=e[g];for(;c>=d&&cw(h[c-2],h[c-1],b)<=0;)c--;h[c++]=b}return h.slice(0,c-1)}function cw(e,o,s){return(o[1]-e[1])*(s[0]-e[0])-(o[0]-e[0])*(s[1]-e[1])}function byXThenY(e,o){return e[0]===o[0]?e[1]-o[1]:e[0]-o[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(e){for(let o=0;o<e.length;o++)e[o][0]=Math.round(e[o][0]),e[o][1]=Math.round(e[o][1]);return e}function difference(e,o){return[e[0]-o[0],e[1]-o[1]]}function normalize(e){let o=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/o,e[1]/o]}function rotate(e,o,s){s===void 0&&(s=new Array(o.length));let a=Math.cos(e),h=Math.sin(e);for(let c=0;c<s.length;++c)s[c]=[a*o[c][0]-h*o[c][1],h*o[c][0]+a*o[c][1]];return s}function perimeter(e){let o=0;for(let s=0;s<e.length;s++){let a=e[s][0],h=e[s][1],c=e[s===e.length-1?0:s+1][0],d=e[s===e.length-1?0:s+1][1];o+=Math.sqrt((c-a)**2+(d-h)**2)}return o}function surface(e){let o=0;for(let s=0;s<e.length;s++){let a=e[s][0],h=e[s===e.length-1?0:s+1][1],c=e[s===e.length-1?0:s+1][0],d=e[s][1];o+=a*h*.5,o-=c*d*.5}return Math.abs(o)}function minMax(e){let o=1/0,s=1/0,a=-1/0,h=-1/0;for(let c=0;c<e.length;c++)e[c][0]<o&&(o=e[c][0]),e[c][0]>a&&(a=e[c][0]),e[c][1]<s&&(s=e[c][1]),e[c][1]>h&&(h=e[c][1]);return[[o,s],[a,h]]}function moveToZeroZero(e,o){o===void 0&&(o=new Array(e.length).fill(0).map(()=>[]));let s=minMax(e),a=s[0][0],h=s[0][1];for(let c=0;c<e.length;c++)o[c][0]=e[c][0]-a,o[c][1]=e[c][1]-h;return o}function minimalBoundingRectangle(e={}){const{originalPoints:o=monotoneChainConvexHull.call(this)}=e;if(o.length===0)return[];if(o.length===1)return[o[0],o[0],o[0],o[0]];const s=new Array(o.length);let a=1/0,h=0,c;for(let d=0;d<s.length;d++){let g=getAngle$1(o[d],o[(d+1)%s.length]);rotate(-g,o,s);let b=s[d][0],_=s[d][1],$=s[(d+1)%s.length][0],j=s[(d+1)%s.length][1],_e=!0,et=0,nt=0,it=0;for(let rt=0;rt<s.length;rt++){let ot=s[rt][0],ut=s[rt][1],gt=(ot-b)/($-b);_e===!0?(_e=!1,et=gt,nt=gt):(gt<et&&(et=gt),gt>nt&&(nt=gt));let pt=(-($-b)*ut+$*_-j*b)/($-b);Math.abs(pt)>Math.abs(it)&&(it=pt)}let lt=[b+et*($-b),_],tt=[b+nt*($-b),_],st=Math.abs(it*(et-nt)*($-b));st<a&&(h=g,a=st,c=[lt,tt,[tt[0],tt[1]-it],[lt[0],lt[1]-it]])}return rotate(h,c,c),c}function getAngle$1(e,o){let s=difference(o,e),a=normalize(s),h=Math.acos(a[0]);return a[1]<0?-h:h}function extend$1(e){let o={inPlace:!0};e.extendMethod("invert",invert),e.extendMethod("abs",abs),e.extendMethod("level",level,o),e.extendMethod("add",add,o),e.extendMethod("subtract",subtract,o),e.extendMethod("subtractImage",subtractImage),e.extendMethod("multiply",multiply,o),e.extendMethod("divide",divide,o),e.extendMethod("hypotenuse",hypotenuse),e.extendMethod("background",background$1),e.extendMethod("flipX",flipX),e.extendMethod("flipY",flipY),e.extendMethod("blurFilter",blurFilter),e.extendMethod("medianFilter",medianFilter),e.extendMethod("gaussianFilter",gaussianFilter),e.extendMethod("sobelFilter",sobelFilter),e.extendMethod("gradientFilter",gradientFilter),e.extendMethod("scharrFilter",scharrFilter),e.extendMethod("dilate",dilate),e.extendMethod("erode",erode),e.extendMethod("open",open),e.extendMethod("close",close),e.extendMethod("topHat",topHat),e.extendMethod("blackHat",blackHat),e.extendMethod("morphologicalGradient",morphologicalGradient),e.extendMethod("warpingFourPoints",warpingFourPoints),e.extendMethod("crop",crop),e.extendMethod("cropAlpha",cropAlpha),e.extendMethod("resize",resize).extendMethod("scale",resize),e.extendMethod("hsv",hsv),e.extendMethod("hsl",hsl$1),e.extendMethod("cmyk",cmyk),e.extendMethod("rgba8",rgba8),e.extendMethod("grey",grey).extendMethod("gray",grey),e.extendMethod("mask",mask),e.extendMethod("pad",pad),e.extendMethod("colorDepth",colorDepth),e.extendMethod("setBorder",setBorder,o),e.extendMethod("rotate",rotate$1),e.extendMethod("rotateLeft",rotateLeft),e.extendMethod("rotateRight",rotateRight),e.extendMethod("insert",insert),e.extendMethod("getRow",getRow),e.extendMethod("getColumn",getColumn),e.extendMethod("getMatrix",getMatrix),e.extendMethod("setMatrix",setMatrix),e.extendMethod("getPixelsArray",getPixelsArray),e.extendMethod("getIntersection",getIntersection),e.extendMethod("getClosestCommonParent",getClosestCommonParent),e.extendMethod("getThreshold",getThreshold),e.extendMethod("split",split),e.extendMethod("getChannel",getChannel),e.extendMethod("combineChannels",combineChannels),e.extendMethod("setChannel",setChannel),e.extendMethod("getSimilarity",getSimilarity),e.extendMethod("getPixelsGrid",getPixelsGrid),e.extendMethod("getBestMatch",getBestMatch),e.extendMethod("cannyEdge",cannyEdge),e.extendMethod("convolution",convolution),e.extendMethod("extract",extract),e.extendMethod("floodFill",floodFill),e.extendMethod("paintLabels",paintLabels,o),e.extendMethod("paintMasks",paintMasks,o),e.extendMethod("paintPoints",paintPoints,o),e.extendMethod("paintPolyline",paintPolyline,o),e.extendMethod("paintPolylines",paintPolylines,o),e.extendMethod("paintPolygon",paintPolygon,o),e.extendMethod("paintPolygons",paintPolygons,o),e.extendMethod("countAlphaPixels",countAlphaPixels),e.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),e.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),e.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),e.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),e.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),e.extendMethod("getMin",min).extendProperty("min",min),e.extendMethod("getMax",max).extendProperty("max",max),e.extendMethod("getSum",sum).extendProperty("sum",sum),e.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),e.extendMethod("getLocalMaxima",localMaxima),e.extendMethod("getMedian",median).extendProperty("median",median),e.extendMethod("getMean",mean).extendProperty("mean",mean),e.extendMethod("getPoints",points).extendProperty("points",points),e.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),e.extendMethod("getRelativePosition",getRelativePosition)}var quantities={exports:{}};(function(e,o){(function(s,a){e.exports=a()})(commonjsGlobal,function(){function s(dt){return typeof dt=="string"||dt instanceof String}var a=Number.isFinite||window.isFinite;function h(dt){return a(dt)}function c(dt){return dt}function d(dt){var wt={};return dt.filter(function(yt){return wt.hasOwnProperty(yt)?!1:wt[yt]=!0})}function g(dt,wt){if(wt.length!==dt.length)return!1;for(var yt=0;yt<dt.length;yt++)if(wt[yt].compareArray&&!wt[yt].compareArray(dt[yt])||wt[yt]!==dt[yt])return!1;return!0}function b(dt,wt){Object.keys(wt).forEach(function(yt){dt[yt]=wt[yt]})}function _(){for(var dt=1,wt=0,yt=0;yt<arguments.length;yt++){var Mt=arguments[yt];wt=wt+_e(Mt),dt*=Mt}return wt!==0?j(dt,wt):dt}function $(dt,wt){if(wt===0)throw new Error("Divide by zero");var yt=Math.pow(10,_e(wt)),Mt=yt/(yt*wt);return _(dt,Mt)}function j(dt,wt){return Math.round(dt*Math.pow(10,wt))/Math.pow(10,wt)}function _e(dt){if(!isFinite(dt))return 0;for(var wt=0;dt%1!==0;)dt*=10,wt++;return wt}function et(){var dt;if(!this)return dt=Object.create(et.prototype),et.apply(dt,arguments),dt;dt=Error.apply(this,arguments),this.name="QtyError",this.message=dt.message,this.stack=dt.stack}et.prototype=Object.create(Error.prototype,{constructor:{value:et}});function nt(dt,wt){throw new et("Incompatible units: "+dt+" and "+wt)}var it={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","μ","µ","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","Ω","Ω"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},lt=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],tt="<1>",st=[tt];function rt(dt,wt){var yt=wt[1],Mt=wt[3]||[],Ft=wt[4]||[];if(!h(yt))throw new et(dt+": Invalid unit definition. 'scalar' must be a number");Mt.forEach(function(zt){if(it[zt]===void 0)throw new et(dt+": Invalid unit definition. Unit "+zt+" in 'numerator' is not recognized")}),Ft.forEach(function(zt){if(it[zt]===void 0)throw new et(dt+": Invalid unit definition. Unit "+zt+" in 'denominator' is not recognized")})}var ot={},ut={},gt={},pt={},ht={};for(var ct in it)if(it.hasOwnProperty(ct)){var at=it[ct];if(at[2]==="prefix"){ot[ct]=at[1];for(var ft=0;ft<at[0].length;ft++)ut[at[0][ft]]=ct}else{rt(ct,at),gt[ct]={scalar:at[1],numerator:at[3],denominator:at[4]};for(var mt=0;mt<at[0].length;mt++)pt[at[0][mt]]=ct}ht[ct]=at[0][0]}function xt(dt){var wt,yt=[],Mt=Object.keys(it);if(typeof dt>"u")for(wt=0;wt<Mt.length;wt++)["","prefix"].indexOf(it[Mt[wt]][2])===-1&&yt.push(Mt[wt].substr(1,Mt[wt].length-2));else{if(this.getKinds().indexOf(dt)===-1)throw new et("Kind not recognized");for(wt=0;wt<Mt.length;wt++)it[Mt[wt]][2]===dt&&yt.push(Mt[wt].substr(1,Mt[wt].length-2))}return yt.sort(function(Ft,zt){return Ft.toLowerCase()<zt.toLowerCase()?-1:Ft.toLowerCase()>zt.toLowerCase()?1:0})}function bt(dt){if(!pt[dt])throw new et("Unit not recognized");return it[pt[dt]][0]}var Et=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function Bt(){if(this.signature)return this.signature;for(var dt=Nt.call(this),wt=0;wt<dt.length;wt++)dt[wt]*=Math.pow(20,wt);return dt.reduce(function(yt,Mt){return yt+Mt},0)}function Nt(){if(!this.isBase())return Nt.call(this.toBase());for(var dt=new Array(Et.length),wt=0;wt<dt.length;wt++)dt[wt]=0;for(var yt,Mt,Ft=0;Ft<this.numerator.length;Ft++)(yt=it[this.numerator[Ft]])&&(Mt=Et.indexOf(yt[2]),Mt>=0&&(dt[Mt]=dt[Mt]+1));for(var zt=0;zt<this.denominator.length;zt++)(yt=it[this.denominator[zt]])&&(Mt=Et.indexOf(yt[2]),Mt>=0&&(dt[Mt]=dt[Mt]-1));return dt}var vt="[+-]",St="\\d+",kt=vt+"?"+St,$t="\\."+St,Pt="(?:"+St+"(?:"+$t+")?)|(?:"+$t+")",It="[Ee]"+kt,Dt="(?:"+Pt+")(?:"+It+")?",At=vt+"?\\s*"+Dt,Rt="("+At+")?\\s*([^/]*)(?:/(.+))?",Ot=new RegExp("^"+Rt+"$"),en="\\^|\\*{2}",Gt="[01234]",Qt=new RegExp("([^ \\*\\d]+?)(?:"+en+")?(-?"+Gt+"(?![a-zA-Z]))"),tn=new RegExp("([^ \\*\\d]+?)(?:"+en+")?("+Gt+"(?![a-zA-Z]))");function un(dt){s(dt)||(dt=dt.toString()),dt=dt.trim();var wt=Ot.exec(dt);if(!wt)throw new et(dt+": Quantity not recognized");var yt=wt[1];yt?(yt=yt.replace(/\s/g,""),this.scalar=parseFloat(yt)):this.scalar=1;for(var Mt=wt[2],Ft=wt[3],zt,pn,cn;wt=Qt.exec(Mt);){if(zt=parseFloat(wt[2]),isNaN(zt))throw new et("Unit exponent is not a number");if(zt===0&&!Zt.test(wt[1]))throw new et("Unit not recognized");pn=wt[1]+" ",cn="";for(var mn=0;mn<Math.abs(zt);mn++)cn+=pn;zt>=0?Mt=Mt.replace(wt[0],cn):(Ft=Ft?Ft+cn:cn,Mt=Mt.replace(wt[0],""))}for(;wt=tn.exec(Ft);){if(zt=parseFloat(wt[2]),isNaN(zt))throw new et("Unit exponent is not a number");if(zt===0&&!Zt.test(wt[1]))throw new et("Unit not recognized");pn=wt[1]+" ",cn="";for(var yn=0;yn<zt;yn++)cn+=pn;Ft=Ft.replace(wt[0],cn)}Mt&&(this.numerator=Vt(Mt.trim())),Ft&&(this.denominator=Vt(Ft.trim()))}var nn=Object.keys(ut).sort(function(dt,wt){return wt.length-dt.length}).join("|"),Lt=Object.keys(pt).sort(function(dt,wt){return wt.length-dt.length}).join("|"),Ct="\\b|$",rn="("+nn+")??("+Lt+")(?:"+Ct+")",Zt=new RegExp("^\\s*("+rn+"[\\s\\*]*)+$"),qt=new RegExp(rn,"g"),_t={};function Vt(dt){var wt=_t[dt];if(wt)return wt;var yt,Mt=[];if(!Zt.test(dt))throw new et("Unit not recognized");for(;yt=qt.exec(dt);)Mt.push(yt.slice(1));return Mt=Mt.map(function(Ft){return ut[Ft[0]]?[ut[Ft[0]],pt[Ft[1]]]:[pt[Ft[1]]]}),Mt=Mt.reduce(function(Ft,zt){return Ft.concat(zt)},[]),Mt=Mt.filter(function(Ft){return Ft}),_t[dt]=Mt,Mt}function Xt(dt){if(!s(dt))throw new et("Argument should be a string");try{return this(dt)}catch{return null}}function Ht(dt){return dt instanceof Tt}function Tt(dt,wt){if(hn.apply(null,arguments),!Ht(this))return new Tt(dt,wt);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=st,this.denominator=st,on(dt)?(this.scalar=dt.scalar,this.numerator=dt.numerator&&dt.numerator.length!==0?dt.numerator:st,this.denominator=dt.denominator&&dt.denominator.length!==0?dt.denominator:st):wt?(un.call(this,wt),this.scalar=dt):un.call(this,dt),this.denominator.join("*").indexOf("temp")>=0)throw new et("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new et("Cannot multiply by temperatures");if(!g(this.denominator,st))throw new et("Cannot divide with temperatures")}if(this.initValue=dt,jt.call(this),this.isTemperature()&&this.baseScalar<0)throw new et("Temperatures must not be less than absolute zero")}Tt.prototype={constructor:Tt};function hn(dt,wt){if(wt){if(!(h(dt)&&s(wt)))throw new et("Only number accepted as initialization value when units are explicitly provided")}else if(!(s(dt)||h(dt)||Ht(dt)||on(dt)))throw new et("Only string, number or quantity accepted as single initialization value")}function on(dt){return dt&&typeof dt=="object"&&dt.hasOwnProperty("scalar")}function jt(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=Bt.call(this);else{var dt=this.toBase();this.baseScalar=dt.scalar,this.signature=dt.signature}}var Yt={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function Kt(){return d(Object.keys(Yt).map(function(dt){return Yt[dt]}))}Tt.prototype.kind=function(){return Yt[this.signature.toString()]},b(Tt.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&g(this.denominator,st)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function Ut(dt,wt){var yt=dt.units(),Mt=wt.to(yt),Ft=Tt(Wt(yt));return Tt({scalar:dt.scalar-Mt.scalar,numerator:Ft.numerator,denominator:Ft.denominator})}function Jt(dt,wt){var yt=wt.to(Wt(dt.units()));return Tt({scalar:dt.scalar-yt.scalar,numerator:dt.numerator,denominator:dt.denominator})}function an(dt,wt){var yt=wt.to(Wt(dt.units()));return Tt({scalar:dt.scalar+yt.scalar,numerator:dt.numerator,denominator:dt.denominator})}function Wt(dt){if(dt==="tempK")return"degK";if(dt==="tempC")return"degC";if(dt==="tempF")return"degF";if(dt==="tempR")return"degR";throw new et("Unknown type for temp conversion from: "+dt)}function ln(dt,wt){var yt=sn(dt),Mt=wt.units(),Ft;if(Mt==="degK")Ft=yt.scalar;else if(Mt==="degC")Ft=yt.scalar;else if(Mt==="degF")Ft=yt.scalar*9/5;else if(Mt==="degR")Ft=yt.scalar*9/5;else throw new et("Unknown type for degree conversion to: "+Mt);return Tt({scalar:Ft,numerator:wt.numerator,denominator:wt.denominator})}function sn(dt){var wt=dt.units(),yt;if(wt.match(/(deg)[CFRK]/))yt=dt.baseScalar;else if(wt==="tempK")yt=dt.scalar;else if(wt==="tempC")yt=dt.scalar;else if(wt==="tempF")yt=dt.scalar*5/9;else if(wt==="tempR")yt=dt.scalar*5/9;else throw new et("Unknown type for temp conversion from: "+wt);return Tt({scalar:yt,numerator:["<kelvin>"],denominator:st})}function fn(dt,wt){var yt=wt.units(),Mt;if(yt==="tempK")Mt=dt.baseScalar;else if(yt==="tempC")Mt=dt.baseScalar-273.15;else if(yt==="tempF")Mt=dt.baseScalar*9/5-459.67;else if(yt==="tempR")Mt=dt.baseScalar*9/5;else throw new et("Unknown type for temp conversion to: "+yt);return Tt({scalar:Mt,numerator:wt.numerator,denominator:wt.denominator})}function gn(dt){var wt=dt.units(),yt;if(wt.match(/(deg)[CFRK]/))yt=dt.baseScalar;else if(wt==="tempK")yt=dt.scalar;else if(wt==="tempC")yt=dt.scalar+273.15;else if(wt==="tempF")yt=(dt.scalar+459.67)*5/9;else if(wt==="tempR")yt=dt.scalar*5/9;else throw new et("Unknown type for temp conversion from: "+wt);return Tt({scalar:yt,numerator:["<temp-K>"],denominator:st})}b(Tt.prototype,{to:function(dt){var wt,yt;if(dt==null)return this;if(!s(dt))return this.to(dt.units());if(wt=this._conversionCache[dt],wt)return wt;if(yt=Tt(dt),yt.units()===this.units())return this;if(!this.isCompatible(yt))this.isInverse(yt)?yt=this.inverse().to(dt):nt(this.units(),yt.units());else if(yt.isTemperature())yt=fn(this,yt);else if(yt.isDegrees())yt=ln(this,yt);else{var Mt=$(this.baseScalar,yt.baseScalar);yt=Tt({scalar:Mt,numerator:yt.numerator,denominator:yt.denominator})}return this._conversionCache[dt]=yt,yt},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return gn(this);var dt=_n[this.units()];return dt||(dt=Rn(this.numerator,this.denominator),_n[this.units()]=dt),dt.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new et("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(dt){if(s(dt)&&(dt=Tt(dt)),h(dt)&&(dt=Tt(dt+" "+this.units())),this.isUnitless()?dt.isUnitless()||nt(this.units(),dt.units()):dt=dt.to(this.units()),dt.scalar===0)throw new et("Divide by zero");var wt=_(Math.round(this.scalar/dt.scalar),dt.scalar);return Tt(wt+this.units())}});function dn(dt,wt){var yt=Tt(dt),Mt=Tt(wt);if(yt.eq(Mt))return c;var Ft;return yt.isTemperature()?Ft=function(zt){return yt.mul(zt).to(Mt).scalar}:Ft=function(zt){return zt*yt.baseScalar/Mt.baseScalar},function(pn){var cn,mn,yn;if(Array.isArray(pn)){for(mn=pn.length,yn=[],cn=0;cn<mn;cn++)yn.push(Ft(pn[cn]));return yn}else return Ft(pn)}}var _n={};function Rn(dt,wt){for(var yt=[],Mt=[],Ft=1,zt,pn=0;pn<dt.length;pn++)zt=dt[pn],ot[zt]?Ft=_(Ft,ot[zt]):gt[zt]&&(Ft*=gt[zt].scalar,gt[zt].numerator&&yt.push(gt[zt].numerator),gt[zt].denominator&&Mt.push(gt[zt].denominator));for(var cn=0;cn<wt.length;cn++)zt=wt[cn],ot[zt]?Ft/=ot[zt]:gt[zt]&&(Ft/=gt[zt].scalar,gt[zt].numerator&&Mt.push(gt[zt].numerator),gt[zt].denominator&&yt.push(gt[zt].denominator));return yt=yt.reduce(function(mn,yn){return mn.concat(yn)},[]),Mt=Mt.reduce(function(mn,yn){return mn.concat(yn)},[]),Tt({scalar:Ft,numerator:yt,denominator:Mt})}Tt.parse=Xt,Tt.getUnits=xt,Tt.getAliases=bt,Tt.mulSafe=_,Tt.divSafe=$,Tt.getKinds=Kt,Tt.swiftConverter=dn,Tt.Error=et,b(Tt.prototype,{add:function(dt){if(s(dt)&&(dt=Tt(dt)),this.isCompatible(dt)||nt(this.units(),dt.units()),this.isTemperature()&&dt.isTemperature())throw new et("Cannot add two temperatures");return this.isTemperature()?an(this,dt):dt.isTemperature()?an(dt,this):Tt({scalar:this.scalar+dt.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(dt){if(s(dt)&&(dt=Tt(dt)),this.isCompatible(dt)||nt(this.units(),dt.units()),this.isTemperature()&&dt.isTemperature())return Ut(this,dt);if(this.isTemperature())return Jt(this,dt);if(dt.isTemperature())throw new et("Cannot subtract a temperature from a differential degree unit");return Tt({scalar:this.scalar-dt.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(dt){if(h(dt))return Tt({scalar:_(this.scalar,dt),numerator:this.numerator,denominator:this.denominator});if(s(dt)&&(dt=Tt(dt)),(this.isTemperature()||dt.isTemperature())&&!(this.isUnitless()||dt.isUnitless()))throw new et("Cannot multiply by temperatures");var wt=this,yt=dt;wt.isCompatible(yt)&&wt.signature!==400&&(yt=yt.to(wt));var Mt=$n(wt.numerator,wt.denominator,yt.numerator,yt.denominator);return Tt({scalar:_(wt.scalar,yt.scalar,Mt[2]),numerator:Mt[0],denominator:Mt[1]})},div:function(dt){if(h(dt)){if(dt===0)throw new et("Divide by zero");return Tt({scalar:this.scalar/dt,numerator:this.numerator,denominator:this.denominator})}else s(dt)&&(dt=Tt(dt));if(dt.scalar===0)throw new et("Divide by zero");if(dt.isTemperature())throw new et("Cannot divide with temperatures");if(this.isTemperature()&&!dt.isUnitless())throw new et("Cannot divide with temperatures");var wt=this,yt=dt;wt.isCompatible(yt)&&wt.signature!==400&&(yt=yt.to(wt));var Mt=$n(wt.numerator,wt.denominator,yt.denominator,yt.numerator);return Tt({scalar:_(wt.scalar,Mt[2])/yt.scalar,numerator:Mt[0],denominator:Mt[1]})},inverse:function(){if(this.isTemperature())throw new et("Cannot divide with temperatures");if(this.scalar===0)throw new et("Divide by zero");return Tt({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function $n(dt,wt,yt,Mt){function Ft(wn){return wn!==tt}dt=dt.filter(Ft),yt=yt.filter(Ft),wt=wt.filter(Ft),Mt=Mt.filter(Ft);var zt={};function pn(wn,En){for(var vn,An,Pn,Sn=0;Sn<wn.length;Sn++)if(ot[wn[Sn]]?(vn=wn[Sn+1],An=wn[Sn],Pn=ot[An],Sn++):(vn=wn[Sn],An=null,Pn=1),vn&&vn!==tt)if(zt[vn]){zt[vn][0]+=En;var Fn=zt[vn][2]?ot[zt[vn][2]]:1;zt[vn][En===1?3:4]*=$(Pn,Fn)}else zt[vn]=[En,vn,An,1,1]}pn(dt,1),pn(wt,-1),pn(yt,1),pn(Mt,-1);var cn=[],mn=[],yn=1;for(var Bn in zt)if(zt.hasOwnProperty(Bn)){var xn=zt[Bn],Dn;if(xn[0]>0)for(Dn=0;Dn<xn[0];Dn++)cn.push(xn[2]===null?xn[1]:[xn[2],xn[1]]);else if(xn[0]<0)for(Dn=0;Dn<-xn[0];Dn++)mn.push(xn[2]===null?xn[1]:[xn[2],xn[1]]);yn*=$(xn[3],xn[4])}return cn.length===0&&(cn=st),mn.length===0&&(mn=st),cn=cn.reduce(function(wn,En){return wn.concat(En)},[]),mn=mn.reduce(function(wn,En){return wn.concat(En)},[]),[cn,mn,yn]}b(Tt.prototype,{eq:function(dt){return this.compareTo(dt)===0},lt:function(dt){return this.compareTo(dt)===-1},lte:function(dt){return this.eq(dt)||this.lt(dt)},gt:function(dt){return this.compareTo(dt)===1},gte:function(dt){return this.eq(dt)||this.gt(dt)},compareTo:function(dt){if(s(dt))return this.compareTo(Tt(dt));if(this.isCompatible(dt)||nt(this.units(),dt.units()),this.baseScalar<dt.baseScalar)return-1;if(this.baseScalar===dt.baseScalar)return 0;if(this.baseScalar>dt.baseScalar)return 1},same:function(dt){return this.scalar===dt.scalar&&this.units()===dt.units()}}),b(Tt.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(dt){return g(dt,st)})},isCompatible:function(dt){return s(dt)?this.isCompatible(Tt(dt)):Ht(dt)&&dt.signature!==void 0?this.signature===dt.signature:!1},isInverse:function(dt){return this.inverse().isCompatible(dt)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(dt){dt!==tt&&lt.indexOf(dt)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function bn(){}bn.prototype.get=function(dt){return arguments.length>1&&(dt=Array.apply(null,arguments)),dt.reduce(function(wt,yt,Mt){if(wt){var Ft=wt[yt];return Mt===dt.length-1?Ft?Ft.data:void 0:Ft}},this)},bn.prototype.set=function(dt,wt){return arguments.length>2&&(dt=Array.prototype.slice.call(arguments,0,-1),wt=arguments[arguments.length-1]),dt.reduce(function(yt,Mt,Ft){var zt=yt[Mt];return zt===void 0&&(zt=yt[Mt]={}),Ft===dt.length-1?(zt.data=wt,wt):zt},this)};function Tn(dt,wt){return(dt+" "+wt).trim()}Tt.formatter=Tn,b(Tt.prototype,{units:function(){if(this._units!==void 0)return this._units;var dt=g(this.numerator,st),wt=g(this.denominator,st);if(dt&&wt)return this._units="",this._units;var yt=kn(this.numerator),Mt=kn(this.denominator);return this._units=yt+(wt?"":"/"+Mt),this._units},toString:function(dt,wt){var yt;if(h(dt))yt=this.units(),wt=dt;else if(s(dt))yt=dt;else if(Ht(dt))return this.toPrec(dt).toString(wt);var Mt=this.to(yt),Ft=wt!==void 0?j(Mt.scalar,wt):Mt.scalar;return Mt=(Ft+" "+Mt.units()).trim(),Mt},format:function(dt,wt){arguments.length===1&&typeof dt=="function"&&(wt=dt,dt=void 0),wt=wt||Tt.formatter;var yt=this.to(dt);return wt.call(this,yt.scalar,yt.units())}});var Mn=new bn;function kn(dt){var wt=Mn.get(dt);if(wt)return wt;var yt=g(dt,st);return yt?wt="1":wt=Cn(In(dt)).join("*"),Mn.set(dt,wt),wt}function In(dt){for(var wt=[],yt,Mt,Ft=0;Ft<dt.length;Ft++)yt=dt[Ft],Mt=dt[Ft+1],ot[yt]?(wt.push(ht[yt]+ht[Mt]),Ft++):wt.push(ht[yt]);return wt}function Cn(dt){var wt=dt.reduce(function(yt,Mt){var Ft=yt[Mt];return Ft||yt.push(Ft=yt[Mt]=[Mt,0]),Ft[1]++,yt},[]);return wt.map(function(yt){return yt[0]+(yt[1]>1?yt[1]:"")})}return Tt.version="1.8.0",Tt})})(quantities);var quantitiesExports=quantities.exports;const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(e,o=""){let s=o.split(".");for(let a of s){if(e[a]===void 0)return;e=e[a]}return e}var orientation={exports:{}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(e,o,s){var a=e*o,h=SPLITTER*e,c=h-e,d=h-c,g=e-d,b=SPLITTER*o,_=b-o,$=b-_,j=o-$,_e=a-d*$,et=_e-g*$,nt=et-d*j,it=g*j-nt;return s?(s[0]=it,s[1]=a,s):[it,a]}var robustSum=linearExpansionSum;function scalarScalar$1(e,o){var s=e+o,a=s-e,h=s-a,c=o-a,d=e-h,g=d+c;return g?[g,s]:[s]}function linearExpansionSum(e,o){var s=e.length|0,a=o.length|0;if(s===1&&a===1)return scalarScalar$1(e[0],o[0]);var h=s+a,c=new Array(h),d=0,g=0,b=0,_=Math.abs,$=e[g],j=_($),_e=o[b],et=_(_e),nt,it;j<et?(it=$,g+=1,g<s&&($=e[g],j=_($))):(it=_e,b+=1,b<a&&(_e=o[b],et=_(_e))),g<s&&j<et||b>=a?(nt=$,g+=1,g<s&&($=e[g],j=_($))):(nt=_e,b+=1,b<a&&(_e=o[b],et=_(_e)));for(var lt=nt+it,tt=lt-nt,st=it-tt,rt=st,ot=lt,ut,gt,pt,ht,ct;g<s&&b<a;)j<et?(nt=$,g+=1,g<s&&($=e[g],j=_($))):(nt=_e,b+=1,b<a&&(_e=o[b],et=_(_e))),it=rt,lt=nt+it,tt=lt-nt,st=it-tt,st&&(c[d++]=st),ut=ot+lt,gt=ut-ot,pt=ut-gt,ht=lt-gt,ct=ot-pt,rt=ct+ht,ot=ut;for(;g<s;)nt=$,it=rt,lt=nt+it,tt=lt-nt,st=it-tt,st&&(c[d++]=st),ut=ot+lt,gt=ut-ot,pt=ut-gt,ht=lt-gt,ct=ot-pt,rt=ct+ht,ot=ut,g+=1,g<s&&($=e[g]);for(;b<a;)nt=_e,it=rt,lt=nt+it,tt=lt-nt,st=it-tt,st&&(c[d++]=st),ut=ot+lt,gt=ut-ot,pt=ut-gt,ht=lt-gt,ct=ot-pt,rt=ct+ht,ot=ut,b+=1,b<a&&(_e=o[b]);return rt&&(c[d++]=rt),ot&&(c[d++]=ot),d||(c[d++]=0),c.length=d,c}var twoSum$1=fastTwoSum;function fastTwoSum(e,o,s){var a=e+o,h=a-e,c=a-h,d=o-h,g=e-c;return s?(s[0]=g+d,s[1]=a,s):[g+d,a]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(e,o){var s=e.length;if(s===1){var a=twoProduct(e[0],o);return a[0]?a:[a[1]]}var h=new Array(2*s),c=[.1,.1],d=[.1,.1],g=0;twoProduct(e[0],o,c),c[0]&&(h[g++]=c[0]);for(var b=1;b<s;++b){twoProduct(e[b],o,d);var _=c[1];twoSum(_,d[0],c),c[0]&&(h[g++]=c[0]);var $=d[1],j=c[1],_e=$+j,et=_e-$,nt=j-et;c[1]=_e,nt&&(h[g++]=nt)}return c[1]&&(h[g++]=c[1]),g===0&&(h[g++]=0),h.length=g,h}var robustDiff=robustSubtract;function scalarScalar(e,o){var s=e+o,a=s-e,h=s-a,c=o-a,d=e-h,g=d+c;return g?[g,s]:[s]}function robustSubtract(e,o){var s=e.length|0,a=o.length|0;if(s===1&&a===1)return scalarScalar(e[0],-o[0]);var h=s+a,c=new Array(h),d=0,g=0,b=0,_=Math.abs,$=e[g],j=_($),_e=-o[b],et=_(_e),nt,it;j<et?(it=$,g+=1,g<s&&($=e[g],j=_($))):(it=_e,b+=1,b<a&&(_e=-o[b],et=_(_e))),g<s&&j<et||b>=a?(nt=$,g+=1,g<s&&($=e[g],j=_($))):(nt=_e,b+=1,b<a&&(_e=-o[b],et=_(_e)));for(var lt=nt+it,tt=lt-nt,st=it-tt,rt=st,ot=lt,ut,gt,pt,ht,ct;g<s&&b<a;)j<et?(nt=$,g+=1,g<s&&($=e[g],j=_($))):(nt=_e,b+=1,b<a&&(_e=-o[b],et=_(_e))),it=rt,lt=nt+it,tt=lt-nt,st=it-tt,st&&(c[d++]=st),ut=ot+lt,gt=ut-ot,pt=ut-gt,ht=lt-gt,ct=ot-pt,rt=ct+ht,ot=ut;for(;g<s;)nt=$,it=rt,lt=nt+it,tt=lt-nt,st=it-tt,st&&(c[d++]=st),ut=ot+lt,gt=ut-ot,pt=ut-gt,ht=lt-gt,ct=ot-pt,rt=ct+ht,ot=ut,g+=1,g<s&&($=e[g]);for(;b<a;)nt=_e,it=rt,lt=nt+it,tt=lt-nt,st=it-tt,st&&(c[d++]=st),ut=ot+lt,gt=ut-ot,pt=ut-gt,ht=lt-gt,ct=ot-pt,rt=ct+ht,ot=ut,b+=1,b<a&&(_e=-o[b]);return rt&&(c[d++]=rt),ot&&(c[d++]=ot),d||(c[d++]=0),c.length=d,c}(function(e){var o=twoProduct_1,s=robustSum,a=robustScale,h=robustDiff,c=5,d=11102230246251565e-32,g=(3+16*d)*d,b=(7+56*d)*d;function _(rt,ot,ut,gt){return function(ht,ct,at){var ft=rt(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0]))),mt=rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),xt=gt(ft,mt);return xt[xt.length-1]}}function $(rt,ot,ut,gt){return function(ht,ct,at,ft){var mt=rt(rt(ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),ct[2]),rt(ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),-at[2]),ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),ft[2]))),rt(ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),ft[2])))),xt=rt(rt(ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),ht[2]),rt(ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),-at[2]),ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),ft[2]))),rt(ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),at[2])))),bt=gt(mt,xt);return bt[bt.length-1]}}function j(rt,ot,ut,gt){return function(ht,ct,at,ft,mt){var xt=rt(rt(rt(ut(rt(ut(rt(ot(ft[1],mt[0]),ot(-mt[1],ft[0])),at[2]),rt(ut(rt(ot(at[1],mt[0]),ot(-mt[1],at[0])),-ft[2]),ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),mt[2]))),ct[3]),rt(ut(rt(ut(rt(ot(ft[1],mt[0]),ot(-mt[1],ft[0])),ct[2]),rt(ut(rt(ot(ct[1],mt[0]),ot(-mt[1],ct[0])),-ft[2]),ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),mt[2]))),-at[3]),ut(rt(ut(rt(ot(at[1],mt[0]),ot(-mt[1],at[0])),ct[2]),rt(ut(rt(ot(ct[1],mt[0]),ot(-mt[1],ct[0])),-at[2]),ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),mt[2]))),ft[3]))),rt(ut(rt(ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),ct[2]),rt(ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),-at[2]),ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),ft[2]))),-mt[3]),rt(ut(rt(ut(rt(ot(ft[1],mt[0]),ot(-mt[1],ft[0])),ct[2]),rt(ut(rt(ot(ct[1],mt[0]),ot(-mt[1],ct[0])),-ft[2]),ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),mt[2]))),ht[3]),ut(rt(ut(rt(ot(ft[1],mt[0]),ot(-mt[1],ft[0])),ht[2]),rt(ut(rt(ot(ht[1],mt[0]),ot(-mt[1],ht[0])),-ft[2]),ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),mt[2]))),-ct[3])))),rt(rt(ut(rt(ut(rt(ot(ct[1],mt[0]),ot(-mt[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],mt[0]),ot(-mt[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),mt[2]))),ft[3]),rt(ut(rt(ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),ft[2]))),-mt[3]),ut(rt(ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),ct[2]),rt(ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),-at[2]),ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),ft[2]))),ht[3]))),rt(ut(rt(ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),ht[2]),rt(ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),-at[2]),ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),ft[2]))),-ct[3]),rt(ut(rt(ut(rt(ot(ct[1],ft[0]),ot(-ft[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),ft[2]))),at[3]),ut(rt(ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),at[2]))),-ft[3]))))),bt=rt(rt(rt(ut(rt(ut(rt(ot(ft[1],mt[0]),ot(-mt[1],ft[0])),at[2]),rt(ut(rt(ot(at[1],mt[0]),ot(-mt[1],at[0])),-ft[2]),ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),mt[2]))),ht[3]),ut(rt(ut(rt(ot(ft[1],mt[0]),ot(-mt[1],ft[0])),ht[2]),rt(ut(rt(ot(ht[1],mt[0]),ot(-mt[1],ht[0])),-ft[2]),ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),mt[2]))),-at[3])),rt(ut(rt(ut(rt(ot(at[1],mt[0]),ot(-mt[1],at[0])),ht[2]),rt(ut(rt(ot(ht[1],mt[0]),ot(-mt[1],ht[0])),-at[2]),ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),mt[2]))),ft[3]),ut(rt(ut(rt(ot(at[1],ft[0]),ot(-ft[1],at[0])),ht[2]),rt(ut(rt(ot(ht[1],ft[0]),ot(-ft[1],ht[0])),-at[2]),ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),ft[2]))),-mt[3]))),rt(rt(ut(rt(ut(rt(ot(at[1],mt[0]),ot(-mt[1],at[0])),ct[2]),rt(ut(rt(ot(ct[1],mt[0]),ot(-mt[1],ct[0])),-at[2]),ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),mt[2]))),ht[3]),ut(rt(ut(rt(ot(at[1],mt[0]),ot(-mt[1],at[0])),ht[2]),rt(ut(rt(ot(ht[1],mt[0]),ot(-mt[1],ht[0])),-at[2]),ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),mt[2]))),-ct[3])),rt(ut(rt(ut(rt(ot(ct[1],mt[0]),ot(-mt[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],mt[0]),ot(-mt[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),mt[2]))),at[3]),ut(rt(ut(rt(ot(ct[1],at[0]),ot(-at[1],ct[0])),ht[2]),rt(ut(rt(ot(ht[1],at[0]),ot(-at[1],ht[0])),-ct[2]),ut(rt(ot(ht[1],ct[0]),ot(-ct[1],ht[0])),at[2]))),-mt[3])))),Et=gt(xt,bt);return Et[Et.length-1]}}function _e(rt){var ot=rt===3?_:rt===4?$:j;return ot(s,o,a,h)}var et=_e(3),nt=_e(4),it=[function(){return 0},function(){return 0},function(ot,ut){return ut[0]-ot[0]},function(ot,ut,gt){var pt=(ot[1]-gt[1])*(ut[0]-gt[0]),ht=(ot[0]-gt[0])*(ut[1]-gt[1]),ct=pt-ht,at;if(pt>0){if(ht<=0)return ct;at=pt+ht}else if(pt<0){if(ht>=0)return ct;at=-(pt+ht)}else return ct;var ft=g*at;return ct>=ft||ct<=-ft?ct:et(ot,ut,gt)},function(ot,ut,gt,pt){var ht=ot[0]-pt[0],ct=ut[0]-pt[0],at=gt[0]-pt[0],ft=ot[1]-pt[1],mt=ut[1]-pt[1],xt=gt[1]-pt[1],bt=ot[2]-pt[2],Et=ut[2]-pt[2],Bt=gt[2]-pt[2],Nt=ct*xt,vt=at*mt,St=at*ft,kt=ht*xt,$t=ht*mt,Pt=ct*ft,It=bt*(Nt-vt)+Et*(St-kt)+Bt*($t-Pt),Dt=(Math.abs(Nt)+Math.abs(vt))*Math.abs(bt)+(Math.abs(St)+Math.abs(kt))*Math.abs(Et)+(Math.abs($t)+Math.abs(Pt))*Math.abs(Bt),At=b*Dt;return It>At||-It>At?It:nt(ot,ut,gt,pt)}];function lt(rt){var ot=it[rt.length];return ot||(ot=it[rt.length]=_e(rt.length)),ot.apply(void 0,rt)}function tt(rt,ot,ut,gt,pt,ht,ct){return function(ft,mt,xt,bt,Et){switch(arguments.length){case 0:case 1:return 0;case 2:return gt(ft,mt);case 3:return pt(ft,mt,xt);case 4:return ht(ft,mt,xt,bt);case 5:return ct(ft,mt,xt,bt,Et)}for(var Bt=new Array(arguments.length),Nt=0;Nt<arguments.length;++Nt)Bt[Nt]=arguments[Nt];return rt(Bt)}}function st(){for(;it.length<=c;)it.push(_e(it.length));e.exports=tt.apply(void 0,[lt].concat(it));for(var rt=0;rt<=c;++rt)e.exports[rt]=it[rt]}st()})(orientation);var orientationExports=orientation.exports,robustPnp=robustPointInPolygon,orient=orientationExports;function robustPointInPolygon(e,o){for(var s=o[0],a=o[1],h=e.length,c=1,d=h,g=0,b=h-1;g<d;b=g++){var _=e[g],$=e[b],j=_[1],_e=$[1];if(_e<j){if(_e<a&&a<j){var et=orient(_,$,o);if(et===0)return 0;c^=0<et|0}else if(a===j){var nt=e[(g+1)%h],it=nt[1];if(j<it){var et=orient(_,$,o);if(et===0)return 0;c^=0<et|0}}}else if(j<_e){if(j<a&&a<_e){var et=orient(_,$,o);if(et===0)return 0;c^=et<0|0}else if(a===j){var nt=e[(g+1)%h],it=nt[1];if(it<j){var et=orient(_,$,o);if(et===0)return 0;c^=et<0|0}}}else if(a===j){var lt=Math.min(_[0],$[0]),tt=Math.max(_[0],$[0]);if(g===0){for(;b>0;){var st=(b+h-1)%h,rt=e[st];if(rt[1]!==a)break;var ot=rt[0];lt=Math.min(lt,ot),tt=Math.max(tt,ot),b=st}if(b===0)return lt<=s&&s<=tt?0:1;d=b+1}for(var ut=e[(b+h-1)%h][1];g+1<d;){var rt=e[g+1];if(rt[1]!==a)break;var ot=rt[0];lt=Math.min(lt,ot),tt=Math.max(tt,ot),g+=1}if(lt<=s&&s<=tt)return 0;var gt=e[(g+1)%h][1];s<lt&&ut<a!=gt<a&&(c^=1)}}return 2*c-1}const robustPointInPolygon$1=getDefaultExportFromCjs(robustPnp);function feretDiameters(e={}){const{originalPoints:o=monotoneChainConvexHull.call(this)}=e;if(o.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(o.length===1)return{min:1,max:1,minLine:[o[0],o[0]],maxLine:[o[0],o[0]],aspectRatio:1};const s=new Array(o.length);let a=1/0,h=0,c=[];for(let _=0;_<o.length;_++){let $=getAngle(o[_],o[(_+1)%o.length]);rotate(-$,o,s);let j=0,_e=[];for(let et=0;et<o.length;et++){let nt=Math.abs(s[_][1]-s[et][1]);nt>j&&(j=nt,_e=[],_e.push([s[et][0],s[_][1]],[s[et][0],s[et][1]]))}j<a&&(a=j,h=$,c=_e)}rotate(h,c,c);let d=0,g=[],b=0;for(let _=0;_<o.length-1;_++)for(let $=_+1;$<o.length;$++){let j=(o[_][0]-o[$][0])**2+(o[_][1]-o[$][1])**2;j>b&&(b=j,d=Math.sqrt(j),g=[o[_],o[$]])}return{min:a,minLine:c,max:d,maxLine:g,aspectRatio:a/d}}function getAngle(e,o){let s=difference(o,e),a=normalize(s),h=Math.acos(a[0]);return a[1]<0?-h:h}class Roi{constructor(o,s){this.map=o,this.id=s,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(o={}){const{scale:s=1,kind:a=""}=o;let h;switch(a){case"contour":h=this.contourMask;break;case"box":h=this.boxMask;break;case"filled":h=this.filledMask;break;case"center":h=this.centerMask;break;case"mbr":h=this.mbrFilledMask;break;case"hull":h=this.convexHullFilledMask;break;case"hullContour":h=this.convexHullMask;break;case"mbrContour":h=this.mbrMask;break;case"feret":h=this.feretMask;break;default:h=this.mask}return s<1&&(h=h.resize({factor:s}),h.parent=this.mask.parent,h.position[0]+=this.minX,h.position[1]+=this.minY),h}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let o=this.borderIDs,s=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let a=this.internalIDs;for(let h=0;h<o.length;h++)a.includes(o[h])||(this.computed.externalIDs.push(o[h]),this.computed.externalLengths.push(s[h]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let o=getBorders(this);this.computed.borderIDs=o.ids,this.computed.borderLengths=o.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let o=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let s=0;s<this.width;s++)for(let a=0;a<this.height;a++)this.map.data[s+this.minX+(a+this.minY)*this.map.width]===this.id&&(s>0&&s<this.width-1&&a>0&&a<this.height-1?(this.map.data[s-1+this.minX+(a+this.minY)*this.map.width]!==this.id||this.map.data[s+1+this.minX+(a+this.minY)*this.map.width]!==this.id||this.map.data[s+this.minX+(a-1+this.minY)*this.map.width]!==this.id||this.map.data[s+this.minX+(a+1+this.minY)*this.map.width]!==this.id)&&o.setBitXY(s,a):o.setBitXY(s,a));this.computed.contourMask=o}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let o=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let s=0;s<this.width;s++)o.setBitXY(s,0),o.setBitXY(s,this.height-1);for(let s=0;s<this.height;s++)o.setBitXY(0,s),o.setBitXY(this.width-1,s);this.computed.boxMask=o}return this.computed.boxMask}get mask(){if(!this.computed.mask){let o=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let s=0;s<this.width;s++)for(let a=0;a<this.height;a++)this.map.data[s+this.minX+(a+this.minY)*this.map.width]===this.id&&o.setBitXY(s,a);this.computed.mask=o}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let o=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let s=0;s<this.width;s++)for(let a=0;a<this.height;a++){let h=s+this.minX+(a+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[h])&&o.setBitXY(s,a)}this.computed.filledMask=o}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let o=new Shape({kind:"smallCross"}).getMask();o.parent=this.map.parent,o.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=o}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const o=[];for(let a=0;a<this.width;a++)for(let h=0;h<this.height;h++)this.map.data[a+this.minX+(h+this.minY)*this.map.width]===this.id&&(a>0&&a<this.width-1&&h>0&&h<this.height-1?(this.map.data[a-1+this.minX+(h+this.minY)*this.map.width]!==this.id||this.map.data[a+1+this.minX+(h+this.minY)*this.map.width]!==this.id||this.map.data[a+this.minX+(h-1+this.minY)*this.map.width]!==this.id||this.map.data[a+this.minX+(h+1+this.minY)*this.map.width]!==this.id)&&(o.push([a,h]),o.push([a+1,h]),o.push([a,h+1]),o.push([a+1,h+1])):(o.push([a,h]),o.push([a+1,h]),o.push([a,h+1]),o.push([a+1,h+1])));const s=monotoneChainConvexHull$1(o);this.computed.convexHull={polyline:s,surface:surface(s),perimeter:perimeter(s)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const o=this.convexHull,s=new Image(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});s.paintPolyline(o.polyline,{closed:!0}),this.computed.convexHullMask=s}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const o=this.convexHull,s=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let a=0;a<this.width;a++)for(let h=0;h<this.height;h++)robustPointInPolygon$1(o.polyline,[a,h])!==1&&s.setBitXY(a,h);this.computed.convexHullFilledMask=s}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let o=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(o.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:o};else{let s=o[0],a=o[1],h=o[2],c=Math.sqrt((s[0]-a[0])**2+(s[1]-a[1])**2),d=Math.sqrt((h[0]-a[0])**2+(h[1]-a[1])**2);this.computed.mbr={width:c,height:d,elongation:1-c/d,aspectRatio:c/d,surface:c*d,perimeter:(c+d)*2,rectangle:o}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let o=this.perimeterInfo,s=2-Math.sqrt(2);return o.one+o.two*2+o.three*3+o.four*4-s*(o.two+o.three*2+o.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const o=new Image(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});o.paintPolyline(this.feretDiameters.minLine),o.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=o}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let o=round(this.mbr.rectangle);if(o.length>0){const s=minMax(o),a=new Image(s[1][0]-s[0][0]+1,s[1][1]-s[0][1]+1,{kind:BINARY,position:[this.minX+s[0][0],this.minY+s[0][1]],parent:this.map.parent});o=moveToZeroZero(o),a.paintPolyline(o,{closed:!0}),this.computed.mbrMask=a}else this.computed.mbrMask=new Image(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const o=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),s=this.mask.minimalBoundingRectangle();for(let a=0;a<this.width;a++)for(let h=0;h<this.height;h++)robustPointInPolygon$1(s,[a,h])!==1&&o.setBitXY(a,h);this.computed.mbrFilledMask=o}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let o=[];for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++){let h=(s+this.minY)*this.map.width+a+this.minX;this.map.data[h]===this.id&&o.push([a,s])}this.computed.points=o}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let o=0,s;const a=this.points;for(let h=0;h<a.length;h++)for(let c=h+1;c<a.length;c++){let d=Math.pow(a[h][0]-a[c][0],2)+Math.pow(a[h][1]-a[c][1],2);d>=o&&(o=d,s=[a[h],a[c]])}this.computed.maxLengthPoints=s}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let o=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=o}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let o=this.maxLengthPoints,s=-Math.atan2(o[0][1]-o[1][1],o[0][0]-o[1][0])*180/Math.PI;this.computed.angle=s}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(e){let o=e.map,s=o.data,a=new Set,h=new Map,c=new Set,d=[1,0,-1,0],g=[0,1,0,-1];for(let $=e.minX;$<=e.maxX;$++)for(let j=e.minY;j<=e.maxY;j++){let _e=$+j*o.width;if(s[_e]===e.id)for(let et=0;et<4;et++){let nt=$+d[et],it=j+g[et];if(nt>=0&&it>=0&&nt<o.width&&it<o.height){let lt=nt+it*o.width;if(s[lt]!==e.id&&!c.has(lt)){c.add(lt),a.add(s[lt]);let tt=h.get(s[lt]);tt?h.set(s[lt],++tt):h.set(s[lt],1)}}}}let b=Array.from(a),_=b.map(function($){return h.get($)});return{ids:b,lengths:_}}function getBoxIDs(e){let o=new Set,s=e.map,a=s.data;for(let h of[0,e.height-1])for(let c=0;c<e.width;c++){let d=(h+e.minY)*s.width+c+e.minX;if(c-e.minX>0&&a[d]===e.id&&a[d-1]!==e.id){let g=a[d-1];o.add(g)}if(s.width-c-e.minX>1&&a[d]===e.id&&a[d+1]!==e.id){let g=a[d+1];o.add(g)}}for(let h of[0,e.width-1])for(let c=0;c<e.height;c++){let d=(c+e.minY)*s.width+h+e.minX;if(c-e.minY>0&&a[d]===e.id&&a[d-s.width]!==e.id){let g=a[d-s.width];o.add(g)}if(s.height-c-e.minY>1&&a[d]===e.id&&a[d+s.width]!==e.id){let g=a[d+s.width];o.add(g)}}return Array.from(o)}function getBox(e){let o=0,s=e.map,a=s.data,h=[0];e.height>1&&(h[1]=e.height-1);for(let d of h)for(let g=1;g<e.width-1;g++){let b=(d+e.minY)*s.width+g+e.minX;a[b]===e.id&&o++}let c=[0];e.width>1&&(c[1]=e.width-1);for(let d of c)for(let g=0;g<e.height;g++){let b=(g+e.minY)*s.width+d+e.minX;a[b]===e.id&&o++}return o}function getBorder(e){let o=0,s=e.map,a=s.data;for(let h=1;h<e.width-1;h++)for(let c=1;c<e.height-1;c++){let d=(c+e.minY)*s.width+h+e.minX;a[d]===e.id&&(a[d-1]!==e.id||a[d+1]!==e.id||a[d-s.width]!==e.id||a[d+s.width]!==e.id)&&o++}return o+e.box}function getPerimeterInfo(e){let o=e.map,s=o.data,a=0,h=0,c=0,d=0;for(let g=0;g<e.width;g++)for(let b=0;b<e.height;b++){let _=(b+e.minY)*o.width+g+e.minX;if(s[_]===e.id){let $=0;switch((g===0||e.externalIDs.includes(s[_-1]))&&$++,(g===e.width-1||e.externalIDs.includes(s[_+1]))&&$++,(b===0||e.externalIDs.includes(s[_-o.width]))&&$++,(b===e.height-1||e.externalIDs.includes(s[_+o.width]))&&$++,$){case 1:a++;break;case 2:h++;break;case 3:c++;break;case 4:d++;break}}}return{one:a,two:h,three:c,four:d}}function getExternal(e){let o=0,s=e.map,a=s.data;for(let h=1;h<e.width-1;h++)for(let c=1;c<e.height-1;c++){let d=(c+e.minY)*s.width+h+e.minX;a[d]===e.id&&(e.externalIDs.includes(a[d-1])||e.externalIDs.includes(a[d+1])||e.externalIDs.includes(a[d-s.width])||e.externalIDs.includes(a[d+s.width]))&&o++}return o+e.box}function getHolesInfo(e){let o=0,s=e.map.width,a=e.map.data;for(let h=1;h<e.width-1;h++)for(let c=1;c<e.height-1;c++){let d=(c+e.minY)*s+h+e.minX;e.internalIDs.includes(a[d])&&a[d]!==e.id&&o++}return{number:e.internalIDs.length-1,surface:o}}function getInternalIDs(e){let o=[e.id],s=e.map,a=s.data;if(e.height>2)for(let c=0;c<e.width;c++){let d=e.minY*s.width+c+e.minX;if(o.includes(a[d])){let g=a[d+s.width];!o.includes(g)&&!e.boxIDs.includes(g)&&o.push(g)}}let h=new Array(4);for(let c=1;c<e.width-1;c++)for(let d=1;d<e.height-1;d++){let g=(d+e.minY)*s.width+c+e.minX;if(o.includes(a[g])){h[0]=a[g-1],h[1]=a[g+1],h[2]=a[g-s.width],h[3]=a[g+s.width];for(let b=0;b<4;b++){let _=h[b];!o.includes(_)&&!e.boxIDs.includes(_)&&o.push(_)}}}return o}class RoiLayer{constructor(o,s){this.roiMap=o,this.options=s,this.roi=this.createRoi()}createRoi(){let o=this.roiMap.data,s={};this.roiMap.positive=0,this.roiMap.negative=0;for(let g=0;g<o.length;g++)o[g]&&!s[o[g]]&&(s[o[g]]=!0,o[g]>0?this.roiMap.positive++:this.roiMap.negative++);let a={};for(let g in s)a[g]=new Roi(this.roiMap,g*1);let h=this.roiMap.width,c=this.roiMap.height;for(let g=0;g<c;g++)for(let b=0;b<h;b++){let _=g*h+b;if(o[_]!==0){const $=o[_],j=a[$];b<j.minX&&(j.minX=b),b>j.maxX&&(j.maxX=b),g<j.minY&&(j.minY=g),g>j.maxY&&(j.maxY=g),j.meanX+=b,j.meanY+=g,j.surface++}}let d=[];for(let g in s)a[g].meanX/=a[g].surface,a[g].meanY/=a[g].surface,d.push(a[g]);return d}}function commonBorderLength(e){let o=e.data,s=[1,0,-1,0],a=[0,1,0,-1],h=e.minMax,c=-h.min,d=h.max+c,g=[];for(let _=0;_<=d;_++)g.push(Object.create(null));for(let _=0;_<e.width;_++)for(let $=0;$<e.height;$++){let j=_+$*e.width,_e=o[j];if(_e!==0){let et=Object.create(null),nt=!1;for(let it=0;it<4;it++){let lt=_+s[it],tt=$+a[it];if(lt>=0&&tt>=0&&lt<e.width&&tt<e.height){let st=o[lt+tt*e.width];_e!==st&&(nt=!0,st!==0&&et[st]===void 0&&(et[st]=!0,g[st+c][_e]?g[st+c][_e]++:g[st+c][_e]=1))}else nt=!0}nt&&(g[_e+c][_e]?g[_e+c][_e]++:g[_e+c][_e]=1)}}let b={};for(let _=0;_<g.length;_++)Object.keys(g[_]).length>0&&(b[_-c]=g[_]);return b}function mergeRoi(e={}){const{algorithm:o="commonBorderLength",minCommonBorderLength:s=5,maxCommonBorderLength:a=100,minCommonBorderRatio:h=.3,maxCommonBorderRatio:c=1}=e;let d=function(lt,tt,st){return lt[st]>=s&&lt[st]<=a};typeof o=="function"&&(d=o),o.toLowerCase()==="commonborderratio"&&(d=function(lt,tt,st){let rt=Math.min(lt[st]/lt[tt],1);return rt>=h&&rt<=c});const g=this,b=g.commonBorderLength;let _={},$={};for(let lt of Object.keys(b)){let tt=b[lt],st=Object.keys(tt);for(let rt of st)if(rt!==lt&&d(tt,lt,rt)){let ot=rt;$[rt]&&(ot=$[rt]);let ut=lt;if($[lt]&&(ut=$[lt]),Number(ot)!==ut){let gt=Math.min(ot,ut),pt=Math.max(ot,ut);if(_[gt]||(_[gt]={}),_[gt][pt]=!0,$[pt]=gt,_[pt]){for(let ht of Object.keys(_[pt]))_[gt][ht]=!0,$[ht]=gt;delete _[pt]}}}}let j=g.minMax,_e=-j.min,et=j.max+_e,nt=new Array(et+1).fill(0);for(let lt of Object.keys($))nt[Number(lt)+_e]=$[lt];let it=g.data;for(let lt=0;lt<it.length;lt++){let tt=it[lt];if(tt!==0){let st=nt[tt+_e];st!==0&&(it[lt]=st)}}return g.computed={},g}class RoiMap{constructor(o,s){this.parent=o,this.width=o.width,this.height=o.height,this.data=s,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let a=0;a<this.data.length;a++)this.data[a]<o&&(o=this.data[a]),this.data[a]>s&&(s=this.data[a]);return{min:o,max:s}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(o={}){return mergeRoi.call(this,o)}mergeRois(o){const s=o[0],a=o.slice(1);for(let h=0;h<this.data.length;h++)a.includes(this.data[h])&&(this.data[h]=s)}rowsInfo(){let o=new Array(this.height),s=0;for(let a=0;a<this.data.length;a+=this.width){let h={row:s,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};o[s++]=h;let c={},d={},g=[],b=this.data[a],_=0;for(let $=a;$<a+this.width;$++){let j=this.data[$];b!==j&&(b=j,g.push(_),_=0),_++,j>0?(h.positivePixel++,c[j]||(c[j]=!0)):j<0?(h.negativePixel++,d[j]||(d[j]=!0)):h.zeroPixel++}g.push(_),h.medianChange=g.sort(($,j)=>$-j)[Math.floor(g.length/2)],h.positiveRoiIDs=Object.keys(c),h.negativeRoiIDs=Object.keys(d),h.positiveRoi=h.positiveRoiIDs.length,h.negativeRoi=h.negativeRoiIDs.length}return o}colsInfo(){let o=new Array(this.width),s=0;for(let a=0;a<this.width;a++){let h={col:s,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};o[s++]=h;let c={},d={},g=[],b=this.data[a],_=0;for(let $=a;$<a+this.data.length;$+=this.width){let j=this.data[$];b!==j&&(b=j,g.push(_),_=0),_++,j>0?(h.positivePixel++,c[j]||(c[j]=!0)):j<0?(h.negativePixel++,d[j]||(d[j]=!0)):h.zeroPixel++}g.push(_),h.medianChange=g.sort(($,j)=>$-j)[Math.floor(g.length/2)],h.positiveRoiIDs=Object.keys(c),h.negativeRoiIDs=Object.keys(d),h.positiveRoi=h.positiveRoiIDs.length,h.negativeRoi=h.negativeRoiIDs.length}return o}}function fromMask(e,o={}){const{allowCorners:s=!1}=o,a=65535;let h=new Int16Array(e.size),c=0,d=0,g=new Uint16Array(a+1),b=new Uint16Array(a+1);for(let $=0;$<e.width;$++)for(let j=0;j<e.height;j++)h[j*e.width+$]===0&&_($,j);function _($,j){let _e=0,et=0,nt=e.getBitXY($,j),it=nt?++c:--d;if(c>32767||d<-32768)throw new Error("Too many regions of interest");for(g[0]=$,b[0]=j;_e<=et;){let lt=g[_e&a],tt=b[_e&a];if(h[tt*e.width+lt]=it,lt>0&&h[tt*e.width+lt-1]===0&&e.getBitXY(lt-1,tt)===nt&&(et++,g[et&a]=lt-1,b[et&a]=tt,h[tt*e.width+lt-1]=-32768),tt>0&&h[(tt-1)*e.width+lt]===0&&e.getBitXY(lt,tt-1)===nt&&(et++,g[et&a]=lt,b[et&a]=tt-1,h[(tt-1)*e.width+lt]=-32768),lt<e.width-1&&h[tt*e.width+lt+1]===0&&e.getBitXY(lt+1,tt)===nt&&(et++,g[et&a]=lt+1,b[et&a]=tt,h[tt*e.width+lt+1]=-32768),tt<e.height-1&&h[(tt+1)*e.width+lt]===0&&e.getBitXY(lt,tt+1)===nt&&(et++,g[et&a]=lt,b[et&a]=tt+1,h[(tt+1)*e.width+lt]=-32768),s&&(lt>0&&tt>0&&h[(tt-1)*e.width+lt-1]===0&&e.getBitXY(lt-1,tt-1)===nt&&(et++,g[et&a]=lt-1,b[et&a]=tt-1,h[(tt-1)*e.width+lt-1]=-32768),lt<e.width-1&&tt>0&&h[(tt-1)*e.width+lt+1]===0&&e.getBitXY(lt+1,tt-1)===nt&&(et++,g[et&a]=lt+1,b[et&a]=tt-1,h[(tt-1)*e.width+lt+1]=-32768),lt>0&&tt<e.height-1&&h[(tt+1)*e.width+lt-1]===0&&e.getBitXY(lt-1,tt+1)===nt&&(et++,g[et&a]=lt-1,b[et&a]=tt+1,h[(tt+1)*e.width+lt-1]=-32768),lt<e.width-1&&tt<e.height-1&&h[(tt+1)*e.width+lt+1]===0&&e.getBitXY(lt+1,tt+1)===nt&&(et++,g[et&a]=lt+1,b[et&a]=tt+1,h[(tt+1)*e.width+lt+1]=-32768)),_e++,et-_e>a)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(e,h)}class DisjointSet{constructor(){this.nodes=new Map}add(o){var s=this.nodes.get(o);return s||(s=new DisjointSetNode(o),this.nodes.set(o,s)),s}union(o,s){const a=this.find(o),h=this.find(s);a!==h&&(a.rank<h.rank?a.parent=h:a.rank>h.rank?h.parent=a:(h.parent=a,a.rank++))}find(o){for(var s=o;s.parent!==null;)s=s.parent;for(var a=o;a.parent!==null;){var h=a;a=a.parent,h.parent=s}return s}connected(o,s){return this.find(o)===this.find(s)}}var DisjointSet_1=DisjointSet;function DisjointSetNode(e){this.value=e,this.parent=null,this.rank=0}const DisjointSet$1=getDefaultExportFromCjs(DisjointSet_1),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(e,o={}){const{allowCorners:s=!1}=o;let a=4;s&&(a=8);let h,c,d;if(a===8)h=direction8X,c=direction8Y,d=neighbours8;else if(a===4)h=direction4X,c=direction4Y,d=neighbours4;else throw new RangeError(`unsupported neighbours count: ${a}`);const g=e.size,b=e.width,_=e.height,$=new Array(g),j=new Uint32Array(g),_e=new DisjointSet$1;let et=1;for(let nt=0;nt<_;nt++)for(let it=0;it<b;it++){const lt=it+nt*b;if(e.getBit(lt)){let tt=null;for(let st=0;st<d.length;st++){const rt=it+h[st],ot=nt+c[st];if(rt>=0&&ot>=0&&rt<b&&ot<_){const ut=rt+ot*b;let gt=$[ut];gt?(d[st]=gt,(!tt||d[st].value<tt.value)&&(tt=d[st])):d[st]=null}}if(!tt)$[lt]=_e.add(et++);else{$[lt]=tt;for(let st=0;st<d.length;st++)d[st]&&d[st]!==tt&&_e.union(tt,d[st])}}}for(let nt=0;nt<_;nt++)for(let it=0;it<b;it++){const lt=it+nt*b;e.getBit(lt)&&(j[lt]=_e.find($[lt]).value)}return new RoiMap(e,j)}function fromMaxima(e={}){let{allowCorner:o=!0,onlyTop:s=!1,invert:a=!1}=e,h=this;h.checkProcessable("fromMaxima",{components:[1]});const c=1,d=2;let g=0,b=0,_=new Int16Array(h.size),$=new Int8Array(h.size),j=new Float32Array(h.size),_e=1048575,et=new Uint16Array(_e+1),nt=new Uint16Array(_e+1),it=0,lt=0,tt=new Uint16Array(_e+1),st=new Uint16Array(_e+1),rt=0,ot=0;for(ut(h);it<lt;){let ht=et[it&_e],ct=nt[it&_e];pt(ht,ct,d),it++}return new RoiMap(h,_);function ut({maxima:ht=!0}){for(let ct=1;ct<h.height-1;ct++)for(let at=1;at<h.width-1;at++){let ft=at+ct*h.width;if($[ft]===0){let mt=ht?h.data[ft]:-h.data[at+ct*h.width];if(h.data[ct*h.width+at-1]>mt||h.data[ct*h.width+at+1]>mt||h.data[(ct-1)*h.width+at]>mt||h.data[(ct+1)*h.width+at]>mt||o&&(h.data[(ct-1)*h.width+at-1]>mt||h.data[(ct-1)*h.width+at+1]>mt||h.data[(ct+1)*h.width+at-1]>mt||h.data[(ct+1)*h.width+at+1]>mt))continue;_[ft]=ht?++g:--b,gt(at,ct)||(ht?--g:++b)}}}function gt(ht,ct){let at=lt;rt=0,ot=1,tt[0]=ht,st[0]=ct;let ft=!0;for(;rt<ot;){let mt=tt[rt&_e],xt=st[rt&_e];ft&=pt(mt,xt,c),rt++}if(!ft){for(let mt=0;mt<ot;mt++){let xt=tt[mt&_e],Et=st[mt&_e]*h.width+xt;_[Et]=0}lt=at}return ft}function pt(ht,ct,at){let ft=_[ct*h.width+ht],mt=h.data[ct*h.width+ht];for(let xt=ct-1;xt<=ct+1;xt++)for(let bt=ht-1;bt<=ht+1;bt++){let Et=xt*h.width+bt;if($[Et]===0)switch($[Et]=1,j[Et]=h.data[Et]-mt,at){case c:if(j[Et]===0){if(bt===0||xt===0||bt===h.width-1||xt===h.height-1)return!1;_[Et]=ft,tt[ot&_e]=bt,st[ot&_e]=xt,ot++}else{if(j[Et]>0)return!1;s||(_[Et]=ft,et[lt&_e]=bt,nt[lt&_e]=xt,lt++)}break;case d:j[Et]<=0&&(_[Et]=ft,et[lt&_e]=bt,nt[lt&_e]=xt,lt++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(e,o={}){let s=new Shape(o),a=new Int16Array(this.size),h=0,c=s.getPoints();for(let d=0;d<e.length;d++){h++;let g=e[d][0],b=e[d][1];for(let _=0;_<c.length;_++){let $=c[_][0],j=c[_][1];g+$>=0&&b+j>=0&&g+$<this.width&&b+j<this.height&&(a[g+$+(b+j)*this.width]=h)}}return new RoiMap(this,a)}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}};(function(e,o){(function(s){e.exports=s()})(function(){return function s(a,h,c){function d(_,$){if(!h[_]){if(!a[_]){var j=typeof commonjsRequire=="function"&&commonjsRequire;if(!$&&j)return j(_,!0);if(g)return g(_,!0);var _e=new Error("Cannot find module '"+_+"'");throw _e.code="MODULE_NOT_FOUND",_e}var et=h[_]={exports:{}};a[_][0].call(et.exports,function(nt){var it=a[_][1][nt];return d(it||nt)},et,et.exports,s,a,h,c)}return h[_].exports}for(var g=typeof commonjsRequire=="function"&&commonjsRequire,b=0;b<c.length;b++)d(c[b]);return d}({1:[function(s,a,h){var c,d,g,b,_,$=function(_e,et){for(var nt in et)j.call(et,nt)&&(_e[nt]=et[nt]);function it(){this.constructor=_e}return it.prototype=et.prototype,_e.prototype=new it,_e.__super__=et.prototype,_e},j={}.hasOwnProperty;c=s("./PriorityQueue/AbstractPriorityQueue"),d=s("./PriorityQueue/ArrayStrategy"),b=s("./PriorityQueue/BinaryHeapStrategy"),g=s("./PriorityQueue/BHeapStrategy"),_=function(_e){$(et,_e);function et(nt){nt||(nt={}),nt.strategy||(nt.strategy=b),nt.comparator||(nt.comparator=function(it,lt){return(it||0)-(lt||0)}),et.__super__.constructor.call(this,nt)}return et}(c),_.ArrayStrategy=d,_.BinaryHeapStrategy=b,_.BHeapStrategy=g,a.exports=_},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(s,a,h){a.exports=function(){function c(d){var g;if((d!=null?d.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((d!=null?d.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new d.strategy(d),this.length=(d!=null&&(g=d.initialValues)!=null?g.length:void 0)||0}return c.prototype.queue=function(d){this.length++,this.priv.queue(d)},c.prototype.dequeue=function(d){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},c.prototype.peek=function(d){if(!this.length)throw"Empty queue";return this.priv.peek()},c.prototype.clear=function(){return this.length=0,this.priv.clear()},c}()},{}],3:[function(s,a,h){var c;c=function(d,g,b){var _,$,j;for($=0,_=d.length;$<_;)j=$+_>>>1,b(d[j],g)>=0?$=j+1:_=j;return $},a.exports=function(){function d(g){var b;this.options=g,this.comparator=this.options.comparator,this.data=((b=this.options.initialValues)!=null?b.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return d.prototype.queue=function(g){var b;b=c(this.data,g,this.comparator),this.data.splice(b,0,g)},d.prototype.dequeue=function(){return this.data.pop()},d.prototype.peek=function(){return this.data[this.data.length-1]},d.prototype.clear=function(){this.data.length=0},d}()},{}],4:[function(s,a,h){a.exports=function(){function c(d){var g,b,_,$,j,_e,et,nt;for(this.comparator=(d!=null?d.comparator:void 0)||function(it,lt){return it-lt},this.pageSize=(d!=null?d.pageSize:void 0)||512,this.length=0,et=0;1<<et<this.pageSize;)et+=1;if(1<<et!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=et,this._emptyMemoryPageTemplate=g=[],b=0,j=this.pageSize;0<=j?b<j:b>j;0<=j?++b:--b)g.push(null);if(this._memory=[],this._mask=this.pageSize-1,d.initialValues)for(_e=d.initialValues,_=0,$=_e.length;_<$;_++)nt=_e[_],this.queue(nt)}return c.prototype.queue=function(d){this.length+=1,this._write(this.length,d),this._bubbleUp(this.length,d)},c.prototype.dequeue=function(){var d,g;return d=this._read(1),g=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,g),this._bubbleDown(1,g)),d},c.prototype.peek=function(){return this._read(1)},c.prototype.clear=function(){this.length=0,this._memory.length=0},c.prototype._write=function(d,g){var b;for(b=d>>this._shift;b>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[b][d&this._mask]=g},c.prototype._read=function(d){return this._memory[d>>this._shift][d&this._mask]},c.prototype._bubbleUp=function(d,g){var b,_,$,j;for(b=this.comparator;d>1&&(_=d&this._mask,d<this.pageSize||_>3?$=d&~this._mask|_>>1:_<2?($=d-this.pageSize>>this._shift,$+=$&~(this._mask>>1),$|=this.pageSize>>1):$=d-2,j=this._read($),!(b(j,g)<0));)this._write($,g),this._write(d,j),d=$},c.prototype._bubbleDown=function(d,g){var b,_,$,j,_e;for(_e=this.comparator;d<this.length;)if(d>this._mask&&!(d&this._mask-1)?b=_=d+2:d&this.pageSize>>1?(b=(d&~this._mask)>>1,b|=d&this._mask>>1,b=b+1<<this._shift,_=b+1):(b=d+(d&this._mask),_=b+1),b!==_&&_<=this.length)if($=this._read(b),j=this._read(_),_e($,g)<0&&_e($,j)<=0)this._write(b,g),this._write(d,$),d=b;else if(_e(j,g)<0)this._write(_,g),this._write(d,j),d=_;else break;else if(b<=this.length)if($=this._read(b),_e($,g)<0)this._write(b,g),this._write(d,$),d=b;else break;else break},c}()},{}],5:[function(s,a,h){a.exports=function(){function c(d){var g;this.comparator=(d!=null?d.comparator:void 0)||function(b,_){return b-_},this.length=0,this.data=((g=d.initialValues)!=null?g.slice(0):void 0)||[],this._heapify()}return c.prototype._heapify=function(){var d,g,b;if(this.data.length>0)for(d=g=1,b=this.data.length;1<=b?g<b:g>b;d=1<=b?++g:--g)this._bubbleUp(d)},c.prototype.queue=function(d){this.data.push(d),this._bubbleUp(this.data.length-1)},c.prototype.dequeue=function(){var d,g;return g=this.data[0],d=this.data.pop(),this.data.length>0&&(this.data[0]=d,this._bubbleDown(0)),g},c.prototype.peek=function(){return this.data[0]},c.prototype.clear=function(){this.length=0,this.data.length=0},c.prototype._bubbleUp=function(d){for(var g,b;d>0&&(g=d-1>>>1,this.comparator(this.data[d],this.data[g])<0);)b=this.data[g],this.data[g]=this.data[d],this.data[d]=b,d=g},c.prototype._bubbleDown=function(d){var g,b,_,$,j;for(g=this.data.length-1;b=(d<<1)+1,$=b+1,_=d,b<=g&&this.comparator(this.data[b],this.data[_])<0&&(_=b),$<=g&&this.comparator(this.data[$],this.data[_])<0&&(_=$),_!==d;)j=this.data[_],this.data[_]=this.data[d],this.data[d]=j,d=_},c}()},{}]},{},[1])(1)})})(priorityQueue);var priorityQueueExports=priorityQueue.exports;const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(e={}){let{points:o,mask:s,image:a,fillMaxValue:h=this.maxValue,invert:c=!1}=e,d=a||this;d.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),c=!c,o||(o=d.getLocalMaxima({invert:c,mask:s}));let g=c?0:1,b=new Int16Array(d.size),_=d.width,$=d.height,j=new PriorityQueue({comparator:(_e,et)=>_e[2]-et[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let _e=0;_e<o.length;_e++){let et=o[_e][0]+o[_e][1]*_;b[et]=_e+1;let nt=d.data[et];(c&&nt<=h||!c&&nt>=h)&&j.queue([o[_e][0],o[_e][1],nt])}for(;j.length>0;){let _e=j.dequeue(),et=_e[0]+_e[1]*_;for(let nt=0;nt<4;nt++){let it=_e[0]+dxs[nt],lt=_e[1]+dys[nt];if(it>=0&&lt>=0&&it<_&&lt<$){let tt=it+lt*_;if(!s||s.getBit(tt)===g){let st=d.data[tt];(c&&st<=h||!c&&st>=h)&&b[tt]===0&&(b[tt]=b[et],j.queue([_e[0]+dxs[nt],_e[1]+dys[nt],st]))}}}}return new RoiMap(d,b)}class RoiManager{constructor(o,s={}){this._image=o,this._options=s,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(o={}){let s=Object.assign({},this._options,o),a=fromMaxima.call(this._image,o);this._layers[s.label]=new RoiLayer(a,s)}fromPoints(o,s={}){let a=Object.assign({},this._options,s),h=fromPoints.call(this._image,o,s);return this._layers[a.label]=new RoiLayer(h,a),this}putMap(o,s={}){let a=new RoiMap(this._image,o),h=Object.assign({},this._options,s);return this._layers[h.label]=new RoiLayer(a,h),this}fromWaterShed(o={}){let s=Object.assign({},this._options,o),a=fromWaterShed.call(this._image,o);this._layers[s.label]=new RoiLayer(a,s)}fromMask(o,s={}){let a=Object.assign({},this._options,s),h=fromMask.call(this._image,o,s);return this._layers[a.label]=new RoiLayer(h,a),this}fromMaskConnectedComponentLabelingAlgorithm(o,s={}){let a=Object.assign({},this._options,s),h=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,o,s);return this._layers[a.label]=new RoiLayer(h,a),this}getMap(o={}){let s=Object.assign({},this._options,o);return this._assertLayerWithLabel(s.label),this._layers[s.label].roiMap}rowsInfo(o={}){return this.getMap(o).rowsInfo()}colsInfo(o={}){return this.getMap(o).rowsInfo()}getRoiIds(o={}){let s=this.getRois(o);if(s){let a=new Array(s.length);for(let h=0;h<s.length;h++)a[h]=s[h].id;return a}throw new Error("ROIs not found")}getRois(o={}){let{label:s=this._options.label,positive:a=!0,negative:h=!0,minSurface:c=0,maxSurface:d=Number.POSITIVE_INFINITY,minWidth:g=0,maxWidth:b=Number.POSITIVE_INFINITY,minHeight:_=0,maxHeight:$=Number.POSITIVE_INFINITY,minRatio:j=0,maxRatio:_e=Number.POSITIVE_INFINITY}=o;if(!this._layers[s])throw new Error(`this Roi layer (${s}) does not exist`);const et=this._layers[s].roi,nt=[];for(const it of et)(it.id<0&&h||it.id>0&&a)&&it.surface>=c&&it.surface<=d&&it.width>=g&&it.width<=b&&it.height>=_&&it.height<=$&&it.ratio>=j&&it.ratio<=_e&&nt.push(it);return nt}getRoi(o,s={}){const{label:a=this._options.label}=s;if(!this._layers[a])throw new Error(`this Roi layer (${a}) does not exist`);const h=this._layers[a].roi.find(c=>c.id===o);if(!h)throw new Error(`found no Roi with id ${o}`);return h}getMasks(o={}){let s=this.getRois(o),a=new Array(s.length);for(let h=0;h<s.length;h++)a[h]=s[h].getMask(o);return a}getAnalysisMasks(o={}){const{analysisProperty:s}=o;let a=`${s}Mask`,h=this.getRois(o);return h.length===0||!h[0][a]?[]:h.map(c=>c[a])}getData(o={}){let s=Object.assign({},this._options,o);return this._assertLayerWithLabel(s.label),this._layers[s.label].roiMap.data}paint(o={}){let{labelProperty:s,analysisProperty:a}=o;this._painted||(this._painted=this._image.rgba8());let h=this.getMasks(o);if(s){const c=this.getRois(o);o.labels=c.map(_=>deepValue(_,s));const d=Math.max(...o.labels);let g=!1,b=!1;if(s.includes("surface")?g=!0:/(?:perimeter|min|max|external|width|height|length)/.test(s)&&(b=!0),isFinite(d)){let _="";if(o.unit!=="pixel"&&o.pixelSize&&(b||g)){_=g?`${o.unit}^2`:o.unit;let $=g?"m^2":"m",j=g?o.pixelSize**2:o.pixelSize;const _e=Qty.swiftConverter($,_);o.labels=o.labels.map(et=>_e(j*et))}d>50?o.labels=o.labels.map($=>Math.round($)+_):d>10?o.labels=o.labels.map($=>$.toFixed(1)+_):o.labels=o.labels.map($=>$.toFixed(2)+_)}o.labelsPosition=c.map(_=>[_.meanX,_.meanY])}if(this._painted.paintMasks(h,o),a){let c=this.getAnalysisMasks(o);this._painted.paintMasks(c,{color:o.analysisColor,alpha:o.analysisAlpha})}return this._painted}getMask(o={}){let s=new Image(this._image.width,this._image.height,{kind:"BINARY"}),a=this.getMasks(o);for(let h=0;h<a.length;h++){let c=a[h];for(let d=0;d<c.width;d++)for(let g=0;g<c.height;g++)c.getBitXY(d,g)&&s.setBitXY(d+c.position[0],g+c.position[1])}return s}resetPainted(o={}){const{image:s}=o;s?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(o={}){const s=this.getMap(o);return s.mergeRoi(o),this.putMap(s.data,o),this}mergeRois(o,s={}){if(!Array.isArray(o)||o.some(h=>!Number.isInteger(h)))throw new Error("Roi ids must be an array of integers");if(o.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(o).size!==o.length)throw new Error("Roi ids must be all different");o.forEach(h=>this.getRoi(h));const a=this.getMap(s);return a.mergeRois(o),this.putMap(a.data,s),this}findCorrespondingRoi(o,s={}){let a=this.getRois(s),h=[];for(let c=0;c<a.length;c++){let d=a[c],g=d.minX,b=d.minY,_=d.points,$=Math.sign(d.id),j=correspondingRoisInformation(g,b,_,o,$);h.push(j)}return h}_assertLayerWithLabel(o){if(!this._layers[o])throw new Error(`no layer with label ${o}`)}}function correspondingRoisInformation(e,o,s,a,h){let c={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let d=0;d<s.length;d++){let g=s[d],b=g[0],_=g[1],$=b+e+(_+o)*a.width,j=a.data[$];(j>0||j<0)&&(c.id.includes(j)?c.surface[c.id.indexOf(j)]+=1:(c.id.push(j),c.surface.push(1)))}for(let d=0;d<c.id.length;d++)Math.sign(c.id[d])===h?c.same+=c.surface[d]:c.opposite+=c.surface[d],c.roiSurfaceCovered[d]=c.surface[d]/s.length;return c.total=c.opposite+c.same,c}const objectToString=Object.prototype.toString;class Image{constructor(o,s,a,h){if(arguments.length===1?(h=o,{width:o,height:s,data:a}=h):a&&!a.length&&(h=a,{data:a}=h),o===void 0&&(o=1),s===void 0&&(s=1),h===void 0&&(h={}),typeof h!="object"||h===null)throw new TypeError("options must be an object");if(!Number.isInteger(o)||o<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(s)||s<=0)throw new RangeError("height must be a positive integer");const{kind:c=RGBA}=h;if(typeof c!="string")throw new TypeError("kind must be a string");const d=getKind(c),g=Object.assign({},h);for(const it in d)g[it]===void 0&&(g[it]=d[it]);verifyKindDefinition(g);const{components:b,bitDepth:_,colorModel:$}=g,j=g.alpha+0,_e=o*s,et=b+j,nt=_===32?Number.MAX_VALUE:2**_-1;if(a===void 0)a=createPixelArray(_e,b,j,et,_,nt);else{const it=getTheoreticalPixelArraySize(_e,et,_);if(a.length!==it)throw new RangeError(`incorrect data size: ${a.length}. Should be ${it}`)}this.width=o,this.height=s,this.data=a,this.size=_e,this.components=b,this.alpha=j,this.bitDepth=_,this.maxValue=nt,this.colorModel=$,this.channels=et,this.meta=h.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:h.parent||null}),this.position=h.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(o){return objectToString.call(o)==="[object IJSImage]"}static fromCanvas(o){const a=o.getContext("2d").getImageData(0,0,o.width,o.height);return new Image(a.width,a.height,a.data)}static createFrom(o,s){const a=getImageParameters(o);return Object.assign(a,{parent:o,position:[0,0]},s),new Image(a)}getRoiManager(o){return new RoiManager(this,o)}clone(){const o=this.data.slice();return new Image(this.width,this.height,o,this)}apply(o){for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++){let h=(s*this.width+a)*this.channels;o.call(this,h)}}}setValueMethods(Image);setBitMethods(Image);setExportMethods(Image);Image.prototype.checkProcessable=checkProcessable;Image.prototype.getRGBAData=getRGBAData;Image.load=load;Image.extendMethod=extendMethod;Image.extendProperty=extendProperty;extend$1(Image);var workerTemplate$1={},worker$1=function(){self.window=self;function e(){this._listeners={}}e.prototype.on=function(s,a){if(this._listeners[s])throw new RangeError("there is already a listener for "+s);if(typeof a!="function")throw new TypeError("callback argument must be a function");this._listeners[s]=a},e.prototype._send=function(s,a,h){h===void 0?h=[]:Array.isArray(h)||(h=[h]),self.postMessage({id:s,data:a},h)},e.prototype._trigger=function(s,a){if(!this._listeners[s])throw new Error("event "+s+" is not defined");this._listeners[s].apply(null,a)};var o=new e;self.onmessage=function(s){switch(s.data.action){case"exec":s.data.args.unshift(function(a,h){o._send(s.data.id,a,h)}),o._trigger(s.data.event,s.data.args);break;case"ping":o._send(s.data.id,"pong");break;default:throw new Error("unexpected action: "+s.data.action)}}},workerStr=worker$1.toString().split('"CODE";');workerTemplate$1.newWorkerURL=function e(o,s){var a=new Blob(["(",workerStr[0],"importScripts.apply(self, "+JSON.stringify(s)+`);
`,"(",o,")();",workerStr[1],")();"],{type:"application/javascript"});return URL.createObjectURL(a)};var workerTemplate=workerTemplate$1,CORES=navigator.hardwareConcurrency||1;function WorkerManager(e,o){if(typeof e!="string"&&typeof e!="function")throw new TypeError("func argument must be a function");if(o===void 0&&(o={}),typeof o!="object"||o===null)throw new TypeError("options argument must be an object");this._workerCode=e.toString(),o.maxWorkers===void 0||o.maxWorkers==="auto"?this._numWorkers=Math.min(CORES-1,1):o.maxWorkers>0?this._numWorkers=Math.min(o.maxWorkers,CORES):this._numWorkers=CORES,this._workers=new Map,this._timeout=o.timeout||0,this._terminateOnError=!!o.terminateOnError;var s=o.deps;typeof s=="string"&&(s=[s]),Array.isArray(s)||(s=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(s)}WorkerManager.prototype._init=function(e){for(var o=workerTemplate.newWorkerURL(this._workerCode,e),s=0;s<this._numWorkers;s++){var a=new Worker(o);a.onmessage=this._onmessage.bind(this,a),a.onerror=this._onerror.bind(this,a),a.running=!1,a.id=s,this._workers.set(a,null)}URL.revokeObjectURL(o)};WorkerManager.prototype._onerror=function(e,o){if(!this._terminated){this._working--,e.running=!1;var s=this._workers.get(e);s&&s[1](o.message),this._workers.set(e,null),this._terminateOnError?this.terminate():this._exec()}};WorkerManager.prototype._onmessage=function(e,o){if(!this._terminated){this._working--,e.running=!1;var s=this._workers.get(e);s&&s[0](o.data.data),this._workers.set(e,null),this._exec()}};WorkerManager.prototype._exec=function(){for(var e of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!e.running)for(var o=0;o<this._waiting.length;o++){var s=this._waiting[o];if(!(typeof s[4]=="number"&&s[4]!==e.id)){this._waiting.splice(o,1),e.postMessage({action:"exec",event:s[0],args:s[1]},s[2]),e.running=!0,e.time=Date.now(),this._workers.set(e,s[3]),this._working++;break}}}};WorkerManager.prototype.terminate=function(){if(!this._terminated){for(var e of this._workers)e[0].terminate(),e[1]&&e[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}};WorkerManager.prototype.postAll=function(e,o){if(this._terminated)throw new Error("Cannot post (terminated)");var s=[];for(var a of this._workers.keys())s.push(this.post(e,o,[],a.id));return Promise.all(s)};WorkerManager.prototype.post=function(e,o,s,a){o===void 0&&(o=[]),s===void 0&&(s=[]),Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);var h=this;return new Promise(function(c,d){if(h._terminated)throw new Error("Cannot post (terminated)");h._waiting.push([e,o,s,[c,d],a]),h._exec()})};var src=WorkerManager;const WorkerManager$1=getDefaultExportFromCjs(src),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(e,o,s){o=Object.assign({},defaultOptions,o);const a=this.manager;return Array.isArray(e)?Promise.all(e.map(function(h){const c=runOnce(a,h,o);return typeof s=="function"&&c.then(s),c})):runOnce(a,e,o)}function runOnce(e,o,s){return e.post("data",[o,s]).then(function(a){for(let h in a)a[h]=new Image(a[h]);return a})}function work(){worker.on("data",function(e,o,s){o=new IJS(o);const a={},h=[],c=o.grey(),d=c.sobelFilter();et("sobel",d);const g=d.level().mask({threshold:s.threshold});et("mask",g);const b=d.getRoiManager();b.fromMask(g);const _=b.getMask(s.roi);et("realMask",_);const $=c.getPixelsGrid({sampling:s.sampling,mask:_}),j=o.getBackground($.xyS,$.zS,s.regression);et("background",j);const _e=o.subtract(j);a.result=_e,h.push(_e.data.buffer),e(a,h);function et(nt,it){s.include.includes(nt)&&(a[nt]=it,h.push(it.data.buffer))}})}const background={run,work};function extend(e){e.extendMethod("background",background)}let Worker$1=class Vn{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(o){if(typeof o!="string")throw new TypeError("worker URL must be a string");this._url=o,this._deps[0]=o}static extendMethod(o,s){let a,h,c={};function d(...g){return a||(this.checkUrl(),h=this.url,a=new WorkerManager$1(s.work,{deps:h}),c.manager=a),s.run.call(c,...g)}d.reset=function(){a&&(a.terminate(),a=new WorkerManager$1(s.work,{deps:h}),c.manager=a)},Vn.prototype[o]=d}};extend(Worker$1);function App(){const[e,o]=reactExports.useState(image_init),[s,a]=reactExports.useState(),[h,c]=reactExports.useState(image3),d=g=>{g.target.files&&g.target.files[0]&&o(URL.createObjectURL(g.target.files[0]))};return reactExports.useEffect(()=>{(async()=>{let g=await Image.load(e),b=Math.max(0,g.width/2-g.height/2),_=Math.min(g.height,g.width-b);g=g.crop({x:b,y:0,width:_,height:g.height});let $=await Image.load(h);$=$.resize({width:g.width,height:g.height});let j=$.width,_e=$.height,et=g.width,nt=$.channels,it=g.channels;const lt=g.data,tt=$.data;for(let st=0;st<j;st++)for(let rt=0;rt<_e;rt++){let ot=(rt*j+st)*nt,ut=(rt*et+st)*it;tt[ot]===0&&tt[ot+1]===0&&tt[ot+2]===0||(lt[ut]=tt[ot],lt[ut+1]=tt[ot+1],lt[ut+2]=tt[ot+2])}a(g.toDataURL())})()},[e,h]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h1",{children:"Stand with Israel"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{alt:"preview image",src:e,height:300}),"       ",jsxRuntimeExports.jsx("img",{src:s,height:300}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("input",{type:"file",onChange:d}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Click on one of the frames",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:image1,height:200,onClick:()=>c(image1),style:{border:"1px solid"}}),jsxRuntimeExports.jsx("img",{src:image2,height:200,onClick:()=>c(image2),style:{border:"1px solid"}}),jsxRuntimeExports.jsx("img",{src:image3,height:200,onClick:()=>c(image3),style:{border:"1px solid"}})]})}const index="";client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
